import{B as Y,C as Q,G as W,H as X,h as Z,D as ee,I as te,J as le,q as oe,d as ae,r as se,K as ie,R as ne,L as re}from"./element-plus-CW14IAqd.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang-BSFOyzad.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-DIi7FCTv.js";import{d as N,a0 as pe,r as h,a5 as ue,ah as ce,an as _e,o as x,c as fe,a as s,f as e,g as l,z as a,ab as ve,_ as y,i as B,Y as w,t as u,l as be,u as T,k as ke,F as he}from"./@vue-CGao7vbS.js";import{V as xe}from"./@liripeng-tRfXSOOZ.js";import{d as ye,c as ge}from"./tool-qFxs9rEm.js";import{u as Ve}from"./usePaging-D9QJQ_HK.js";import{y as Ce,f as Ee}from"./index-DkCvA8ar.js";import{u as we}from"./getExposeType-BTk_Jeu2.js";import Te from"./edit-BflveisV.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";const Fe={class:"flex items-center"},Pe={class:"ml-2"},Re={class:"flex items-center"},Ue={class:"truncate max-w-40"},Ae={class:"flex items-center"},$e={class:"mr-2"},Be={class:"flex items-center"},Ne={class:"mr-2"},De={class:"flex items-center"},ze={class:"flex items-center"},Ie={class:"ml-2"},Ke={class:"flex justify-end mt-4"},Le={width:"100%",height:"450px",controls:"",style:{height:"450px"}},Se=["src"],qe=N({name:"avatarLists"}),Ft=N({...qe,setup(je){const n=pe({user_info:"",status:"",start_time:"",end_time:""}),F=h(""),P=h(""),b=h(!1),c=h(!1),D=we(),{pager:_,getLists:f,resetPage:R,resetParams:z}=Ve({fetchFun:ge,params:n}),I=async m=>{await Ee.confirm("确定要删除？"),await ye({id:m}),f()},U=m=>{b.value=!0,F.value=m},K=m=>{c.value=!0,P.value=m};return ue(()=>{f()}),f(),(m,o)=>{const L=Y,k=Q,S=me,g=W,q=X,p=Z,j=ee,A=te,i=le,G=oe,V=ce("VideoPlay"),C=ae,E=se,H=ie,J=de,$=ne,M=_e("perms"),O=re;return x(),fe(he,null,[s("div",null,[e(A,{class:"!border-none",shadow:"never"},{default:l(()=>[e(j,{ref:"formRef",class:"mb-[-16px]",model:a(n),inline:!0},{default:l(()=>[e(k,{label:"用户信息"},{default:l(()=>[e(L,{class:"w-[280px]",modelValue:a(n).user_info,"onUpdate:modelValue":o[0]||(o[0]=t=>a(n).user_info=t),placeholder:"请输入用户账号/昵称/手机号/sn",clearable:"",onKeyup:ve(a(R),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(k,{label:"创建时间"},{default:l(()=>[e(S,{startTime:a(n).start_time,"onUpdate:startTime":o[1]||(o[1]=t=>a(n).start_time=t),endTime:a(n).end_time,"onUpdate:endTime":o[2]||(o[2]=t=>a(n).end_time=t)},null,8,["startTime","endTime"])]),_:1}),e(k,{label:"状态",class:"w-[280px]"},{default:l(()=>[e(q,{modelValue:a(n).status,"onUpdate:modelValue":o[3]||(o[3]=t=>a(n).status=t),clearable:""},{default:l(()=>[e(g,{label:"合成中",value:0}),e(g,{label:"已完成",value:1}),e(g,{label:"已失败",value:2})]),_:1},8,["modelValue"])]),_:1}),e(k,null,{default:l(()=>[e(p,{type:"primary",onClick:a(R)},{default:l(()=>o[8]||(o[8]=[y("查询")])),_:1},8,["onClick"]),e(p,{onClick:a(z)},{default:l(()=>o[9]||(o[9]=[y("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(A,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[B((x(),w(H,{size:"large",data:a(_).lists},{default:l(()=>[e(i,{label:"任务号",prop:"task_id","min-width":"120"}),e(i,{label:"用户信息","min-width":"180"},{default:l(({row:t})=>[s("div",Fe,[e(G,{class:"flex-shrink-0",src:t.userAvatar,size:50},null,8,["src"]),s("span",Pe,u(t.userName),1)])]),_:1}),e(i,{label:"合成通道",prop:"mode","min-width":"120"}),e(i,{label:"作品名称","min-width":"180"},{header:l(()=>[s("div",Re,[o[10]||(o[10]=s("span",{class:"mr-2"},"合成结果",-1)),e(E,{class:"box-item",effect:"dark",content:"点击作品名称播放视频预览",placement:"top-start"},{default:l(()=>[e(C,null,{default:l(()=>[e(V)]),_:1})]),_:1})])]),default:l(({row:t})=>[e(p,{type:"primary",link:"",onClick:r=>U(t.resultFile),disabled:!t.resultFile,class:"overflow-hidden"},{default:l(()=>[s("span",Ue,u((t==null?void 0:t.title)||"暂无标题"),1)]),_:2},1032,["onClick","disabled"])]),_:1}),e(i,{label:"","min-width":"180"},{header:l(()=>[s("div",Ae,[o[11]||(o[11]=s("span",{class:"mr-2"},"形象视频",-1)),e(E,{class:"box-item",effect:"dark",content:"点击作品名称播放视频预览",placement:"top-start"},{default:l(()=>[e(C,null,{default:l(()=>[e(V)]),_:1})]),_:1})])]),default:l(({row:t})=>{var r;return[e(p,{type:"primary",link:"",onClick:d=>{var v;return U((v=t.video)==null?void 0:v.video_url)},disabled:!((r=t.video)!=null&&r.video_url)},{default:l(()=>{var d;return[s("span",$e,u(((d=t.video)==null?void 0:d.name)||"暂无名称"),1)]}),_:2},1032,["onClick","disabled"])]}),_:1}),e(i,{label:"","min-width":"180"},{header:l(()=>[s("div",Be,[o[12]||(o[12]=s("span",{class:"mr-2"},"音频信息",-1)),e(E,{class:"box-item",effect:"dark",content:"点击作品名称播放音频预览",placement:"top-start"},{default:l(()=>[e(C,null,{default:l(()=>[e(V)]),_:1})]),_:1})])]),default:l(({row:t})=>{var r;return[e(p,{type:"primary",link:"",onClick:d=>{var v;return K((v=t.voice)==null?void 0:v.voice_url)},disabled:!((r=t.voice)!=null&&r.voice_url)},{default:l(()=>{var d;return[s("span",Ne,u(((d=t.voice)==null?void 0:d.title)||"暂无标题"),1)]}),_:2},1032,["onClick","disabled"])]}),_:1}),e(i,{label:"失败原因",prop:"fail_reason","min-width":"150","show-overflow-tooltip":""}),e(i,{label:"状态","min-width":"100"},{default:l(({row:t})=>[s("div",De,[s("span",{class:be(["ml-2",{"text-info":t.status==="0","text-success":t.status==="1","text-error":t.status==="2"}])},u(["合成中","已完成","合成失败"][Number(t.status)]),3)])]),_:1}),e(i,{label:"创建时间",prop:"create_time","min-width":"120"}),e(i,{label:"操作",width:"120",fixed:"right"},{default:l(({row:t})=>[B((x(),w(p,{type:"danger",link:"",onClick:r=>I(t.id)},{default:l(()=>o[13]||(o[13]=[y(" 删除 ")])),_:2},1032,["onClick"])),[[M,["avatar.aiAvatarRecord/delete"]]])]),_:1}),e(i,{label:"消耗算力值",prop:"cost_power","min-width":"120"}),e(i,{label:"消耗时间(秒)",prop:"cost_time","min-width":"120"},{default:l(({row:t})=>[s("div",ze,[s("span",Ie,u(a(Ce)(t.cost_time||0)),1)])]),_:1})]),_:1},8,["data"])),[[O,a(_).loading]]),s("div",Ke,[e(J,{modelValue:a(_),"onUpdate:modelValue":o[4]||(o[4]=t=>T(_)?_.value=t:null),onChange:a(f)},null,8,["modelValue","onChange"])])]),_:1})]),e($,{modelValue:a(b),"onUpdate:modelValue":o[5]||(o[5]=t=>T(b)?b.value=t:null),width:"740px",title:"视频预览","destroy-on-close":""},{default:l(()=>[s("video",Le,[s("source",{src:a(F),type:"video/mp4"},null,8,Se),o[14]||(o[14]=y(" 您的浏览器不支持 video 标签。 "))])]),_:1},8,["modelValue"]),e($,{modelValue:a(c),"onUpdate:modelValue":o[6]||(o[6]=t=>T(c)?c.value=t:null),width:"740px",title:"音频预览","destroy-on-close":""},{default:l(()=>[a(c)?(x(),w(a(xe),{key:0,"audio-list":[a(P)],"theme-color":"#409EFF"},null,8,["audio-list"])):ke("",!0)]),_:1},8,["modelValue"]),e(Te,{ref_key:"editRef",ref:D,onRefresh:o[7]||(o[7]=t=>a(f)())},null,512)],64)}}});export{Ft as default};
