import{h as F,J as z,K as I,I as P,L as j}from"./element-plus-CW14IAqd.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-BSFOyzad.js";import{f as J,b as K}from"./index-DkCvA8ar.js";import{c as U,d as Y}from"./role-D2FxKU1H.js";import{u as q}from"./usePaging-D9QJQ_HK.js";import{_ as H}from"./auth.vue_vue_type_script_setup_true_lang-Btp3MR51.js";import{_ as M}from"./edit.vue_vue_type_script_setup_true_lang-CYow_4Ie.js";import{d as E,G as g,r as $,an as O,o as a,c as x,f as t,g as i,a as y,i as u,Y as m,_ as h,z as n,u as Q,k as D,y as C}from"./@vue-CGao7vbS.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./@liripeng-tRfXSOOZ.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";import"./menu-DEZllqeP.js";import"./index-Da-RjlL5.js";const W={class:"role-lists"},X={class:"mt-4"},Z={class:"flex justify-end mt-4"},ee=E({name:"role"}),Ge=E({...ee,setup(te){const c=g(),k=g(),f=$(!1),w=$(!1),{pager:p,getLists:d}=q({fetchFun:Y}),V=async()=>{var o;f.value=!0,await C(),(o=c.value)==null||o.open("add")},R=async o=>{var e,l;f.value=!0,await C(),(e=c.value)==null||e.open("edit"),(l=c.value)==null||l.setFormData(o)},B=async o=>{var e,l;w.value=!0,await C(),(e=k.value)==null||e.open(),(l=k.value)==null||l.setFormData(o)},L=async o=>{await J.confirm("确定要删除？"),await U({id:o}),d()};return d(),(o,e)=>{const l=K,_=F,s=z,N=I,S=G,T=P,v=O("perms"),A=j;return a(),x("div",W,[t(T,{class:"!border-none",shadow:"never"},{default:i(()=>[y("div",null,[u((a(),m(_,{type:"primary",onClick:V},{icon:i(()=>[t(l,{name:"el-icon-Plus"})]),default:i(()=>[e[3]||(e[3]=h(" 新增 "))]),_:1})),[[v,["auth.role/add"]]])]),u((a(),x("div",X,[y("div",null,[t(N,{data:n(p).lists,size:"large"},{default:i(()=>[t(s,{prop:"id",label:"ID","min-width":"100"}),t(s,{prop:"name",label:"名称","min-width":"150"}),t(s,{prop:"desc",label:"备注","min-width":"150","show-overflow-tooltip":""}),t(s,{prop:"sort",label:"排序","min-width":"100"}),t(s,{prop:"num",label:"管理员人数","min-width":"100"}),t(s,{prop:"create_time",label:"创建时间","min-width":"180"}),t(s,{label:"操作",width:"200",fixed:"right"},{default:i(({row:r})=>[u((a(),m(_,{link:"",type:"primary",onClick:b=>R(r)},{default:i(()=>e[4]||(e[4]=[h(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),u((a(),m(_,{link:"",type:"primary",onClick:b=>B(r)},{default:i(()=>e[5]||(e[5]=[h(" 分配权限 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),u((a(),m(_,{link:"",type:"danger",onClick:b=>L(r.id)},{default:i(()=>e[6]||(e[6]=[h(" 删除 ")])),_:2},1032,["onClick"])),[[v,["auth.role/delete"]]])]),_:1})]),_:1},8,["data"])]),y("div",Z,[t(S,{modelValue:n(p),"onUpdate:modelValue":e[0]||(e[0]=r=>Q(p)?p.value=r:null),onChange:n(d)},null,8,["modelValue","onChange"])])])),[[A,n(p).loading]])]),_:1}),n(f)?(a(),m(M,{key:0,ref_key:"editRef",ref:c,onSuccess:n(d),onClose:e[1]||(e[1]=r=>f.value=!1)},null,8,["onSuccess"])):D("",!0),n(w)?(a(),m(H,{key:1,ref_key:"authRef",ref:k,onSuccess:n(d),onClose:e[2]||(e[2]=r=>w.value=!1)},null,8,["onSuccess"])):D("",!0)])}}});export{Ge as default};
