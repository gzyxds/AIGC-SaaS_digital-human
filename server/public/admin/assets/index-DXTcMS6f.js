import{B as J,C as Y,h as H,D as O,I as Q,J as W,n as X,o as Z,p as ee,K as te,L as oe}from"./element-plus-CW14IAqd.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-BSFOyzad.js";import{g as ae,f as x,b as le}from"./index-DkCvA8ar.js";import{d as S,a0 as B,r as re,ah as se,an as ie,o as r,c as y,f as t,g as o,z as n,ab as K,_ as i,i as m,Y as p,a as w,u as me,k as de}from"./@vue-CGao7vbS.js";import{b as pe,c as ue,d as _e,e as ce,s as fe}from"./code-CmHtRGSa.js";import{u as ge}from"./usePaging-D9QJQ_HK.js";import{_ as be}from"./code-preview.vue_vue_type_script_setup_true_lang-C9mCR3gq.js";import{_ as ye}from"./data-table.vue_vue_type_script_setup_true_lang-C7Y6zkbw.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./@liripeng-tRfXSOOZ.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";import"./index-Da-RjlL5.js";const we={class:"code-generation"},ve={class:"flex"},ke={class:"mt-4"},Ce={class:"flex items-center"},Ve={class:"flex justify-end mt-4"},xe=S({name:"codeGenerate"}),dt=S({...xe,setup(Ee){const u=B({table_name:"",table_comment:""}),_=B({show:!1,loading:!1,code:[]}),{pager:f,getLists:b,resetParams:T,resetPage:v}=ge({fetchFun:ce,params:u}),g=re([]),I=a=>{g.value=a.map(({id:e})=>e)},N=async a=>{await x.confirm("确定要同步表结构？"),await fe({id:a})},E=async a=>{await x.confirm("确定要删除？"),await pe({id:a}),b()},U=async a=>{const e=await ue({id:a});_.code=e,_.show=!0},z=a=>a.some(e=>e.generate_type==1),D=async a=>{if(z(a))return x.msgError("生成方式为生成到模块，请在前端开发模式下使用，详细参考文档");const e=await _e({id:a});e.file&&window.open(e.file,"_blank")},F=(a,e)=>{switch(a){case"generate":D([e.id]);break;case"sync":N(e.id);break;case"delete":E(e.id)}};return b(),(a,e)=>{const h=J,k=Y,s=H,G=O,P=Q,C=le,c=W,L=se("router-link"),V=X,M=Z,R=ee,j=te,q=ne,d=ie("perms"),A=oe;return r(),y("div",we,[t(P,{class:"!border-none",shadow:"never"},{default:o(()=>[t(G,{class:"mb-[-16px]",model:n(u),inline:""},{default:o(()=>[t(k,{label:"表名称"},{default:o(()=>[t(h,{class:"w-[280px]",modelValue:n(u).table_name,"onUpdate:modelValue":e[0]||(e[0]=l=>n(u).table_name=l),clearable:"",onKeyup:K(n(v),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(k,{label:"表描述"},{default:o(()=>[t(h,{class:"w-[280px]",modelValue:n(u).table_comment,"onUpdate:modelValue":e[1]||(e[1]=l=>n(u).table_comment=l),clearable:"",onKeyup:K(n(v),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(k,null,{default:o(()=>[t(s,{type:"primary",onClick:n(v)},{default:o(()=>e[6]||(e[6]=[i("查询")])),_:1},8,["onClick"]),t(s,{onClick:n(T)},{default:o(()=>e[7]||(e[7]=[i("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),m((r(),p(P,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[w("div",ve,[m((r(),p(ye,{class:"inline-block mr-[10px]",onSuccess:n(b)},{default:o(()=>[t(s,{type:"primary"},{icon:o(()=>[t(C,{name:"el-icon-Plus"})]),default:o(()=>[e[8]||(e[8]=i(" 导入数据表 "))]),_:1})]),_:1},8,["onSuccess"])),[[d,["tools.generator/selectTable"]]]),m((r(),p(s,{disabled:!n(g).length,onClick:e[2]||(e[2]=l=>E(n(g))),type:"danger"},{icon:o(()=>[t(C,{name:"el-icon-Delete"})]),default:o(()=>[e[9]||(e[9]=i(" 删除 "))]),_:1},8,["disabled"])),[[d,["tools.generator/delete"]]]),m((r(),p(s,{disabled:!n(g).length,onClick:e[3]||(e[3]=l=>D(n(g)))},{default:o(()=>e[10]||(e[10]=[i(" 生成代码 ")])),_:1},8,["disabled"])),[[d,["tools.generator/generate"]]])]),w("div",ke,[t(j,{data:n(f).lists,size:"large",onSelectionChange:I},{default:o(()=>[t(c,{type:"selection",width:"55"}),t(c,{label:"表名称",prop:"table_name","min-width":"180"}),t(c,{label:"表描述",prop:"table_comment","min-width":"180"}),t(c,{label:"创建时间",prop:"create_time","min-width":"180"}),t(c,{label:"更新时间",prop:"update_time","min-width":"180"}),t(c,{label:"操作",width:"160",fixed:"right"},{default:o(({row:l})=>[w("div",Ce,[m((r(),p(s,{type:"primary",link:"",onClick:$=>U(l.id)},{default:o(()=>e[11]||(e[11]=[i(" 预览 ")])),_:2},1032,["onClick"])),[[d,["tools.generator/preview"]]]),t(s,{type:"primary",link:""},{default:o(()=>[m((r(),p(L,{to:{path:n(ae)("tools.generator/edit"),query:{id:l.id}}},{default:o(()=>e[12]||(e[12]=[i(" 编辑 ")])),_:2},1032,["to"])),[[d,["tools.generator/edit"]]])]),_:2},1024),m((r(),p(R,{class:"ml-2",onCommand:$=>F($,l)},{dropdown:o(()=>[t(M,null,{default:o(()=>[m((r(),y("div",null,[t(V,{command:"generate"},{default:o(()=>[t(s,{type:"primary",link:""},{default:o(()=>e[14]||(e[14]=[i(" 生成代码 ")])),_:1})]),_:1})])),[[d,["tools.generator/generate"]]]),m((r(),y("div",null,[t(V,{command:"sync"},{default:o(()=>[t(s,{type:"primary",link:""},{default:o(()=>e[15]||(e[15]=[i(" 同步 ")])),_:1})]),_:1})])),[[d,["tools.generator/syncColumn"]]]),m((r(),y("div",null,[t(V,{command:"delete"},{default:o(()=>[t(s,{type:"danger",link:""},{default:o(()=>e[16]||(e[16]=[i(" 删除 ")])),_:1})]),_:1})])),[[d,["tools.generator/delete"]]])]),_:1})]),default:o(()=>[t(s,{type:"primary",link:""},{default:o(()=>[e[13]||(e[13]=i(" 更多 ")),t(C,{name:"el-icon-ArrowDown",size:14})]),_:1})]),_:2},1032,["onCommand"])),[[d,["tools.generator/generate","tools.generator/syncColumn","tools.generator/delete"]]])])]),_:1})]),_:1},8,["data"])]),w("div",Ve,[t(q,{modelValue:n(f),"onUpdate:modelValue":e[4]||(e[4]=l=>me(f)?f.value=l:null),onChange:n(b)},null,8,["modelValue","onChange"])])]),_:1})),[[A,n(f).loading]]),n(_).show?(r(),p(be,{key:0,modelValue:n(_).show,"onUpdate:modelValue":e[5]||(e[5]=l=>n(_).show=l),code:n(_).code},null,8,["modelValue","code"])):de("",!0)])}}});export{dt as default};
