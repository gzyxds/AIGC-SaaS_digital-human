import{Q as F,I as L,C as S,M as T,N as U,B as j,D as z,h as G,L as M}from"./element-plus-CW14IAqd.js";import{_ as $}from"./index-Df1qeOtf.js";import{l as H}from"./lodash-BtPWuHkK.js";import{n as O,s as P}from"./message-4islfBQv.js";import{d as Q,f as Y}from"./index-DkCvA8ar.js";import{u as h,a as A}from"./vue-router-akAgejHM.js";import{d as w,r as J,a0 as K,G as W,o as d,c,f as t,g as o,i as X,z as a,Y as Z,a as l,_ as m,t as p,F as ee,j as te}from"./@vue-CGao7vbS.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./@liripeng-tRfXSOOZ.js";import"./nprogress-Cgf5DU8x.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";const oe={class:"w-80"},se={class:"flex-1"},ae={class:"w-full max-w-[320px]"},ne={class:"form-tips"},ie=w({name:"noticeEdit"}),He=w({...ie,setup(re){const f=h(),y=A(),_=J(!1),s=K({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),E={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:V}=Q(),v=W(),k=async()=>{_.value=!0;const i=await O({id:f.query.id});Object.keys(i).forEach(e=>{s[e]=i[e]}),_.value=!1},x=async()=>{var e;await((e=v.value)==null?void 0:e.validate());const i={id:s.id,template:H.pick(s,["sms_notice","oa_notice","mnp_notice","system_notice"])};await P(i),Y.msgSuccess("操作成功"),V(),y.back()};return f.query.id&&k(),(i,e)=>{const D=F,u=L,r=S,b=T,R=U,g=j,B=z,C=G,I=$,q=M;return d(),c("div",null,[t(u,{class:"!border-none",shadow:"never"},{default:o(()=>[t(D,{content:"编辑通知设置",onBack:e[0]||(e[0]=n=>i.$router.back())})]),_:1}),X((d(),Z(B,{ref_key:"formRef",ref:v,model:a(s),"label-width":"120px",rules:E},{default:o(()=>[t(u,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[4]||(e[4]=l("div",{class:"font-medium mb-7"},"通知名称",-1)),t(r,{label:"通知名称"},{default:o(()=>[m(p(a(s).scene_name),1)]),_:1}),t(r,{label:"通知类型"},{default:o(()=>[m(p(a(s).type),1)]),_:1}),t(r,{label:"通知业务"},{default:o(()=>[m(p(a(s).scene_desc),1)]),_:1})]),_:1}),t(u,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[7]||(e[7]=l("div",{class:"font-medium mb-7"},"短信通知",-1)),t(r,{label:"开启状态",prop:"sms_notice.status",required:""},{default:o(()=>[t(R,{modelValue:a(s).sms_notice.status,"onUpdate:modelValue":e[1]||(e[1]=n=>a(s).sms_notice.status=n)},{default:o(()=>[t(b,{value:"0"},{default:o(()=>e[5]||(e[5]=[m("关闭")])),_:1}),t(b,{value:"1"},{default:o(()=>e[6]||(e[6]=[m("开启")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"模板ID",prop:"sms_notice.template_id"},{default:o(()=>[l("div",oe,[t(g,{modelValue:a(s).sms_notice.template_id,"onUpdate:modelValue":e[2]||(e[2]=n=>a(s).sms_notice.template_id=n),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),t(r,{label:"短信内容",prop:"sms_notice.content"},{default:o(()=>[l("div",se,[l("div",ae,[t(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(s).sms_notice.content,"onUpdate:modelValue":e[3]||(e[3]=n=>a(s).sms_notice.content=n)},null,8,["modelValue"])]),l("div",ne,[(d(!0),c(ee,null,te(a(s).sms_notice.tips,(n,N)=>(d(),c("div",{key:N},p(n),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[q,a(_)]]),t(I,null,{default:o(()=>[t(C,{type:"primary",onClick:x},{default:o(()=>e[8]||(e[8]=[m("保存")])),_:1})]),_:1})])}}});export{He as default};
