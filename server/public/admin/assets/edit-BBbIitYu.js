import{D as T,a as G,M as Y,C as $,B as j,N as J,g as O,h as Q,i as W,L as X}from"./element-plus-CW14IAqd.js";import{_ as Z}from"./picker-WiIIA2S8.js";import{g as h,s as ee}from"./pay-CCAzfvqV.js";import{u as le}from"./useLockFn-CLmIqRri.js";import{u as oe}from"./getExposeType-BTk_Jeu2.js";import{l as te,e as ie}from"./lodash-es-R-kYiKr_.js";import{d as ae,r as d,b as re,o as v,Y as ne,g as a,i as pe,c as V,f as o,z as l,_ as u,t as se,a as r,F as x,k as b,u as me}from"./@vue-CGao7vbS.js";import{_ as de}from"./@liripeng-tRfXSOOZ.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./index-Da-RjlL5.js";import"./index-Di-Xkxjj.js";import"./index.vue_vue_type_script_setup_true_lang-BSFOyzad.js";import"./index-BIwWuBYp.js";import"./index-DkCvA8ar.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";import"./index-BbB0tGsI.js";import"./index.vue_vue_type_script_setup_true_lang-VrWtSw6-.js";import"./usePaging-D9QJQ_HK.js";import"./vue3-video-play-D5LEBxxj.js";import"./vuedraggable-CNVEpOcE.js";import"./vue-DGROohPF.js";import"./sortablejs-DdgKbxid.js";const ue={class:"h-full flex flex-col","element-loading-text":"加载中...","element-loading-background":"var(--el-bg-color)"},fe={class:"flex-1"},_e={class:"flex-1"},ge={class:"flex-1"},ve=ae({__name:"edit",emits:["refresh"],setup(ye,{expose:w,emit:U}){const f=d(!1),y=oe(),C=d(),I=d("profile"),D=d(!1),c=d(!0),_=re(()=>{switch(t.value.pay_way){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";default:return""}}),k=d(),t=d({id:"",pay_way:0,name:"",icon:"",sort:0,remark:"",domain:"",config:{interface_version:"",merchant_type:"",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",mode:"",app_id:"",private_key:"",ali_public_key:""}}),E={name:[{required:!0,message:"请输入显示名称"}],"config.mch_id":[{required:!0,message:"请输入微信支付商户号"}],"config.pay_sign_key":[{required:!0,message:"请输入微信支付商户API密钥"}],"config.apiclient_cert":[{required:!0,message:"请输入微信支付证书"}],"config.apiclient_key":[{required:!0,message:"请输入微信支付证书密钥"}],"config.app_id":[{required:!0,message:"请输入支付宝应用ID"}],"config.private_key":[{required:!0,message:"请输入支付宝应用私钥"}],"config.ali_public_key":[{required:!0,message:"请输入支付宝公钥"}]},q=U,P=(p,e,m)=>{c.value=!0,I.value=m||"profile",D.value=e||!1,B(p),C.value=p,f.value=!0},B=async p=>{const e=await h({id:p});e.config||(e.config=t.value.config),c.value=!1,t.value=e,k.value=te(e)},F=p=>{ie(k.value,t.value)?p():G.confirm("修改还未保存，确认退出编辑吗？").then(()=>{p()}).catch(()=>{})},N=()=>{var p;(p=y.value)==null||p.resetFields()},R=async()=>{var p;await((p=y.value)==null?void 0:p.validate()),await ee(t.value),f.value=!1,q("refresh")},{isLock:A,lockFn:L}=le(R);return w({openHandle:P}),(p,e)=>{const m=Y,n=$,s=j,S=Z,g=J,M=O,z=Q,H=W,K=X;return v(),ne(H,{modelValue:l(f),"onUpdate:modelValue":e[14]||(e[14]=i=>me(f)?f.value=i:null),"destroy-on-close":"",title:`${l(_)}配置`,direction:"rtl",size:"50%",onClose:N,"before-close":F},{default:a(()=>[pe((v(),V("div",ue,[o(l(T),{ref_key:"formRef",ref:y,model:l(t),"label-width":"9rem",rules:E},{default:a(()=>[o(n,{label:"支付方式"},{default:a(()=>[o(m,{value:l(_),"model-value":l(_)},{default:a(()=>[u(se(l(_)),1)]),_:1},8,["value","model-value"])]),_:1}),o(n,{label:"显示名称",prop:"name"},{default:a(()=>[o(s,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=i=>l(t).name=i),placeholder:"请输入显示名称",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),o(n,{label:"图标",prop:"image"},{default:a(()=>[r("div",null,[o(S,{limit:1,disabled:!1,modelValue:l(t).icon,"onUpdate:modelValue":e[1]||(e[1]=i=>l(t).icon=i)},null,8,["modelValue"]),e[15]||(e[15]=r("div",{class:"form-tips"},"建议尺寸：200*200px",-1))])]),_:1}),l(t).pay_way==2?(v(),V(x,{key:0},[o(n,{prop:"config.interface_version",label:"微信支付接口版本"},{default:a(()=>[r("div",null,[o(g,{modelValue:l(t).config.interface_version,"onUpdate:modelValue":e[2]||(e[2]=i=>l(t).config.interface_version=i)},{default:a(()=>[o(m,{value:"v3"},{default:a(()=>e[16]||(e[16]=[u("V3")])),_:1})]),_:1},8,["modelValue"]),e[17]||(e[17]=r("div",{class:"form-tips"},"暂时只支持V3版本",-1))])]),_:1}),o(n,{label:"商户类型",prop:"config.merchant_type"},{default:a(()=>[r("div",null,[o(g,{modelValue:l(t).config.merchant_type,"onUpdate:modelValue":e[3]||(e[3]=i=>l(t).config.merchant_type=i)},{default:a(()=>[o(m,{value:"ordinary_merchant"},{default:a(()=>e[18]||(e[18]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[19]||(e[19]=r("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),o(n,{label:"微信支付商户号",prop:"config.mch_id"},{default:a(()=>[r("div",null,[o(s,{modelValue:l(t).config.mch_id,"onUpdate:modelValue":e[4]||(e[4]=i=>l(t).config.mch_id=i),placeholder:"请输入微信支付商户号",style:{"max-width":"250px"}},null,8,["modelValue"]),e[20]||(e[20]=r("div",{class:"form-tips"},"微信支付商户号（MCHID）",-1))])]),_:1}),o(n,{label:"商户API密钥",prop:"config.pay_sign_key"},{default:a(()=>[r("div",null,[o(s,{modelValue:l(t).config.pay_sign_key,"onUpdate:modelValue":e[5]||(e[5]=i=>l(t).config.pay_sign_key=i),placeholder:"请输入微信支付商户API密钥",style:{"max-width":"250px"}},null,8,["modelValue"]),e[21]||(e[21]=r("div",{class:"form-tips"},"微信支付商户API密钥（paySignKey）",-1))])]),_:1}),o(n,{label:"微信支付证书",prop:"config.apiclient_cert"},{default:a(()=>[r("div",null,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.apiclient_cert,"onUpdate:modelValue":e[6]||(e[6]=i=>l(t).config.apiclient_cert=i),placeholder:"请输入微信支付证书",style:{"max-width":"400px"}},null,8,["modelValue"]),e[22]||(e[22]=r("div",{class:"form-tips"}," 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ",-1))])]),_:1}),o(n,{label:"微信支付证书密钥",prop:"config.apiclient_key"},{default:a(()=>[r("div",null,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.apiclient_key,"onUpdate:modelValue":e[7]||(e[7]=i=>l(t).config.apiclient_key=i),placeholder:"请输入微信支付证书密钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[23]||(e[23]=r("div",{class:"form-tips"}," 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ",-1))])]),_:1}),o(n,{label:"支付授权目录"},{default:a(()=>e[24]||(e[24]=[r("div",null,[r("div",null,[r("span",{class:"mr-[20px]"},"https://前台手机域名地址/")])],-1)])),_:1})],64)):b("",!0),l(t).pay_way==3?(v(),V(x,{key:1},[o(n,{label:"模式",prop:"config.mode"},{default:a(()=>[r("div",null,[o(g,{modelValue:l(t).config.mode,"onUpdate:modelValue":e[8]||(e[8]=i=>l(t).config.mode=i)},{default:a(()=>[o(m,{value:"normal_mode"},{default:a(()=>e[25]||(e[25]=[u("普通模式")])),_:1})]),_:1},8,["modelValue"]),e[26]||(e[26]=r("div",{class:"form-tips"},"暂时仅支持支付宝普通模式",-1))])]),_:1}),o(n,{label:"商户类型",prop:"config.merchant_type"},{default:a(()=>[r("div",null,[o(g,{modelValue:l(t).config.merchant_type,"onUpdate:modelValue":e[9]||(e[9]=i=>l(t).config.merchant_type=i)},{default:a(()=>[o(m,{value:"ordinary_merchant"},{default:a(()=>e[27]||(e[27]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[28]||(e[28]=r("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),o(n,{label:"应用ID",prop:"config.app_id"},{default:a(()=>[r("div",fe,[o(s,{modelValue:l(t).config.app_id,"onUpdate:modelValue":e[10]||(e[10]=i=>l(t).config.app_id=i),placeholder:"请输入支付宝应用ID",style:{"max-width":"250px"}},null,8,["modelValue"]),e[29]||(e[29]=r("div",{class:"form-tips"},"支付宝应用APP_ID",-1))])]),_:1}),o(n,{label:"应用私钥",prop:"config.private_key"},{default:a(()=>[r("div",_e,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.private_key,"onUpdate:modelValue":e[11]||(e[11]=i=>l(t).config.private_key=i),placeholder:"请输入支付宝应用私钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[30]||(e[30]=r("div",{class:"form-tips"},"支付宝应用私钥（private_key）",-1))])]),_:1}),o(n,{label:"支付宝公钥",prop:"config.ali_public_key"},{default:a(()=>[r("div",ge,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.ali_public_key,"onUpdate:modelValue":e[12]||(e[12]=i=>l(t).config.ali_public_key=i),placeholder:"请输入支付宝公钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[31]||(e[31]=r("div",{class:"form-tips"},"支付宝公钥（alipayCertPublicKey）",-1))])]),_:1})],64)):b("",!0),o(n,{label:"排序",prop:"sort"},{default:a(()=>[r("div",null,[o(M,{modelValue:l(t).sort,"onUpdate:modelValue":e[13]||(e[13]=i=>l(t).sort=i),min:0,max:9999},null,8,["modelValue"]),e[32]||(e[32]=r("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1))])]),_:1}),o(n,null,{default:a(()=>[o(z,{type:"primary",loading:l(A),onClick:l(L)},{default:a(()=>e[33]||(e[33]=[u("保存")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])),[[K,l(c)]])]),_:1},8,["modelValue","title"])}}}),dl=de(ve,[["__scopeId","data-v-48883847"]]);export{dl as default};
