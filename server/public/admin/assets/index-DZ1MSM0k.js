import{h as M,J as S,O as F,K as G,I,L as J}from"./element-plus-CW14IAqd.js";import{M as u,f as K,b as P}from"./index-DkCvA8ar.js";import{e as Y,a as j}from"./menu-DEZllqeP.js";import{u as q}from"./usePaging-D9QJQ_HK.js";import{_ as H}from"./edit.vue_vue_type_script_setup_true_lang-BZ5pBJwZ.js";import{d as D,G as E,r as Q,an as W,o as l,c as _,f as n,g as s,a as x,_ as d,i as f,Y as p,z as r,k as y,t as X,y as T}from"./@vue-CGao7vbS.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./@liripeng-tRfXSOOZ.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";import"./picker.vue_vue_type_script_setup_true_lang-BqHWadx6.js";import"./index-Da-RjlL5.js";const Z={class:"menu-lists"},ee={key:0},te={key:1},oe={key:2},ie={class:"flex"},ae=D({name:"permission-menu"}),Je=D({...ae,setup(ne){const g=E(),m=E(),B=!1;let v=!1;const c=Q(!1),{pager:h,getLists:k}=q({fetchFun:j,params:{page_type:0}}),N=async i=>{var e,o;c.value=!0,await T(),i&&((e=m.value)==null||e.setFormData({pid:i})),(o=m.value)==null||o.open("add")},R=async i=>{var e,o;c.value=!0,await T(),(e=m.value)==null||e.open("edit"),(o=m.value)==null||o.getDetail(i)},$=async i=>{await K.confirm("确定要删除？"),await Y({id:i}),k()},L=()=>{v=!v,w(h.lists,v)},w=(i,e=!0)=>{var o;for(const a in i)(o=g.value)==null||o.toggleRowExpansion(i[a],e),i[a].children&&w(i[a].children,e)};return k(),(i,e)=>{const o=M,a=S,O=P,U=F,V=G,z=I,b=W("perms"),A=J;return l(),_("div",Z,[n(z,{class:"!border-none",shadow:"never"},{default:s(()=>[x("div",null,[n(o,{onClick:L},{default:s(()=>e[1]||(e[1]=[d(" 展开/折叠 ")])),_:1})]),f((l(),p(V,{ref_key:"tableRef",ref:g,class:"mt-4",size:"large",data:r(h).lists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:s(()=>[n(a,{label:"菜单名称",prop:"name","min-width":"150","show-overflow-tooltip":""}),n(a,{label:"类型",prop:"type","min-width":"80"},{default:s(({row:t})=>[t.type==r(u).CATALOGUE?(l(),_("div",ee,"目录")):t.type==r(u).MENU?(l(),_("div",te,"菜单")):t.type==r(u).BUTTON?(l(),_("div",oe,"按钮")):y("",!0)]),_:1}),n(a,{label:"图标",prop:"icon","min-width":"80"},{default:s(({row:t})=>[x("div",ie,[n(O,{name:t.icon,size:20},null,8,["name"])])]),_:1}),n(a,{label:"权限标识",prop:"perms","min-width":"150","show-overflow-tooltip":""}),n(a,{label:"状态",prop:"is_disable","min-width":"100"},{default:s(({row:t})=>[n(U,{type:t.is_disable==0?"primary":"danger"},{default:s(()=>[d(X(t.is_disable==0?"正常":"停用"),1)]),_:2},1032,["type"])]),_:1}),n(a,{label:"排序",prop:"sort","min-width":"100"}),n(a,{label:"更新时间",prop:"update_time","min-width":"180"}),r(B)?(l(),p(a,{key:0,label:"操作",width:"160",fixed:"right"},{default:s(({row:t})=>[t.type!==r(u).BUTTON?f((l(),p(o,{key:0,type:"primary",link:"",onClick:C=>N(t.id)},{default:s(()=>e[2]||(e[2]=[d(" 新增 ")])),_:2},1032,["onClick"])),[[b,["auth.menu/add"]]]):y("",!0),f((l(),p(o,{type:"primary",link:"",onClick:C=>R(t)},{default:s(()=>e[3]||(e[3]=[d(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["auth.menu/edit"]]]),f((l(),p(o,{type:"danger",link:"",onClick:C=>$(t.id)},{default:s(()=>e[4]||(e[4]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[b,["auth.menu/delete"]]])]),_:1})):y("",!0)]),_:1},8,["data"])),[[A,r(h).loading]])]),_:1}),r(c)?(l(),p(H,{key:0,ref_key:"editRef",ref:m,onSuccess:r(k),onClose:e[0]||(e[0]=t=>c.value=!1)},null,8,["onSuccess"])):y("",!0)])}}});export{Je as default};
