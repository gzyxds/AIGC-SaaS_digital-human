import{a as I,B as N,C as j,f as M,h as O,D as T,i as G,L as H}from"./element-plus-CW14IAqd.js";import{r as m}from"./index-DkCvA8ar.js";import{u as Y}from"./useLockFn-CLmIqRri.js";import{e as A,l as J}from"./lodash-es-R-kYiKr_.js";import{d as K,r as u,G as Q,o as V,Y as W,g as r,i as X,c as Z,f as o,l as $,z as l,_ as f,a as g,u as ee}from"./@vue-CGao7vbS.js";import{_ as le}from"./@liripeng-tRfXSOOZ.js";function ge(n){return m.get({url:"/power.powerPackage/lists",params:n})}function te(n){return m.get({url:"/power.powerPackage/detail",params:n})}function ce(n){return m.post({url:"/power.powerPackage/delete",params:n})}function oe(n){return m.post({url:"/power.powerPackage/add",params:n})}function ae(n){return m.post({url:"/power.powerPackage/edit",params:n})}const re={class:"h-full flex flex-col","element-loading-text":"加载中...","element-loading-background":"var(--el-bg-color)"},se=K({__name:"edit",emits:["refresh"],setup(n,{expose:b,emit:k}){const p=u(!1),c=Q(),y=u(!0),w=u(!1),v=u(),t=u({title:"",cost:"",power:"",status:1,original_cost:"",note:"",sort:0,gift:0,gift_power:""}),E={title:[{required:!0,message:"请输入套餐名称",trigger:["blur"]}],cost:[{required:!0,message:"请输入充值金额",trigger:["blur"]}],power:[{required:!0,message:"请输入算力数",trigger:["blur"]}]},_=u(""),P=k,U=async s=>{w.value=!0;const e=await te({id:s});t.value=e,v.value=J(e),w.value=!1},C=(s,e)=>{p.value=!0,_.value=s,s=="edit"&&e&&U(e)},D=s=>{A(v.value,t.value)?s():I.confirm("修改还未保存，确认退出编辑吗？").then(()=>{s()}).catch(()=>{})},B=()=>{var s;(s=c.value)==null||s.resetFields()},q=async()=>{var e;await((e=c.value)==null?void 0:e.validate()),await(_.value=="edit"?ae:oe)(t.value),p.value=!1,P("refresh")},{isLock:F,lockFn:R}=Y(q);return b({openHandle:C}),(s,e)=>{const d=N,i=j,x=M,S=O,h=T,z=G,L=H;return V(),W(z,{modelValue:l(p),"onUpdate:modelValue":e[9]||(e[9]=a=>ee(p)?p.value=a:null),"destroy-on-close":"",title:l(_)=="edit"?"编辑套餐":"新增套餐",direction:"rtl",size:"50%",onClose:B,"before-close":D},{default:r(()=>[X((V(),Z("div",re,[o(h,{ref_key:"formRef",ref:c,class:$(["profile grid grid-cols-2 gap-x-4 pt-2",{"!grid-cols-1":l(y)}]),"label-position":"right",model:l(t),"label-width":"100px",rules:E},{default:r(()=>[o(i,{label:"套餐名称",prop:"title"},{default:r(()=>[o(d,{modelValue:l(t).title,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).title=a),placeholder:"请输入套餐名称",style:{"max-width":"250px"},maxlength:100},null,8,["modelValue"])]),_:1}),o(i,{label:"套餐价格",prop:"cost"},{default:r(()=>[o(d,{modelValue:l(t).cost,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).cost=a),placeholder:"请输入套餐价格",style:{"max-width":"250px"},maxlength:100},{append:r(()=>e[10]||(e[10]=[f("元")])),_:1},8,["modelValue"])]),_:1}),o(i,{label:"原价",prop:"original_cost"},{default:r(()=>[o(d,{modelValue:l(t).original_cost,"onUpdate:modelValue":e[2]||(e[2]=a=>l(t).original_cost=a),placeholder:"请输入原价",style:{"max-width":"250px"},maxlength:100},null,8,["modelValue"])]),_:1}),o(i,{label:"套餐标签",prop:"note"},{default:r(()=>[o(d,{modelValue:l(t).note,"onUpdate:modelValue":e[3]||(e[3]=a=>l(t).note=a),placeholder:"请输入标签",style:{"max-width":"250px"},maxlength:100},null,8,["modelValue"])]),_:1}),o(i,{label:"排序",prop:"sort"},{default:r(()=>[g("div",null,[o(d,{modelValue:l(t).sort,"onUpdate:modelValue":e[4]||(e[4]=a=>l(t).sort=a),placeholder:"请输入",style:{"max-width":"250px"},maxlength:100},null,8,["modelValue"]),e[11]||(e[11]=g("div",{class:"form-tips"},"默认为0，排序值越大越排前面",-1))])]),_:1}),o(i,{label:"套餐状态",prop:"status"},{default:r(()=>[g("div",null,[o(x,{modelValue:l(t).status,"onUpdate:modelValue":e[5]||(e[5]=a=>l(t).status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"]),e[12]||(e[12]=g("div",{class:"form-tips"},"默认为开启",-1))])]),_:1}),o(i,{label:"算力数量",prop:"power"},{default:r(()=>[o(d,{modelValue:l(t).power,"onUpdate:modelValue":e[6]||(e[6]=a=>l(t).power=a),placeholder:"请输入算力数量",style:{"max-width":"250px"},maxlength:100},{append:r(()=>e[13]||(e[13]=[f("算力")])),_:1},8,["modelValue"])]),_:1}),o(i,{label:"开启赠送",prop:"gift"},{default:r(()=>[o(x,{modelValue:l(t).gift,"onUpdate:modelValue":e[7]||(e[7]=a=>l(t).gift=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),o(i,{label:"赠送数量",prop:"gift_power"},{default:r(()=>[o(d,{modelValue:l(t).gift_power,"onUpdate:modelValue":e[8]||(e[8]=a=>l(t).gift_power=a),placeholder:"请输入赠送数量",style:{"max-width":"250px"},maxlength:100},{append:r(()=>e[14]||(e[14]=[f("算力")])),_:1},8,["modelValue"])]),_:1}),o(i,null,{default:r(()=>[o(S,{type:"primary",loading:l(F),onClick:l(R)},{default:r(()=>e[15]||(e[15]=[f(" 保存 ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["class","model"])])),[[L,l(w)]])]),_:1},8,["modelValue","title"])}}}),ne=le(se,[["__scopeId","data-v-c3d6c35c"]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{ne as E,we as a,ce as d,ae as e,ge as g};
