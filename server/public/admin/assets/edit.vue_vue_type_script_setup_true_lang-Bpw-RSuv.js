import{B as x,C as h,f as K,D as I}from"./element-plus-CW14IAqd.js";import{r as n,f as E}from"./index-DkCvA8ar.js";import{P as R}from"./index-Da-RjlL5.js";import{d as A,G as _,r as v,o as B,c as C,f as l,g as d,z as o,a as y,_ as N}from"./@vue-CGao7vbS.js";function L(a){return n.get({url:"/key.keyPool/lists",params:a})}function S(a){return n.get({url:"/key.keyPool/detail",params:a})}function U(a){return n.post({url:"/key.keyPool/add",params:a})}function j(a){return n.post({url:"/key.keyPool/edit",params:a})}function O(a){return n.post({url:"/key.keyPool/del",params:a})}function H(a){return n.post({url:"/key.keyPool/status",params:a})}const q={class:"edit-popup"},J=A({__name:"edit",emits:["success"],setup(a,{expose:w,emit:g}){const P=g,k=_(),m=_(),f=v(""),e=v({id:"",type:"",key:"",remark:"",status:1}),V={key:[{required:!0,message:"请输入APIKey",trigger:["blur"]}]},b=async()=>{var s,t;try{await((s=k.value)==null?void 0:s.validate()),e.value.id==""?await U(e.value):e.value.id!=""&&await j(e.value),E.msgSuccess("操作成功"),P("success"),(t=m.value)==null||t.close()}catch(r){return r}};return w({open:async(s,t,r)=>{var u;if(t=="add")e.value={id:"",type:s,key:"",remark:"",status:1},f.value="新增密钥";else if(t=="edit"){const p=await S({id:r.id});Object.keys(p).map(c=>{e.value[c]=p[c]??""}),e.value.type=s,e.value.channel=1,f.value="编辑密钥"}(u=m.value)==null||u.open()}}),(s,t)=>{const r=x,u=h,p=K,c=I;return B(),C("div",q,[l(R,{ref_key:"popupRef",ref:m,title:o(f),async:!0,width:"550px",onConfirm:b},{default:d(()=>[l(c,{class:"ls-form",ref_key:"formRef",ref:k,rules:V,model:o(e),"label-width":"120px"},{default:d(()=>[l(u,{label:"APIKey",prop:"key"},{default:d(()=>[y("div",null,[l(r,{class:"w-[330px]",modelValue:o(e).key,"onUpdate:modelValue":t[0]||(t[0]=i=>o(e).key=i),placeholder:"请输入APIKey",clearable:""},null,8,["modelValue"]),t[3]||(t[3]=y("div",{class:"form-tips"},[N(" 创客APIKey "),y("a",{href:"https://api.hihookeji.com",target:"_blank",rel:"",class:"text-primary"}," 申请入口")],-1))])]),_:1}),l(u,{label:"备注"},{default:d(()=>[l(r,{class:"w-[330px]",type:"textarea",rows:4,modelValue:o(e).remark,"onUpdate:modelValue":t[1]||(t[1]=i=>o(e).remark=i),placeholder:"请输入备注内容",clearable:""},null,8,["modelValue"])]),_:1}),l(u,{label:"状态"},{default:d(()=>[l(p,{modelValue:o(e).status,"onUpdate:modelValue":t[2]||(t[2]=i=>o(e).status=i),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{J as _,H as c,O as d,L as g};
