import{_ as U}from"./index-Df1qeOtf.js";import{F,a0 as S,C as W,M as q,N as G,f as I,I as L,D as j,h as z}from"./element-plus-CW14IAqd.js";import{g as M,s as P}from"./user-B7gZ_XRe.js";import{d as c,r as T,a0 as w,an as Y,o as u,c as A,f as a,g as o,a as i,z as t,_ as n,Y as _,k as v,t as V,i as H}from"./@vue-CGao7vbS.js";import"./@liripeng-tRfXSOOZ.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-b4noGO9g.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./index-DkCvA8ar.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-akAgejHM.js";import"./pinia-C8SLiYOc.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-CuqWKaqQ.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-l-30Ih9A.js";const J={class:"login-register"},K={class:"mt-1 ml-2"},O={class:"mt-1 ml-2"},Q=c({name:"loginRegister"}),Fe=c({...Q,setup(X){const p=T(),l=w({register_way:[],login_way:[],default_login_way:1,register_sms_verify:0,login_agreement:0,third_auth:1}),k=w({loginWay:[{required:!0,validator:(s,e,d)=>{if(l.login_way.join("").length===0)d(new Error("登录方式至少选择一项！"));else{if(l.login_way!==""){if(!p.value)return;p.value.validateField("checkPass",()=>{})}d()}},trigger:"change"}]}),y=async()=>{try{const s=await M();for(const e in l)l[e]=s[e]}catch(s){console.log("获取=>",s)}},E=async()=>{var s;await((s=p.value)==null?void 0:s.validate());try{await P(l),y()}catch(e){console.log("保存=>",e)}};return y(),(s,e)=>{const d=F,f=S,m=W,g=q,x=G,b=I,C=L,D=j,R=z,B=U,N=Y("perms");return u(),A("div",J,[a(D,{ref_key:"formRef",ref:p,rules:t(k),model:t(l),"label-width":"120px"},{default:o(()=>[a(C,{shadow:"never",class:"!border-none"},{default:o(()=>[e[18]||(e[18]=i("div",{class:"font-medium mb-7"},"通用设置",-1)),a(m,{label:"注册方式",prop:"register_way"},{default:o(()=>[i("div",null,[a(f,{modelValue:t(l).register_way,"onUpdate:modelValue":e[0]||(e[0]=r=>t(l).register_way=r)},{default:o(()=>[a(d,{label:"2",value:"2"},{default:o(()=>e[5]||(e[5]=[n("手机号注册")])),_:1}),a(d,{label:"3",value:"3"},{default:o(()=>e[6]||(e[6]=[n("账号密码注册")])),_:1})]),_:1},8,["modelValue"]),e[7]||(e[7]=i("div",{class:"form-tips"},"可以不勾选，不勾选前台就不显示",-1))])]),_:1}),a(m,{label:"登录方式",prop:"login_way"},{default:o(()=>[i("div",null,[a(f,{modelValue:t(l).login_way,"onUpdate:modelValue":e[1]||(e[1]=r=>t(l).login_way=r)},{default:o(()=>[a(d,{label:"1",disabled:t(l).default_login_way==1},{default:o(()=>e[8]||(e[8]=[n("微信登录")])),_:1},8,["disabled"]),a(d,{label:"2",disabled:t(l).default_login_way==2},{default:o(()=>e[9]||(e[9]=[n("手机号登录")])),_:1},8,["disabled"]),a(d,{label:"3",disabled:t(l).default_login_way==3},{default:o(()=>e[10]||(e[10]=[n("账号密码登录")])),_:1},8,["disabled"])]),_:1},8,["modelValue"]),e[11]||(e[11]=i("div",{class:"form-tips"},"必须选择其中一种登录方式，不勾选前台就不显示",-1))])]),_:1}),a(m,{label:"默认登录方式",class:"is-required"},{default:o(()=>[i("div",null,[a(x,{modelValue:t(l).default_login_way,"onUpdate:modelValue":e[2]||(e[2]=r=>t(l).default_login_way=r)},{default:o(()=>[t(l).login_way.includes("1")?(u(),_(g,{key:0,label:1},{default:o(()=>e[12]||(e[12]=[n(" 微信登录 ")])),_:1})):v("",!0),t(l).login_way.includes("2")?(u(),_(g,{key:1,label:2},{default:o(()=>e[13]||(e[13]=[n(" 手机号码登录 ")])),_:1})):v("",!0),t(l).login_way.includes("3")?(u(),_(g,{key:2,label:3},{default:o(()=>e[14]||(e[14]=[n(" 账号密码登录 ")])),_:1})):v("",!0)]),_:1},8,["modelValue"]),e[15]||(e[15]=i("div",{class:"form-tips"},"设置在前台的默认登录方式",-1))])]),_:1}),a(m,{label:"强制绑定手机号",prop:"coerce_mobile"},{default:o(()=>[i("div",null,[a(b,{modelValue:t(l).coerce_mobile,"onUpdate:modelValue":e[3]||(e[3]=r=>t(l).coerce_mobile=r),"active-value":1,"inactive-value":0},null,8,["modelValue"]),i("span",K,V(t(l).coerce_mobile?"开启":"关闭"),1),e[16]||(e[16]=i("div",{class:"form-tips"},[i("div",null,"1、使用微信/账号密码注册方式注册登录时，要先绑定手机号"),i("div",null,"2、如果开启，则新用户在注册完成之后要强制绑定手机号"),i("div",null,"3、老用户登录时如果检测到没有绑定手机，则要重新绑定手机号")],-1))])]),_:1}),a(m,{label:"政策协议",prop:"login_agreement"},{default:o(()=>[i("div",null,[a(b,{modelValue:t(l).login_agreement,"onUpdate:modelValue":e[4]||(e[4]=r=>t(l).login_agreement=r),"active-value":1,"inactive-value":0},null,8,["modelValue"]),i("span",O,V(t(l).login_agreement?"开启":"关闭"),1),e[17]||(e[17]=i("div",{class:"form-tips"},"用户登录/注册时，是否显示用户协议和隐私政策",-1))])]),_:1})]),_:1})]),_:1},8,["rules","model"]),H((u(),_(B,null,{default:o(()=>[a(R,{type:"primary",onClick:E},{default:o(()=>e[19]||(e[19]=[n("保存")])),_:1})]),_:1})),[[N,["setting.user/setRegisterConfig"]]])])}}});export{Fe as default};
