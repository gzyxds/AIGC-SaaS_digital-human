import{f as q,u as G,g as R,r as b,h as z,i as E,j as F,o as c,c as d,a as o,b as t,w as u,k as _,l as N,F as A,m as B,t as y,n as j,p as H,q as M,s as P,v as C,x as J}from"./iBiA3qHo.js";import{_ as K}from"./Bwni-v1o.js";import{_ as Q}from"./D81t8MNF.js";import{_ as W,a as X}from"./ZJNN5Mea.js";import{a as Y,b as Z}from"./K9Zjon9a.js";import"./Cb4KlQxU.js";const I={class:"flex size-full overflow-hidden bg-background"},tt={class:"fixed bottom-1/2 left-0 md:hidden"},et={class:"relative flex h-full w-52 flex-col border-r border-border/40 bg-background-soft py-6"},st={class:"absolute -right-7 bottom-1/2 md:hidden"},ot={class:"flex-1 overflow-hidden"},lt={class:"truncate"},at={key:0,class:"h-full space-y-3"},nt={key:1,class:"flex flex-col gap-3"},it=["onClick"],rt={class:"mt-auto px-4 py-2"},ct={class:"h-full w-0 overflow-x-hidden border-r border-border/40 bg-background-soft transition-[width] md:w-44 lg:w-52"},dt={class:"gap-4py-6 flex h-full w-full min-w-44 flex-col"},ut={class:"flex-1 overflow-hidden"},_t={class:"truncate"},pt={key:0,class:"h-full space-y-3"},ft={key:1,class:"flex flex-col gap-3"},mt=["onClick"],ht={class:"mt-auto px-4 py-2"},vt={id:"__read_area__",class:"flex-1 overflow-y-auto"},xt={class:"mx-auto flex w-full flex-col gap-4 p-6 md:max-w-prose"},yt={key:0,class:"space-y-4"},gt={class:"!mt-8 space-y-6"},wt={key:1,class:"space-y-4"},bt={class:"text-2xl font-medium"},kt={class:"text-xs text-foreground/60"},Ct={class:"prose dark:prose-invert"},Dt=q({__name:"index",setup(Ut){G({title:"政策协议"});const L=R(),h=b(!1),f=b(null),U=b(!0),k=b(!0),{getList:$}=Y(),g=b([{id:"agreement",label:"政策协议",defaultOpen:!0,list:[]},{id:"help",label:"帮助中心",defaultOpen:!0,list:[]},{id:"disclaimer",label:"免责声明",defaultOpen:!0,list:[]}]),v=async(l,e)=>{var s;if(k.value=!0,f.value=e,l==="help"){const m=await Z({id:e.type});f.value&&(f.value.content=m.content)}await H(),(s=document.getElementById("__read_area__"))==null||s.scrollTo({top:0,behavior:"smooth"}),k.value=!1};return z(async()=>{const l=g.value.find(a=>a.id==="agreement"),e=g.value.find(a=>a.id==="help"),s=g.value.find(a=>a.id==="disclaimer"),m=L.query.type,r=L.query.item;if(l&&s){const a=await E();l.list=a.filter(p=>p.type!=="disclaimer"),m||(f.value=l.list[0]),s&&(s.list=a.filter(p=>p.type==="disclaimer"))}if(e){const p=(await $()).lists.map(x=>({title:x.title,type:String(x.id),content:"",update_time:x.update_time}));e.list=p}if(m)switch(m){case"agreement":if(l)if(r){const a=l==null?void 0:l.list.find(p=>p.type===r);a&&v("agreement",a)}else l!=null&&l.list[0]&&v("agreement",l==null?void 0:l.list[0]);break;case"help":e!=null&&e.list[0]&&v("help",e==null?void 0:e.list[0]);break;case"disclaimer":s!=null&&s.list[0]&&v("disclaimer",s==null?void 0:s.list[0]);break}U.value=!1,k.value=!1}),(l,e)=>{var S,T,V;const s=M,m=J,r=P,a=K,p=Q,x=W,D=X,O=F("dompurify-html");return c(),d("div",I,[o("div",tt,[t(s,{icon:"tabler:list",ui:{rounded:"rounded-s-none"},onClick:e[0]||(e[0]=n=>h.value=!0)})]),t(D,{modelValue:_(h),"onUpdate:modelValue":e[2]||(e[2]=n=>N(h)?h.value=n:null),side:"left",ui:{base:"!w-fit flex-0 max-w-fit"}},{default:u(()=>[o("div",et,[o("div",st,[t(s,{icon:"tabler:text-wrap",ui:{rounded:"rounded-s-none"},onClick:e[1]||(e[1]=n=>h.value=!1)})]),o("div",ot,[t(p,{class:"px-4"},{default:u(()=>[t(a,{items:_(g),multiple:""},{default:u(({item:n,open:i})=>[t(s,{color:"gray",variant:"ghost",ui:{padding:{sm:"p-3"}}},{trailing:u(()=>[t(m,{name:"tabler:chevron-right",class:C(["ms-auto h-4 w-4 transform transition-transform duration-200",[i&&"rotate-90"]])},null,8,["class"])]),default:u(()=>[o("span",lt,y(n.label),1)]),_:2},1024)]),item:u(({item:n})=>[_(U)?(c(),d("div",at,[t(r,{class:"h-6 w-full"}),t(r,{class:"h-6 w-full"}),t(r,{class:"h-6 w-full"})])):(c(),d("div",nt,[(c(!0),d(A,null,B(n.list,i=>{var w;return c(),d("div",{key:i.type,class:C(["cursor-pointer truncate pl-6 pr-3 hover:text-foreground active:text-primary",{"text-primary hover:!text-primary":i.type===((w=_(f))==null?void 0:w.type)}]),onClick:()=>{v(n.id,i),h.value=!1}},y(i.title),11,it)}),128))]))]),_:1},8,["items"])]),_:1})]),o("div",rt,[t(x)])])]),_:1},8,["modelValue"]),o("div",ct,[o("div",dt,[o("div",ut,[t(p,{class:"px-4"},{default:u(()=>[t(a,{items:_(g),multiple:""},{default:u(({item:n,open:i})=>[t(s,{color:"gray",variant:"ghost",ui:{padding:{sm:"p-3"}}},{trailing:u(()=>[t(m,{name:"tabler:chevron-right",class:C(["ms-auto h-4 w-4 transform transition-transform duration-200",[i&&"rotate-90"]])},null,8,["class"])]),default:u(()=>[o("span",_t,y(n.label),1)]),_:2},1024)]),item:u(({item:n})=>[_(U)?(c(),d("div",pt,[t(r,{class:"h-6 w-full"}),t(r,{class:"h-6 w-full"}),t(r,{class:"h-6 w-full"})])):(c(),d("div",ft,[(c(!0),d(A,null,B(n.list,i=>{var w;return c(),d("div",{key:i.type,class:C(["cursor-pointer truncate pl-6 pr-3 hover:text-foreground active:text-primary",{"text-primary hover:!text-primary":i.type===((w=_(f))==null?void 0:w.type)}]),onClick:At=>v(n.id,i)},y(i.title),11,mt)}),128))]))]),_:1},8,["items"])]),_:1})]),o("div",ht,[t(x)])])]),o("div",vt,[o("div",xt,[_(k)?(c(),d("div",yt,[t(r,{class:"h-6 w-[250px]"}),t(r,{class:"h-4 w-[200px]"}),o("div",gt,[(c(),d(A,null,B(15,n=>t(r,{key:n,class:"h-4 w-full"})),64))])])):(c(),d("div",wt,[o("h1",bt,y((S=_(f))==null?void 0:S.title),1),o("p",kt," 更新时间："+y(((T=_(f))==null?void 0:T.update_time)||"--"),1),j(o("div",Ct,null,512),[[O,(V=_(f))==null?void 0:V.content]])]))])])])}}});export{Dt as default};
