import{G as W,H as R,_ as H,f as J,J as X,K as Y,ah as Z,L as v,M as F,N as $,o as p,c as g,n as ee,bG as ae,a as n,P as te,v as z,b3 as re,r as b,k as s,B as P,O as le,b as c,w as U,t as E,a5 as G,l as L,a6 as se,p as I,at as ne,x as oe,bH as ue}from"./iBiA3qHo.js";import{_ as ie}from"./jEpb_vT2.js";import{_ as de}from"./Cb4KlQxU.js";const me={wrapper:"relative w-full flex items-center",base:"w-full absolute appearance-none cursor-pointer disabled:cursor-not-allowed disabled:bg-opacity-50 focus:outline-none peer group",rounded:"rounded-lg",background:"bg-transparent",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",progress:{base:"absolute pointer-events-none peer-disabled:bg-opacity-50",rounded:"rounded-s-lg",background:"bg-{color}-500 dark:bg-{color}-400",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"}},thumb:{base:"[&::-webkit-slider-thumb]:relative [&::-moz-range-thumb]:relative [&::-webkit-slider-thumb]:z-[1] [&::-moz-range-thumb]:z-[1] [&::-webkit-slider-thumb]:appearance-none [&::-moz-range-thumb]:appearance-none [&::-webkit-slider-thumb]:rounded-full [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:dark:bg-gray-900 [&::-moz-range-thumb]:bg-current",ring:"[&::-webkit-slider-thumb]:ring-2 [&::-webkit-slider-thumb]:ring-current",size:{"2xs":"[&::-webkit-slider-thumb]:h-1.5 [&::-moz-range-thumb]:h-1.5 [&::-webkit-slider-thumb]:w-1.5 [&::-moz-range-thumb]:w-1.5 [&::-webkit-slider-thumb]:mt-[-2.5px] [&::-moz-range-thumb]:mt-[-2.5px]",xs:"[&::-webkit-slider-thumb]:h-2 [&::-moz-range-thumb]:h-2 [&::-webkit-slider-thumb]:w-2 [&::-moz-range-thumb]:w-2 [&::-webkit-slider-thumb]:mt-[-3px] [&::-moz-range-thumb]:mt-[-3px]",sm:"[&::-webkit-slider-thumb]:h-3 [&::-moz-range-thumb]:h-3 [&::-webkit-slider-thumb]:w-3 [&::-moz-range-thumb]:w-3 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",md:"[&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-moz-range-thumb]:w-4 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",lg:"[&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-moz-range-thumb]:w-5 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1",xl:"[&::-webkit-slider-thumb]:h-6 [&::-moz-range-thumb]:h-6 [&::-webkit-slider-thumb]:w-6 [&::-moz-range-thumb]:w-6 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1","2xl":"[&::-webkit-slider-thumb]:h-7 [&::-moz-range-thumb]:h-7 [&::-webkit-slider-thumb]:w-7 [&::-moz-range-thumb]:w-7 [&::-webkit-slider-thumb]:-mt-1 [&::-moz-range-thumb]:-mt-1"}},track:{base:"[&::-webkit-slider-runnable-track]:group-disabled:bg-opacity-50 [&::-moz-range-track]:group-disabled:bg-opacity-50",background:"[&::-webkit-slider-runnable-track]:bg-gray-200 [&::-moz-range-track]:bg-gray-200 [&::-webkit-slider-runnable-track]:dark:bg-gray-700 [&::-moz-range-track]:dark:bg-gray-700",rounded:"[&::-webkit-slider-runnable-track]:rounded-lg [&::-moz-range-track]:rounded-lg",size:{"2xs":"[&::-webkit-slider-runnable-track]:h-px [&::-moz-range-track]:h-px",xs:"[&::-webkit-slider-runnable-track]:h-0.5 [&::-moz-range-track]:h-0.5",sm:"[&::-webkit-slider-runnable-track]:h-1 [&::-moz-range-track]:h-1",md:"[&::-webkit-slider-runnable-track]:h-2 [&::-moz-range-track]:h-2",lg:"[&::-webkit-slider-runnable-track]:h-3 [&::-moz-range-track]:h-3",xl:"[&::-webkit-slider-runnable-track]:h-4 [&::-moz-range-track]:h-4","2xl":"[&::-webkit-slider-runnable-track]:h-5 [&::-moz-range-track]:h-5"}},size:{"2xs":"h-1.5",xs:"h-2",sm:"h-3",md:"h-4",lg:"h-5",xl:"h-6","2xl":"h-7"},default:{size:"md",color:"primary"}},A=W(R.ui.strategy,R.ui.range,me),be=J({inheritAttrs:!1,props:{modelValue:{type:Number,default:0},id:{type:String,default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},size:{type:String,default:null,validator(e){return Object.keys(A.size).includes(e)}},color:{type:String,default:()=>A.default.color,validator(e){return R.ui.colors.includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:o}){const{ui:a,attrs:k}=X("range",Y(e,"ui"),A),{emitFormChange:f,inputId:u,color:l,size:r,name:w}=Z(e,A),i=v({get(){return e.modelValue},set(d){o("update:modelValue",d)}}),h=d=>{o("change",d.target.value),f()},y=v(()=>F($(a.value.wrapper,a.value.size[r.value]),e.class)),x=v(()=>F($(a.value.base,a.value.background,a.value.rounded,l.value&&a.value.ring.replaceAll("{color}",l.value),a.value.size[r.value]),e.inputClass)),N=v(()=>$(a.value.thumb.base,l.value&&a.value.thumb.color.replaceAll("{color}",l.value),a.value.thumb.ring,a.value.thumb.background,a.value.thumb.size[r.value])),T=v(()=>$(a.value.track.base,a.value.track.background,a.value.track.rounded,a.value.track.size[r.value])),M=v(()=>$(a.value.progress.base,a.value.progress.rounded,l.value&&a.value.progress.background.replaceAll("{color}",l.value),a.value.progress.size[r.value])),_=v(()=>{const{modelValue:d,min:C,max:S}=e;return{width:`${(Math.max(C,Math.min(d,S))-C)/(S-C)*100}%`}});return{ui:a,attrs:k,name:w,inputId:u,value:i,wrapperClass:y,inputClass:x,thumbClass:N,trackClass:T,progressClass:M,progressStyle:_,onChange:h}}}),ce=["id","name","min","max","disabled","step"];function pe(e,o,a,k,f,u){return p(),g("div",{class:z(e.wrapperClass)},[ee(n("input",te({id:e.inputId,ref:"input","onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),name:e.name,min:e.min,max:e.max,disabled:e.disabled,step:e.step,type:"range",class:[e.inputClass,e.thumbClass,e.trackClass]},e.attrs,{onChange:o[1]||(o[1]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,ce),[[ae,e.value,void 0,{number:!0}]]),n("span",{class:z(e.progressClass),style:re(e.progressStyle)},null,6)],2)}const ge=H(be,[["render",pe]]),he={key:0},ve=["src"],ke=["src"],fe={class:"flex items-center justify-between"},we={class:"flex items-center gap-1"},ze={class:"flex items-center"},ye={class:"translate-y-[2px] cursor-pointer rounded-full p-1 center hover:bg-gray-600/5"},xe={class:"flex w-48 items-center gap-2 p-4"},_e={class:"min-w-7 text-xs"},Ce={class:"pb-1 pl-1.5"},Se=J({__name:"audio-player",props:{src:{default:""},size:{default:"sm"},hidden:{type:Boolean,default:!1},download:{type:Boolean,default:!0}},emits:["getDuration","onProgress","onEnded"],setup(e,{emit:o}){const a=e,k=o,f=b(!0),u=b(a.src),l=b(0),r=b(null),w=b(0),i=b(0),h=b(1),y=b(!1),x={xs:16,sm:18,md:20,lg:22,xl:24,"2xl":26},N={xs:"text-xs",sm:"text-sm",md:"text-md",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"},T={xs:"xs",sm:"xs",md:"sm",lg:"md",xl:"lg","2xl":"xl"},M=async t=>(t&&(u.value=t||a.src,await I()),{0:()=>{r.value&&(r.value.play(),l.value=1)},1:()=>{r.value&&(a.hidden?_():(r.value.pause(),l.value=0))},2:()=>{r.value&&(r.value.play(),l.value=1)}}[l.value]()),_=async()=>{var t;a.hidden?((t=r.value)==null||t.pause(),l.value=0,f.value=!1,await I(()=>f.value=!0)):l.value=2,k("onEnded")},d=()=>{r.value&&!y.value&&(i.value=r.value.currentTime,k("onProgress",r.value.currentTime))},C=async t=>{await I(),r.value&&(t?(i.value=Number(t),r.value.currentTime=Number(t)):r.value.currentTime=i.value,y.value=!1)},S=()=>{r.value&&(w.value=r.value.duration,k("getDuration",w.value))},D=t=>{r.value&&(r.value.volume=h.value)},O=async()=>{await ne({src:u.value})};return(t,m)=>{const B=oe,K=ue,j=ge,q=ie,Q=de;return t.$slots.default?(p(),g("div",he,[s(u)&&s(f)?(p(),g("audio",{key:0,ref_key:"audioRef",ref:r,src:s(u),onTimeupdate:d,onLoadedmetadata:S,onEnded:_},null,40,ve)):P("",!0),le(t.$slots,"default",{status:s(l),play:M},void 0,!0)])):(p(),g("div",{key:1,class:z(["flex w-full min-w-40 flex-col gap-2",{"pointer-events-none absolute -z-50 h-0 w-0 overflow-hidden opacity-0":t.hidden}])},[c(Q,null,{default:U(()=>[s(u)?(p(),g("audio",{key:0,ref_key:"audioRef",ref:r,src:s(u),onTimeupdate:d,onLoadedmetadata:S,onEnded:_},null,40,ke)):P("",!0),n("div",fe,[n("div",we,[c(K,{text:["播放","暂停","重播"][s(l)]},{default:U(()=>[n("div",{class:z(["cursor-pointer rounded-full bg-primary/5 p-1 center hover:bg-primary/10",{"music-player !bg-primary text-white":s(l)===1}]),onClick:m[0]||(m[0]=V=>M())},[c(B,{class:"cursor-pointer",name:["tabler:player-play","tabler:player-pause","tabler:reload"][s(l)],size:x[t.size]},null,8,["name","size"])],2)]),_:1},8,["text"]),t.src?(p(),g("div",{key:0,class:z(["ml-2 whitespace-nowrap",N[t.size]])},E(("formatSecond"in t?t.formatSecond:s(G))(s(i)))+" / "+E(("formatSecond"in t?t.formatSecond:s(G))(s(w))),3)):(p(),g("div",{key:1,class:z(["ml-2 whitespace-nowrap text-red-500",N[t.size]])}," 暂无音源 ",2))]),n("div",ze,[t.download?(p(),g("a",{key:0,class:"cursor-pointer rounded-full p-1 center hover:bg-gray-600/5",onClick:O},[c(B,{name:"tabler:cloud-download",size:x[t.size]},null,8,["size"])])):P("",!0),c(q,{mode:"hover","close-delay":200,popper:{placement:"bottom-end"}},{panel:U(()=>[n("div",xe,[c(j,{modelValue:s(h),"onUpdate:modelValue":m[1]||(m[1]=V=>L(h)?h.value=V:null),size:T[t.size],max:1,step:.01,onChange:D},null,8,["modelValue","size"]),n("span",_e,E(`${s(se).times(s(h),100)}%`),1)])]),default:U(()=>[n("div",ye,[c(B,{name:"tabler:volume",size:x[t.size]},null,8,["size"])])]),_:1})])]),n("div",Ce,[c(j,{modelValue:s(i),"onUpdate:modelValue":m[2]||(m[2]=V=>L(i)?i.value=V:null),size:T[t.size],max:s(w),step:.001,onChange:C,onInput:m[3]||(m[3]=V=>y.value=!0)},null,8,["modelValue","size","max"])])]),_:1})],2))}}}),Te=H(Se,[["__scopeId","data-v-58824306"]]);export{Te as _,ge as a};
