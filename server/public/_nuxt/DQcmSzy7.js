import{f as y,r as d,L as _,h as v,bm as h,o as u,c,O as s,v as k,k as o,B as r,a as f,b as C,w as M,d as B,t as b,q as w}from"./iBiA3qHo.js";const x={id:"__pro-list__",class:"relative"},H={class:"py-2 center"},T=y({__name:"load-list",props:{loadMore:{type:Function,default:()=>Promise.resolve()},loadMoreText:{default:"加载更多"},auto:{type:Boolean,default:!1},tiggerHeight:{default:50},state:{}},setup(p){const a=p,t=d(!1),l=d(null),g=_(()=>`h-[${a.tiggerHeight}px]`),n=async()=>{try{t.value=!0,await a.loadMore(),t.value=!1}catch(e){console.error(e),t.value=!1}};return v(()=>{a.auto&&h(l,async([{isIntersecting:e}])=>{e&&n()},{threshold:.01})}),(e,i)=>{const m=w;return u(),c("div",x,[s(e.$slots,"default"),e.auto&&!e.state.isCompleted?(u(),c("div",{key:0,ref_key:"loadMoreTrigger",ref:l,class:k(["absolute bottom-0 left-0 z-10 w-full",o(g)])},null,2)):r("",!0),!e.auto&&!e.state.isCompleted?s(e.$slots,"tigger",{key:1},()=>[f("div",H,[C(m,{variant:o(t)?"ghost":"soft",color:o(t)?"gray":"primary",size:"xs",loading:o(t),onClick:n},{default:M(()=>[B(b(o(t)?"正在加载":"加载更多"),1)]),_:1},8,["variant","color","loading"])])]):r("",!0),e.state.isCompleted?s(e.$slots,"loaded",{key:2},()=>[i[0]||(i[0]=f("p",{class:"py-6 text-center text-xs text-foreground/70"},"没有更多了",-1))]):r("",!0)])}}});export{T as _};
