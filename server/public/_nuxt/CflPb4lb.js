import{_ as v}from"./DluhCU7w.js";import{s as P,D as $,_ as V}from"./C64RprHz.js";import{a as C,_ as N}from"./DU3fwEm4.js";import{f as D,ao as U,u as z,r as B,bu as p,h as R,$ as q,o as A,A as L,w as i,a as t,b as a,k as o,l as f,v as g,t as n,x as M}from"./iBiA3qHo.js";import{_ as S}from"./BRU1X883.js";import"./DPda_AxG.js";import"./B37HoT1E.js";import"./jEpb_vT2.js";import"./DH1JQC-z.js";import"./CvT1NeAR.js";import"./D81t8MNF.js";const j={class:"mb-4 flex gap-4"},E={class:"hidden flex-1 flex-col overflow-y-auto md:flex"},F={class:"py-12 center"},G={class:"md:hidden"},H={class:"flex flex-col gap-2 rounded-lg bg-background-soft p-4"},I={class:"text-xs text-foreground/50"},T={class:"flex items-center justify-between"},J={class:"text-sm"},K={class:"flex items-center gap-1 text-xs text-foreground/50"},re=D({__name:"power-flow",setup(O){U(),z({title:"账单明细"});const _=B({start:P(new Date,{days:14}),end:new Date}),{getList:u,list:x,state:r,refresh:b}=p(),h=[{key:"remark",label:"流水号"},{key:"change_amount",label:"变动数量",sortable:!0,class:"min-w-28",sort:(m,s,d)=>{if(!m||!s)return 0;const l=Number(m.replace(/[,$]/g,"")),c=Number(s.replace(/[,$]/g,""));return d==="asc"?l-c:c-l}},{key:"type_desc",label:"变动类型"},{key:"create_time",label:"变动时间"}];return R(()=>{q()||u()}),(m,s)=>{const d=v,l=V,c=C,y=M,k=N,w=S;return A(),L(w,{scroll:!0,breadcrumb:"账单明细",rounded:!1,background:!0},{default:i(()=>[t("div",j,[a($,{modelValue:o(_),"onUpdate:modelValue":s[0]||(s[0]=e=>f(_)?_.value=e:null),onChange:s[1]||(s[1]=e=>o(b)({newParams:{start_time:e.start_time,end_time:e.end_time}}))},null,8,["modelValue"])]),t("div",E,[a(l,{class:"flex-1 overflow-y-auto",rows:o(x),columns:h,loading:o(r).pedding,ui:{thead:"sticky top-0 bg-background"}},{"change_amount-data":i(({row:e})=>[t("span",{class:g(e.action===1?"text-green-500":"text-red-500")},n(`${e.action===1?"+":"-"}${Number(e.change_amount)}`),3)]),"empty-state":i(()=>[t("div",F,[a(d,{type:"empty",text:"空空如也",size:100})])]),_:1},8,["rows","loading"]),a(c,{modelValue:o(r),"onUpdate:modelValue":s[2]||(s[2]=e=>f(r)?r.value=e:null),class:"mt-4",onChange:o(u)},null,8,["modelValue","onChange"])]),t("div",G,[a(k,{"request-instance":o(p),scroll:!0,class:"flex flex-col gap-4"},{default:i(({item:e})=>[t("div",H,[t("p",I,n(e.remark),1),t("div",T,[t("span",J,n(e.type_desc),1),t("span",{class:g(["text-lg",e.action===1?"text-green-500":"text-red-500"])},n(`${e.action===1?"+":"-"}${Number(e.change_amount)}`),3)]),t("p",K,[a(y,{name:"tabler:clock-hour-9",size:"12"}),t("span",null,n(e.create_time),1)])])]),_:1},8,["request-instance"])])]),_:1})}}});export{re as default};
