import{G as _t,H as Fe,_ as tt,f as st,x as ze,I as nt,q as Xe,J as ct,K as ft,L as at,M as Ze,N as ut,o as J1,c as _e,a as T1,O as ke,A as ye,v as ue,B as le,P as Be,d as ie,t as xe,F as Qe,m as Je,Q as De,R as ht,r as de,S as oe,T as rt,U as ve,u as pt,g as mt,V as bt,W as dt,y as vt,X as gt,Y as wt,h as St,Z as yt,$ as kt,b as Y1,w as me,k as B1,l as et,a0 as xt,a1 as Mt,a2 as At,D as Bt,a3 as Tt,a4 as Rt,a5 as Et,a6 as Ee,a7 as Ct,a8 as It,e as Lt,a9 as Pt}from"./iBiA3qHo.js";import{_ as Ht}from"./C6WHBLMF.js";import{b as Ot,c as Nt}from"./BLDARQqd.js";import{_ as Vt}from"./DIFg_cFK.js";import"./B37HoT1E.js";import"./jEpb_vT2.js";import"./Cb4KlQxU.js";const Dt={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},be=_t(Fe.ui.strategy,Fe.ui.alert,Dt),Ft=st({components:{UIcon:ze,UAvatar:nt,UButton:Xe},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>be.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>be.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>be.default.color,validator(s1){return[...Fe.ui.colors,...Object.keys(be.color)].includes(s1)}},variant:{type:String,default:()=>be.default.variant,validator(s1){return[...Object.keys(be.variant),...Object.values(be.color).flatMap(C1=>Object.keys(C1))].includes(s1)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(s1){const{ui:C1,attrs:j1}=ct("alert",ft(s1,"ui"),be),G1=at(()=>{var W1,o1;const _1=((o1=(W1=C1.value.color)==null?void 0:W1[s1.color])==null?void 0:o1[s1.variant])||C1.value.variant[s1.variant];return Ze(ut(C1.value.wrapper,C1.value.rounded,C1.value.shadow,C1.value.padding,_1==null?void 0:_1.replaceAll("{color}",s1.color)),s1.class)});function J(_1){_1.click&&_1.click()}return{ui:C1,attrs:j1,alertClass:G1,onAction:J,twMerge:Ze}}});function zt(s1,C1,j1,G1,J,_1){const W1=ze,o1=nt,r1=Xe;return J1(),_e("div",Be({class:s1.alertClass},s1.attrs),[T1("div",{class:ue(["flex",[s1.ui.gap,{"items-start":s1.description||s1.$slots.description,"items-center":!s1.description&&!s1.$slots.description}]])},[ke(s1.$slots,"icon",{icon:s1.icon},()=>[s1.icon?(J1(),ye(W1,{key:0,name:s1.icon,class:ue(s1.ui.icon.base)},null,8,["name","class"])):le("",!0)]),ke(s1.$slots,"avatar",{avatar:s1.avatar},()=>[s1.avatar?(J1(),ye(o1,Be({key:0},{size:s1.ui.avatar.size,...s1.avatar},{class:s1.ui.avatar.base}),null,16,["class"])):le("",!0)]),T1("div",{class:ue(s1.ui.inner)},[s1.title||s1.$slots.title?(J1(),_e("p",{key:0,class:ue(s1.ui.title)},[ke(s1.$slots,"title",{title:s1.title},()=>[ie(xe(s1.title),1)])],2)):le("",!0),s1.description||s1.$slots.description?(J1(),_e("div",{key:1,class:ue(s1.twMerge(s1.ui.description,!s1.title&&!s1.$slots.title&&"mt-0 leading-5"))},[ke(s1.$slots,"description",{description:s1.description},()=>[ie(xe(s1.description),1)])],2)):le("",!0),(s1.description||s1.$slots.description)&&(s1.actions.length||s1.$slots.actions)?(J1(),_e("div",{key:2,class:ue(s1.ui.actions)},[ke(s1.$slots,"actions",{},()=>[(J1(!0),_e(Qe,null,Je(s1.actions,(Q,E1)=>(J1(),ye(r1,Be({key:E1,ref_for:!0},{...s1.ui.default.actionButton||{},...Q},{onClick:De(D1=>s1.onAction(Q),["stop"])}),null,16,["onClick"]))),128))])],2)):le("",!0)],2),s1.closeButton||!s1.description&&!s1.$slots.description&&s1.actions.length?(J1(),_e("div",{key:0,class:ue(s1.twMerge(s1.ui.actions,"mt-0"))},[!s1.description&&!s1.$slots.description&&(s1.actions.length||s1.$slots.actions)?ke(s1.$slots,"actions",{key:0},()=>[(J1(!0),_e(Qe,null,Je(s1.actions,(Q,E1)=>(J1(),ye(r1,Be({key:E1,ref_for:!0},{...s1.ui.default.actionButton||{},...Q},{onClick:De(D1=>s1.onAction(Q),["stop"])}),null,16,["onClick"]))),128))]):le("",!0),s1.closeButton?(J1(),ye(r1,Be({key:1,"aria-label":"Close"},{...s1.ui.default.closeButton||{},...s1.closeButton},{onClick:C1[0]||(C1[0]=De(Q=>s1.$emit("close"),["stop"]))}),null,16)):le("",!0)],2)):le("",!0)],2)],16)}const Xt=tt(Ft,[["render",zt]]);var it={exports:{}};(function(s1){(function(C1){var j1=typeof window=="object"&&!!window.document,G1=j1?window:Object;(function(J,_1){var W1=function(){},o1=function(l){return typeof l=="number"},r1=function(l){return JSON.stringify(l)},Q=function(l){return new v1(l)},E1=Q.LM="2024-10-20 22:15",D1="https://github.com/xiangyuecn/Recorder",y1="Recorder",H1="getUserMedia",V1="srcSampleRate",g1="sampleRate",p1="bitRate",F1="catch",K1=J[y1];if(K1&&K1.LM==E1)return K1.CLog(K1.i18n.$T("K8zP::重复导入{1}",0,y1),3);Q.IsOpen=function(){var l=Q.Stream;if(l){var w=b1(l),b=w[0];if(b){var y=b.readyState;return y=="live"||y==b.LIVE}}return!1},Q.BufferSize=4096,Q.Destroy=function(){for(var l in l1(y1+" Destroy"),M1(),V)V[l]()};var V={};Q.BindDestroy=function(l,w){V[l]=w},Q.Support=function(){if(!_1)return!1;var l=navigator.mediaDevices||{};return l[H1]||(l=navigator)[H1]||(l[H1]=l.webkitGetUserMedia||l.mozGetUserMedia||l.msGetUserMedia),!!l[H1]&&(Q.Scope=l,!!Q.GetContext())},Q.GetContext=function(l){if(!_1)return null;var w=window.AudioContext;if(w||(w=window.webkitAudioContext),!w)return null;var b=Q.Ctx,y=0;return b||(b=Q.Ctx=new w,y=1,Q.NewCtxs=Q.NewCtxs||[],Q.BindDestroy("Ctx",function(){var i=Q.Ctx;i&&i.close&&(i1(i),Q.Ctx=0);var M=Q.NewCtxs;Q.NewCtxs=[];for(var L=0;L<M.length;L++)i1(M[L])})),l&&b.close&&(y||(b._useC||i1(b),b=new w),b._useC=1,Q.NewCtxs.push(b)),b},Q.CloseNewCtx=function(l){if(l&&l.close){i1(l);for(var w=Q.NewCtxs||[],b=w.length,y=0;y<w.length;y++)if(w[y]==l){w.splice(y,1);break}l1(D("mSxV::剩{1}个GetContext未close",0,b+"-1="+w.length),w.length?3:0)}};var i1=function(l){if(l&&l.close&&!l._isC&&(l._isC=1,l.state!="closed"))try{l.close()}catch(w){l1("ctx close err",1,w)}},w1=Q.ResumeCtx=function(l,w,b,y){var i=0,M=0,L=0,e1=0,j="EventListener",Y="ResumeCtx ",A=function(r,n){M&&t(),i||(i=1,r&&y(r,e1),n&&b(e1)),n&&(!l._LsSC&&l["add"+j]&&l["add"+j]("statechange",e),l._LsSC=1,L=1)},t=function(r){if(!r||!M){M=r?1:0;for(var n=["focus","mousedown","mouseup","touchstart","touchend"],s=0;s<n.length;s++)window[(r?"add":"remove")+j](n[s],e,!0)}},e=function(){var r=l.state,n=m1(r);if(!i&&!w(n?++e1:e1))return A();n?(L&&l1(Y+"sc "+r,3),t(1),l.resume().then(function(){L&&l1(Y+"sc "+l.state),A(0,1)})[F1](function(s){l1(Y+"error",1,s),m1(l.state)||A(s.message||"error")})):r=="closed"?(L&&!l._isC&&l1(Y+"sc "+r,1),A("ctx closed")):A(0,1)};e()},m1=Q.CtxSpEnd=function(l){return l=="suspended"||l=="interrupted"},k1=function(l){var w=l.state,b="ctx.state="+w;return m1(w)&&(b+=D("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),b},S1="ConnectEnableWebM";Q[S1]=!0;var a1="ConnectEnableWorklet";Q[a1]=!1;var x=function(l){var w=l.BufferSize||Q.BufferSize,b=l.Stream,y=b._c,i=y[g1],M={},L=b1(b),e1=L[0],j=null,Y="";if(e1&&e1.getSettings){var A=(j=e1.getSettings())[g1];A&&A!=i&&(Y=D("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,A,i))}b._ts=j,l1(Y+"Stream TrackSet: "+r1(j),Y?3:0);var t,e,r,n=function(O){var C=b._m=y.createMediaStreamSource(b),S=y.destination,d="createMediaStreamDestination";y[d]&&(S=b._d=y[d]()),C.connect(O),O.connect(S)},s="",a=b._call,u=function(O,C){for(var S in a){if(C!=i){M.index=0;var d=(M=Q.SampleData([O],C,i,M,{_sum:1})).data,k=M._sum}else{M={};for(var N=O.length,d=new Int16Array(N),k=0,F=0;F<N;F++){var B=Math.max(-1,Math.min(1,O[F]));B=B<0?32768*B:32767*B,d[F]=B,k+=Math.abs(B)}}for(var E in a)a[E](d,k);return}},p="ScriptProcessor",c="audioWorklet",f=y1+" "+c,o="RecProc",_="MediaRecorder",m=_+".WebM.PCM",h=y.createScriptProcessor||y.createJavaScriptNode,g=D("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,c),T=function(){e=b.isWorklet=!1,L1(b),l1(D("7TU0::Connect采用老的{1}，",0,p)+X.get(D(Q[a1]?"JwCL::但已设置{1}尝试启用{2}":"VGjB::可设置{1}尝试启用{2}",2),[y1+"."+a1+"=true",c])+s+g,3);var O=b._p=h.call(y,w,1,1);n(O),O.onaudioprocess=function(C){var S=C.inputBuffer.getChannelData(0);u(S,i)}},R=function(){t=b.isWebM=!1,x1(b),e=b.isWorklet=!h||Q[a1];var O=window.AudioWorkletNode;if(e&&y[c]&&O){var C=function(){return e&&b._na},S=b._na=function(){r!==""&&(clearTimeout(r),r=setTimeout(function(){r=0,C()&&(l1(D("MxX1::{1}未返回任何音频，恢复使用{2}",0,c,p),3),h&&T())},500))},d=function(){if(C()){var N=b._n=new O(y,o,{processorOptions:{bufferSize:w}});n(N),N.port.onmessage=function(F){r&&(clearTimeout(r),r=""),C()?u(F.data.val,i):e||l1(D("XUap::{1}多余回调",0,c),3)},l1(D("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,c,y1+"."+a1+"=false",p)+s+g,3)}},k=function(){if(C())if(y[o])d();else{var N,F,B=(F="class "+o+" extends AudioWorkletProcessor{",F+="constructor "+(N=function(E){return E.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,f)})(function(E){DEL_super(E);var P=this,H=E.processorOptions.bufferSize;P.bufferSize=H,P.buffer=new Float32Array(2*H),P.pos=0,P.port.onmessage=function(z){z.data.kill&&(P.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",E)}),F+="process "+N(function(E,P,H){var z=this,$=z.bufferSize,q=z.buffer,Z=z.pos;if((E=(E[0]||[])[0]||[]).length){q.set(E,Z);var W=~~((Z+=E.length)/$)*$;if(W){this.port.postMessage({val:q.slice(0,W)});var t1=q.subarray(W,Z);(q=new Float32Array(2*$)).set(t1),Z=t1.length,z.buffer=q}z.pos=Z}return!z.kill}),F=(F+='}try{registerProcessor("'+o+'", '+o+')}catch(e){$C.error("'+f+' Reg Error",e)}').replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(F))));y[c].addModule(B).then(function(E){C()&&(y[o]=1,d(),r&&S())})[F1](function(E){l1(c+".addModule Error",1,E),C()&&T()})}};w1(y,function(){return C()},k,k)}else T()};(function(){var O=window[_],C="ondataavailable",S="audio/webm; codecs=pcm";t=b.isWebM=Q[S1];var d=O&&C in O.prototype&&O.isTypeSupported(S);if(s=d?"":D("VwPd::（此浏览器不支持{1}）",0,m),!t||!d)return R();var k=function(){return t&&b._ra};b._ra=function(){r!==""&&(clearTimeout(r),r=setTimeout(function(){k()&&(l1(D("vHnb::{1}未返回任何音频，降级使用{2}",0,_,c),3),R())},500))};var N=Object.assign({mimeType:S},Q.ConnectWebMOptions),F=b._r=new O(b,N),B=b._rd={};F[C]=function(E){var P=new FileReader;P.onloadend=function(){if(k()){var H=d1(new Uint8Array(P.result),B);if(!H)return;if(H==-1)return void R();r&&(clearTimeout(r),r=""),u(H,B.webmSR)}else t||l1(D("O9P7::{1}多余回调",0,_),3)},P.readAsArrayBuffer(E.data)},F.start(~~(w/48)),l1(D("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,m,y1+"."+S1+"=false",c,p))})()},I1=function(l){l._na&&l._na(),l._ra&&l._ra()},L1=function(l){l._na=null,l._n&&(l._n.port.postMessage({kill:!0}),l._n.disconnect(),l._n=null)},x1=function(l){if(l._ra=null,l._r){try{l._r.stop()}catch(w){l1("mr stop err",1,w)}l._r=null}},M1=function(l){var w=(l=l||Q)==Q,b=l.Stream;b&&(b._m&&(b._m.disconnect(),b._m=null),!b._RC&&b._c&&Q.CloseNewCtx(b._c),b._RC=null,b._c=null,b._d&&(A1(b._d.stream),b._d=null),b._p&&(b._p.disconnect(),b._p.onaudioprocess=b._p=null),L1(b),x1(b),w&&A1(b)),l.Stream=0},A1=Q.StopS_=function(l){for(var w=b1(l),b=0;b<w.length;b++){var y=w[b];y.stop&&y.stop()}l.stop&&l.stop()},b1=function(l){var w=0,b=0,y=[];l.getAudioTracks&&(w=l.getAudioTracks(),b=l.getVideoTracks()),w||(w=l.audioTracks,b=l.videoTracks);for(var i=0,M=w?w.length:0;i<M;i++)y.push(w[i]);for(var i=0,M=b?b.length:0;i<M;i++)y.push(b[i]);return y};Q.SampleData=function(l,w,b,y,i){var M="SampleData";y||(y={});var L=y.index||0,e1=y.offset||0,j=y.raisePrev||0,Y=y.filter;if(Y&&Y.fn&&(Y.sr&&Y.sr!=w||Y.srn&&Y.srn!=b)&&(Y=null,l1(D("d48C::{1}的filter采样率变了，重设滤波",0,M),3)),!Y)if(b<=w){var A=3*w/4<b?0:b/2*3/4;Y={fn:A?Q.IIRFilter(!0,w,A):0}}else{var A=3*b/4<w?0:w/2*3/4;Y={fn:A?Q.IIRFilter(!0,b,A):0}}Y.sr=w,Y.srn=b;var t=Y.fn,e=y.frameNext||[];i||(i={});var r=i.frameSize||1;i.frameType&&(r=i.frameType=="mp3"?1152:1);var n=i._sum,s=0,a=l.length;a+1<L&&l1(D("tlbC::{1}似乎传入了未重置chunk {2}",0,M,L+">"+a),3);for(var u=0,p=L;p<a;p++)u+=l[p].length;var c=w/b;if(1<c)u=Math.max(0,u-Math.floor(e1)),u=Math.floor(u/c);else if(c<1){var f=1/c;u=Math.floor(u*f)}u+=e.length;for(var o=new Int16Array(u),_=0,p=0;p<e.length;p++)o[_]=e[p],_++;for(;L<a;L++){var m=l[L],h=m instanceof Float32Array,p=e1,g=m.length,T=t&&t.Embed,R=0,O=0,C=0,S=0;if(c<1){for(var d=_+p,k=j,N=0;N<g;N++){var F=m[N];h&&(F=(F=Math.max(-1,Math.min(1,F)))<0?32768*F:32767*F);var B=Math.floor(d);d+=f;for(var E=Math.floor(d),P=(F-k)/(E-B),H=1;B<E;B++,H++){var z=Math.floor(k+H*P);T?(C=z,S=T.b0*C+T.b1*T.x1+T.b0*T.x2-T.a1*T.y1-T.a2*T.y2,T.x2=T.x1,T.x1=C,T.y2=T.y1,T.y1=S,z=S):z=t?t(z):z,32767<z?z=32767:z<-32768&&(z=-32768),n&&(s+=Math.abs(z)),o[B]=z,_++}k=j=F,p+=f}e1=p%1}else{for(var N=0,$=0;N<g;N++,$++){if($<g){var F=m[$];h&&(F=(F=Math.max(-1,Math.min(1,F)))<0?32768*F:32767*F),T?(C=F,S=T.b0*C+T.b1*T.x1+T.b0*T.x2-T.a1*T.y1-T.a2*T.y2,T.x2=T.x1,T.x1=C,T.y2=T.y1,T.y1=S):S=t?t(F):F}if(R=O,O=S,$!=0){var q=Math.floor(p);if(N==q){var Z=Math.ceil(p),W=p-q,t1=R,h1=Z<g?O:t1,U=t1+(h1-t1)*W;32767<U?U=32767:U<-32768&&(U=-32768),n&&(s+=Math.abs(U)),o[_]=U,_++,p+=c}}else N--}e1=Math.max(0,p-g)}}c<1&&_+1==u&&(u--,o=new Int16Array(o.buffer.slice(0,2*u))),_-1!=u&&_!=u&&l1(M+" idx:"+_+" != size:"+u,3),e=null;var n1=u%r;if(0<n1){var u1=2*(u-n1);e=new Int16Array(o.buffer.slice(u1)),o=new Int16Array(o.buffer.slice(0,u1))}var G={index:L,offset:e1,raisePrev:j,filter:Y,frameNext:e,sampleRate:b,data:o};return n&&(G._sum=s),G},Q.IIRFilter=function(l,w,b){var y=2*Math.PI*b/w,i=Math.sin(y),M=Math.cos(y),L=i/2,e1=1+L,j=-2*M/e1,Y=(1-L)/e1;if(l)var A=(1-M)/2/e1,t=(1-M)/e1;else var A=(1+M)/2/e1,t=-(1+M)/e1;var e=0,r=0,n=0,s=0,a=0,u=function(p){return n=A*p+t*e+A*r-j*s-Y*a,r=e,e=p,a=s,s=n};return u.Embed={x1:0,x2:0,y1:0,y2:0,b0:A,b1:t,a1:j,a2:Y},u},Q.PowerLevel=function(l,w){var b=l/w||0;return b<1251?Math.round(b/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(b/1e4)/Math.log(10)))))},Q.PowerDBFS=function(l){var w=Math.max(.1,l||0);return w=Math.min(w,32767),w=20*Math.log(w/32767)/Math.log(10),Math.max(-100,Math.round(w))},Q.CLog=function(l,w){if(typeof console=="object"){var b=new Date,y=("0"+b.getMinutes()).substr(-2)+":"+("0"+b.getSeconds()).substr(-2)+"."+("00"+b.getMilliseconds()).substr(-3),i=this&&this.envIn&&this.envCheck&&this.id,M=["["+y+" "+y1+(i?":"+i:"")+"]"+l],L=arguments,e1=Q.CLog,j=2,Y=e1.log||console.log;for(o1(w)?Y=w==1?e1.error||console.error:w==3?e1.warn||console.warn:Y:j=1;j<L.length;j++)M.push(L[j]);N1?Y&&Y("[IsLoser]"+M[0],1<M.length?M:""):Y.apply(console,M)}};var l1=function(){Q.CLog.apply(this,arguments)},N1=!0;try{N1=!console.log.apply}catch{}var v=0;function v1(l){var w=this;w.id=++v,f1();var b={type:"mp3",onProcess:W1};for(var y in l)b[y]=l[y];var i=(w.set=b)[p1],M=b[g1];(i&&!o1(i)||M&&!o1(M))&&w.CLog(D.G("IllegalArgs-1",[D("VtS4::{1}和{2}必须是数值",0,g1,p1)]),1,l),b[p1]=+i||16,b[g1]=+M||16e3,w.state=0,w._S=9,w.Sync={O:9,C:9}}Q.Sync={O:9,C:9},Q.prototype=v1.prototype={CLog:l1,_streamStore:function(){return this.set.sourceStream?this:Q},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var l=this._streamGet();return l&&l._c},open:function(l,w){var b=this,y=b.set,i=b._streamStore(),M=0;l=l||W1;var L=function(o,_){_=!!_,b.CLog(D("5tWi::录音open失败：")+o+",isUserNotAllow:"+_,1),M&&Q.CloseNewCtx(M),w&&w(o,_)};b._streamTag=H1;var e1=function(){b.CLog("open ok, id:"+b.id+" stream:"+b._streamTag),l(),b._SO=0},j=i.Sync,Y=++j.O,A=j.C;if(b._O=b._O_=Y,b._SO=b._S,_1){var t=b.envCheck({envName:"H5",canProcess:!0});if(t)L(D("A5bm::不能录音：")+t);else{var e,r=function(){(e=y.runningContext)||(e=M=Q.GetContext(!0))};if(y.sourceStream){if(b._streamTag="set.sourceStream",!Q.GetContext())return void L(D("1iU7::不支持此浏览器从流中获取录音"));r(),M1(i);var n=b.Stream=y.sourceStream;n._c=e,n._RC=y.runningContext,n._call={};try{x(i)}catch(o){return M1(i),void L(D("BTW2::从流中打开录音失败：")+o.message)}e1()}else{var s=function(o,_){try{window.top.a}catch{return void L(D("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'))}a(1,o)&&(/Found/i.test(o)?L(_+D("jBa9::，无可用麦克风")):L(_))},a=function(o,_){if(/Permission|Allow/i.test(_))o&&L(D("gyO5::用户拒绝了录音权限"),!0);else{if(window.isSecureContext!==!1)return 1;o&&L(D("oWNo::浏览器禁止不安全页面录音，可开启https解决"))}};if(Q.IsOpen())e1();else if(Q.Support()){r();var u=function(o){setTimeout(function(){o._call={};var _=Q.Stream;_&&(M1(),o._call=_._call),(Q.Stream=o)._c=e,o._RC=y.runningContext,function(){if(A!=j.C||!b._O){var m=D("dFm8::open被取消");return Y==j.O?b.close():m=D("VtJO::open被中断"),L(m),!0}}()||(Q.IsOpen()?(_&&b.CLog(D("upb8::发现同时多次调用open"),1),x(i),e1()):L(D("Q1GA::录音功能无效：无音频流")))},100)},p=function(o){var _=o.name||o.message||o.code+":"+o,m="";c==1&&a(0,_)&&(m=D("KxE2::，将尝试禁用回声消除后重试")),b.CLog(D("xEQR::请求录音权限错误")+m+"|"+o,m?3:1,o),m?f(1):s(_,D("bDOG::无法录音：")+o)},c=0,f=function(o){c++;var _="audioTrackSet",m="autoGainControl",h="echoCancellation",g="noiseSuppression",T=JSON.parse(r1(y[_]||!0));b.CLog("open... "+c+" "+_+":"+r1(T)),o&&(typeof T!="object"&&(T={}),T[m]=!1,T[h]=!1,T[g]=!1),T[g1]&&b.CLog(D("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,_+"."+g1),3);var R={audio:T,video:y.videoTrackSet||!1};try{var O=Q.Scope[H1](R,u,p)}catch(C){b.CLog(H1,3,C),R={audio:!0,video:!1},O=Q.Scope[H1](R,u,p)}b.CLog(H1+"("+r1(R)+") "+k1(e)+D("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,"audioTrackSet:{echoCancellation,noiseSuppression,autoGainControl}",_)+"("+D1+") LM:"+E1+" UA:"+navigator.userAgent),O&&O.then&&O.then(u)[F1](p)};f()}else s("",D("COxc::此浏览器不支持录音"))}}}else L(D.G("NonBrowser-1",["open"])+D("EMJq::，可尝试使用RecordApp解决方案")+"("+D1+"/tree/master/app-support-sample)")},close:function(l){l=l||W1;var w=this,b=w._streamStore();w._stop();var y=" stream:"+w._streamTag,i=b.Sync;if(w._O=0,w._O_!=i.O)return w.CLog(D("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+y,3),void l();i.C++,M1(b),w.CLog("close,"+y),l()},mock:function(l,w){var b=this;return b._stop(),b.isMock=1,b.mockEnvInfo=null,b.buffers=[l],b.recSize=l.length,b._setSrcSR(w),b._streamTag="mock",b},_setSrcSR:function(l){var w=this.set,b=w[g1];l<b?w[g1]=l:b=0,this[V1]=l,this.CLog(V1+": "+l+" set."+g1+": "+w[g1]+(b?" "+D("UHvm::忽略")+": "+b:""),b?3:0)},envCheck:function(l){var w,b=this.set,y="CPU_BE";if(w||Q[y]||typeof Int8Array!="function"||new Int8Array(new Int32Array([1]).buffer)[0]||(f1(y),w=D("Essp::不支持{1}架构",0,y)),!w){var i=b.type,M=this[i+"_envCheck"];b.takeoffEncodeChunk&&(M?l.canProcess||(w=D("7uMV::{1}环境不支持实时处理",0,l.envName)):w=D("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,i)+(this[i]?"":D("LG7e::(未加载编码器)"))),!w&&M&&(w=this[i+"_envCheck"](l,b))}return w||""},envStart:function(l,w){var b=this,y=b.set;if(b.isMock=l?1:0,b.mockEnvInfo=l,b.buffers=[],b.recSize=0,l&&(b._streamTag="env$"+l.envName),b.state=1,b.envInLast=0,b.envInFirst=0,b.envInFix=0,b.envInFixTs=[],b._setSrcSR(w),b.engineCtx=0,b[y.type+"_start"]){var i=b.engineCtx=b[y.type+"_start"](y);i&&(i.pcmDatas=[],i.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(l,w){var b=this,y=b.set,i=b.engineCtx;if(b.state==1){var M=b[V1],L=l.length,e1=Q.PowerLevel(w,L),j=b.buffers,Y=j.length;j.push(l);var A=j,t=Y,e=Date.now(),r=Math.round(L/M*1e3);b.envInLast=e,b.buffers.length==1&&(b.envInFirst=e-r);var n=b.envInFixTs;n.splice(0,0,{t:e,d:r});for(var s=e,a=0,u=0;u<n.length;u++){var p=n[u];if(3e3<e-p.t){n.length=u;break}s=p.t,a+=p.d}var c=n[1],f=e-s,o=f-a;if(f/3<o&&(c&&1e3<f||6<=n.length)){var _=e-c.t-r;if(r/5<_){var m=!y.disableEnvInFix;if(b.CLog("["+e+"]"+X.get(D(m?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[_]),3),b.envInFix+=_,m){var h=new Int16Array(_*M/1e3);L+=h.length,j.push(h)}}}var g=b.recSize,T=L,R=g+T;if(b.recSize=R,i){var O=Q.SampleData(j,M,y[g1],i.chunkInfo);i.chunkInfo=O,g=i.pcmSize,T=O.data.length,R=g+T,i.pcmSize=R,j=i.pcmDatas,Y=j.length,j.push(O.data),M=O[g1]}var C=Math.round(R/M*1e3),S=j.length,d=A.length,k=function(){for(var P=N?0:-T,H=j[0]==null,z=Y;z<S;z++){var $=j[z];$==null?H=1:(P+=$.length,i&&$.length&&b[y.type+"_encode"](i,$))}if(H&&i){var z=t;for(A[0]&&(z=0);z<d;z++)A[z]=null}H&&(P=N?T:0,j[0]=null),i?i.pcmSize+=P:b.recSize+=P},N=0,F="rec.set.onProcess";try{N=y.onProcess(j,e1,C,M,Y,k)}catch(P){console.error(F+D("gFUF::回调出错是不允许的，需保证不会抛异常"),P)}var B=Date.now()-e;if(10<B&&1e3<b.envInFirst-e&&b.CLog(F+D("2ghS::低性能，耗时{1}ms",0,B),3),N===!0){for(var E=0,u=Y;u<S;u++)j[u]==null?E=1:j[u]=new Int16Array(0);E?b.CLog(D("ufqH::未进入异步前不能清除buffers"),3):i?i.pcmSize-=T:b.recSize-=T}else k()}else b.state||b.CLog("envIn at state=0",3)},start:function(){var l=this,w=1;if(l.set.sourceStream?l.Stream||(w=0):Q.IsOpen()||(w=0),w){var b=l._streamCtx();if(l.CLog(D("kLDN::start 开始录音，")+k1(b)+" stream:"+l._streamTag),l._stop(),l.envStart(null,b[g1]),l.state=3,l._SO&&l._SO+1!=l._S)l.CLog(D("Bp2y::start被中断"),3);else{l._SO=0;var y=function(){l.state==3&&(l.state=1,l.resume())},i="AudioContext resume: ",M=l._streamGet();M._call[l.id]=function(){l.CLog(i+b.state+"|stream ok"),y()},w1(b,function(L){return L&&l.CLog(i+"wait..."),l.state==3},function(L){L&&l.CLog(i+b.state),y()},function(L){l.CLog(i+b.state+D("upkE::，可能无法录音：")+L,1),y()})}}else l.CLog(D("6WmN::start失败：未open"),1)},pause:function(){var l=this,w=l._streamGet();l.state&&(l.state=2,l.CLog("pause"),w&&delete w._call[l.id])},resume:function(){var l=this,w=l._streamGet(),b="resume(wait ctx)";if(l.state==3)l.CLog(b);else if(l.state){l.state=1,l.CLog("resume"),l.envResume(),w&&(w._call[l.id]=function(i,M){l.state==1&&l.envIn(i,M)},I1(w));var y=l._streamCtx();y&&w1(y,function(i){return i&&l.CLog(b+"..."),l.state==1},function(i){i&&l.CLog(b+y.state),I1(w)},function(i){l.CLog(b+y.state+"[err]"+i,1)})}},_stop:function(l){var w=this,b=w.set;w.isMock||w._S++,w.state&&(w.pause(),w.state=0),!l&&w[b.type+"_stop"]&&(w[b.type+"_stop"](w.engineCtx),w.engineCtx=0)},stop:function(l,w,b){var y,i=this,M=i.set,L=i.envInLast-i.envInFirst,e1=L&&i.buffers.length;i.CLog(D("Xq4s::stop 和start时差:")+(L?L+"ms "+D("3CQP::补偿:")+i.envInFix+"ms envIn:"+e1+" fps:"+(e1/L*1e3).toFixed(1):"-")+" stream:"+i._streamTag+" ("+D1+") LM:"+E1);var j=function(){i._stop(),b&&i.close()},Y=function(p){i.CLog(D("u8JG::结束录音失败：")+p,1),w&&w(p),j()},A=function(p,c,f){var o="arraybuffer",_="dataType",m="DefaultDataType",h=i[_]||Q[m]||"blob",g=_+"="+h,T=p instanceof ArrayBuffer,R=0,O=T?p.byteLength:p.size;if(h==o?T||(R=1):h=="blob"?typeof Blob!="function"?R=D.G("NonBrowser-1",[g])+D("1skY::，请设置{1}",0,y1+"."+m+'="'+o+'"'):(T&&(p=new Blob([p],{type:c})),p instanceof Blob||(R=1),c=p.type||c):R=D.G("NotSupport-1",[g]),i.CLog(D("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-y,f,O)+" "+g+","+c),R)Y(R!=1?R:D("Vkbd::{1}编码器返回的不是{2}",0,M.type,h)+", "+g);else{if(M.takeoffEncodeChunk)i.CLog(D("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(O<Math.max(50,f/5))return void Y(D("Sz2H::生成的{1}无效",0,M.type));l&&l(p,f,c),j()}};if(!i.isMock){var t=i.state==3;if(!i.state||t)return void Y(D("wf9t::未开始录音")+(t?D("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""))}i._stop(!0);var e=i.recSize;if(e)if(i[M.type]){if(i.isMock){var r=i.envCheck(i.mockEnvInfo||{envName:"mock",canProcess:!1});if(r)return void Y(D("AxOH::录音错误：")+r)}var n=i.engineCtx;if(i[M.type+"_complete"]&&n){var s=Math.round(n.pcmSize/M[g1]*1e3);return y=Date.now(),void i[M.type+"_complete"](n,function(p,c){A(p,c,s)},Y)}if(y=Date.now(),i.buffers[0]){var a=Q.SampleData(i.buffers,i[V1],M[g1]);M[g1]=a[g1];var u=a.data,s=Math.round(u.length/M[g1]*1e3);i.CLog(D("CxeT::采样:{1} 花:{2}ms",0,e+"->"+u.length,Date.now()-y)),setTimeout(function(){y=Date.now(),i[M.type](u,function(c,f){A(c,f,s)},function(c){Y(c)})})}else Y(D("xkKd::音频buffers被释放"))}else Y(D("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,M.type,y1));else Y(D("Ltz3::未采集到录音"))}};var d1=function(l,w){w.pos||(w.pos=[0],w.tracks={},w.bytes=[]);var b=w.tracks,y=[w.pos[0]],i=function(){w.pos[0]=y[0]},M=w.bytes.length,L=new Uint8Array(M+l.length);if(L.set(w.bytes),L.set(l,M),w.bytes=L,!w._ht){if(I(L,y),K(L,y),!P1(I(L,y),[24,83,128,103]))return;for(I(L,y);y[0]<L.length;){var e1=I(L,y),j=K(L,y),Y=[0],A=0;if(!j)return;if(P1(e1,[22,84,174,107])){for(;Y[0]<j.length;){var t=I(j,Y),e=K(j,Y),r=[0],n={channels:0,sampleRate:0};if(P1(t,[174]))for(;r[0]<e.length;){var s=I(e,r),a=K(e,r),u=[0];if(P1(s,[215])){var p=c1(a);n.number=p,b[p]=n}else if(P1(s,[131])){var p=c1(a);p==1?n.type="video":p==2?(n.type="audio",A||(w.track0=n),n.idx=A++):n.type="Type-"+p}else if(P1(s,[134])){for(var c="",f=0;f<a.length;f++)c+=String.fromCharCode(a[f]);n.codec=c}else if(P1(s,[225]))for(;u[0]<a.length;){var o=I(a,u),_=K(a,u);if(P1(o,[181])){var p=0,m=new Uint8Array(_.reverse()).buffer;_.length==4?p=new Float32Array(m)[0]:_.length==8?p=new Float64Array(m)[0]:l1("WebM Track !Float",1,_),n[g1]=Math.round(p)}else P1(o,[98,100])?n.bitDepth=c1(_):P1(o,[159])&&(n.channels=c1(_))}}}w._ht=1,l1("WebM Tracks",b),i();break}}}var h=w.track0;if(h){var g=h[g1];if(w.webmSR=g,h.bitDepth==16&&/FLOAT/i.test(h.codec)&&(h.bitDepth=32,l1("WebM 16->32 bit",3)),g<8e3||h.bitDepth!=32||h.channels<1||!/(\b|_)PCM\b/i.test(h.codec))return w.bytes=[],w.bad||l1("WebM Track Unexpected",3,w),-(w.bad=1);for(var T=[],R=0;y[0]<L.length;){var t=I(L,y),e=K(L,y);if(!e)break;if(P1(t,[163])){var O=15&e[0],n=b[O];if(n){if(n.idx===0){for(var C=new Uint8Array(e.length-4),f=4;f<e.length;f++)C[f-4]=e[f];T.push(C),R+=C.length}}else l1("WebM !Track"+O,1,b)}i()}if(R){var S=new Uint8Array(L.length-w.pos[0]);S.set(L.subarray(w.pos[0])),w.bytes=S,w.pos[0]=0;for(var C=new Uint8Array(R),f=0,d=0;f<T.length;f++)C.set(T[f],d),d+=T[f].length;var m=new Float32Array(C.buffer);if(1<h.channels){for(var k=[],f=0;f<m.length;)k.push(m[f]),f+=h.channels;m=new Float32Array(k)}return m}}},P1=function(l,w){if(!l||l.length!=w.length)return!1;if(l.length==1)return l[0]==w[0];for(var b=0;b<l.length;b++)if(l[b]!=w[b])return!1;return!0},c1=function(l){for(var w="",b=0;b<l.length;b++){var y=l[b];w+=(y<16?"0":"")+y.toString(16)}return parseInt(w,16)||0},I=function(l,w,b){var y=w[0];if(!(y>=l.length)){var i=l[y],M=("0000000"+i.toString(2)).substr(-8),L=/^(0*1)(\d*)$/.exec(M);if(L){var e1=L[1].length,j=[];if(!(y+e1>l.length)){for(var Y=0;Y<e1;Y++)j[Y]=l[y],y++;return b&&(j[0]=parseInt(L[2]||"0",2)),w[0]=y,j}}}},K=function(l,w){var b=I(l,w,1);if(b){var y=c1(b),i=w[0],M=[];if(y<2147483647){if(i+y>l.length)return;for(var L=0;L<y;L++)M[L]=l[i],i++}return w[0]=i,M}},X=Q.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(l,w){var b=y1+".i18n.put: ",y=l.overwrite;y=y==null||y;var i=l.lang;if(!(i=X.alias[i]||i))throw new Error(b+"set.lang?");var M=X.locales[i];M||(M={},X.locales[i]=M);for(var L,e1=/^([\w\-]+):/,j=0;j<w.length;j++){var Y=w[j];if(L=e1.exec(Y)){var A=L[1],Y=Y.substr(A.length+1);!y&&M[A]||(M[A]=Y)}else l1(b+"'key:'? "+Y,3,l)}},get:function(){return X.v_G.apply(null,arguments)},v_G:function(l,w,b){w=w||[],b=b||X.lang,b=X.alias[b]||b;var y=X.locales[b],i=y&&y[l]||"";return i||b=="zh"?(X.lastLang=b,i=="=Empty"?"":i.replace(/\{(\d+)(\!?)\}/g,function(M,L,e1){return M=w[(L=+L||0)-1],(L<1||L>w.length)&&(M="{?}",l1("i18n["+l+"] no {"+L+"}: "+i,3)),e1?"":M})):b=="en"?X.v_G(l,w,"zh"):X.v_G(l,w,"en")},$T:function(){return X.v_T.apply(null,arguments)},v_T:function(){for(var l,w=arguments,b="",y=[],i=0,M=y1+".i18n.$T:",L=/^([\w\-]*):/,e1=0;e1<w.length;e1++){var j=w[e1];if(e1==0){if(l=L.exec(j),!(b=l&&l[1]))throw new Error(M+"0 'key:'?");j=j.substr(b.length+1)}if(i===-1)y.push(j);else{if(i)throw new Error(M+" bad args");if(j===0)i=-1;else if(o1(j)){if(j<1)throw new Error(M+" bad args");i=j}else{var Y=e1==1?"en":e1?"":"zh";if((l=L.exec(j))&&(Y=l[1]||Y,j=j.substr(l[1].length+1)),!l||!Y)throw new Error(M+e1+" 'lang:'?");X.put({lang:Y,overwrite:!1},[b+":"+j])}}}return b?0<i?b:X.v_G(b,y):""}},D=X.$T;D.G=X.get,D("NonBrowser-1::非浏览器环境，不支持{1}",1),D("IllegalArgs-1::参数错误：{1}",1),D("NeedImport-2::调用{1}需要先导入{2}",2),D("NotSupport-1::不支持：{1}",1),Q.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var f1=Q.Traffic=function(l){if(_1){l=l?"/"+y1+"/Report/"+l:"";var w=Q.TrafficImgUrl;if(w){var b=Q.Traffic,y=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],i=y[1]||"http://file/",M=(y[0]||i)+l;if(w.indexOf("//")==0&&(w=/^https:/i.test(M)?"https:"+w:"http:"+w),l&&(w=w+"&cu="+encodeURIComponent(i+l)),!b[M]){b[M]=1;var L=new Image;L.src=w,l1("Traffic Analysis Image: "+(l||y1+".TrafficImgUrl="+Q.TrafficImgUrl))}}}};K1&&(l1(D("8HO5::覆盖导入{1}",0,y1),1),K1.Destroy()),J[y1]=Q})(G1,j1),s1.exports&&(s1.exports=G1.Recorder)})(),function(C1){var j1=typeof window=="object"&&!!window.document,G1=(j1?window:Object).Recorder,J=G1.i18n;(function(_1,W1,o1,r1){var Q="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",E1="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";_1.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return o1("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,Q,E1)}};var D1,y1=function(V){var i1=V.bitRate,w1=V.sampleRate,m1=w1;if((" "+E1+",").indexOf(" "+i1+",")==-1&&_1.CLog(o1("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+i1,E1),3),(" "+Q+",").indexOf(" "+w1+",")==-1){for(var k1=Q.split(", "),S1=[],a1=0;a1<k1.length;a1++)S1.push({v:+k1[a1],s:Math.abs(k1[a1]-w1)});S1.sort(function(x,I1){return x.s-I1.s}),m1=S1[0].v,V.sampleRate=m1,_1.CLog(o1("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,m1,w1,Q),3)}},H1=function(){return o1.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},V1=r1&&typeof Worker=="function";_1.prototype.mp3=function(V,i1,w1){var m1=this,k1=m1.set,S1=V.length;if(_1.lamejs){if(V1){var a1=m1.mp3_start(k1);if(a1){if(a1.isW)return m1.mp3_encode(a1,V),void m1.mp3_complete(a1,i1,w1,1);m1.mp3_stop(a1)}}y1(k1);var x=new _1.lamejs.Mp3Encoder(1,k1.sampleRate,k1.bitRate),I1=new Int8Array(5e5),L1=0,x1=0,M1=0,A1=function(){try{if(x1<S1)var b1=x.encodeBuffer(V.subarray(x1,x1+57600));else{M1=1;var b1=x.flush()}}catch(d1){if(console.error(d1),!M1)try{x.flush()}catch(P1){console.error(P1)}return void w1("MP3 Encoder: "+d1.message)}var l1=b1.length;if(0<l1){if(L1+l1>I1.length){var N1=new Int8Array(I1.length+Math.max(5e5,l1));N1.set(I1.subarray(0,L1)),I1=N1}I1.set(b1,L1),L1+=l1}if(x1<S1)x1+=57600,setTimeout(A1);else{var v=[I1.buffer.slice(0,L1)],v1=F1.fn(v,L1,S1,k1.sampleRate);K1(v1,k1),i1(v[0]||new ArrayBuffer(0),"audio/mp3")}};A1()}else w1(H1())},_1.BindDestroy("mp3Worker",function(){D1&&(_1.CLog("mp3Worker Destroy"),D1.terminate(),D1=null)}),_1.prototype.mp3_envCheck=function(V,i1){var w1="";return i1.takeoffEncodeChunk&&(p1()||(w1=o1("yhUs::当前浏览器版本太低，无法实时处理"))),w1||_1.lamejs||(w1=H1()),w1},_1.prototype.mp3_start=function(V){return p1(V)};var g1={id:0},p1=function(V,i1){var w1,m1=function(A1){var b1=A1.data,l1=w1.wkScope.wk_ctxs,N1=w1.wkScope.wk_lame,v=w1.wkScope.wk_mp3TrimFix,v1=l1[b1.id];if(b1.action=="init")l1[b1.id]={sampleRate:b1.sampleRate,bitRate:b1.bitRate,takeoff:b1.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new N1.Mp3Encoder(1,b1.sampleRate,b1.bitRate)};else if(!v1)return;var d1=function(K){var X=K.length;if(v1.mOffset+X>v1.memory.length){var D=new Int8Array(v1.memory.length+Math.max(5e5,X));D.set(v1.memory.subarray(0,v1.mOffset)),v1.memory=D}v1.memory.set(K,v1.mOffset),v1.mOffset+=X};switch(b1.action){case"stop":if(!v1.isCp)try{v1.encObj.flush()}catch(K){console.error(K)}v1.encObj=null,delete l1[b1.id];break;case"encode":if(v1.isCp)break;v1.pcmSize+=b1.pcm.length;try{var P1=v1.encObj.encodeBuffer(b1.pcm)}catch(K){v1.err=K,console.error(K)}P1&&0<P1.length&&(v1.takeoff?a1.onmessage({action:"takeoff",id:b1.id,chunk:P1}):d1(P1));break;case"complete":v1.isCp=1;try{var P1=v1.encObj.flush()}catch(K){v1.err=K,console.error(K)}if(P1&&0<P1.length&&(v1.takeoff?a1.onmessage({action:"takeoff",id:b1.id,chunk:P1}):d1(P1)),v1.err){a1.onmessage({action:b1.action,id:b1.id,err:"MP3 Encoder: "+v1.err.message});break}var c1=[v1.memory.buffer.slice(0,v1.mOffset)],I=v.fn(c1,v1.mOffset,v1.pcmSize,v1.sampleRate);a1.onmessage({action:b1.action,id:b1.id,blob:c1[0]||new ArrayBuffer(0),meta:I})}},k1=function(A1){a1.onmessage=function(b1){var l1=b1;A1&&(l1=b1.data);var N1=g1[l1.id];N1&&(l1.action=="takeoff"?N1.set.takeoffEncodeChunk(new Uint8Array(l1.chunk.buffer)):(N1.call&&N1.call(l1),N1.call=null))}},S1=function(){var A1={worker:a1,set:V};return V?(A1.id=++g1.id,g1[A1.id]=A1,y1(V),a1.postMessage({action:"init",id:A1.id,sampleRate:V.sampleRate,bitRate:V.bitRate,takeoff:!!V.takeoffEncodeChunk,x:new Int16Array(5)})):a1.postMessage({x:new Int16Array(5)}),A1},a1=D1;if(i1||!V1)return _1.CLog(o1("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),a1={postMessage:function(A1){m1({data:A1})}},w1={wkScope:{wk_ctxs:{},wk_lame:_1.lamejs,wk_mp3TrimFix:F1}},k1(),S1();try{if(!a1){var x=(m1+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage"),I1=");wk_lame();self.onmessage="+(x=x.replace(/[\w\$]+\.wkScope/g,"wkScope"));I1+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",I1+=",wk_mp3TrimFix:{rm:"+F1.rm+",fn:"+F1.fn+"} }";var L1=_1.lamejs.toString(),x1=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",L1,I1],{type:"text/javascript"}));a1=new Worker(x1),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(x1)},1e4),k1(1)}var M1=S1();return M1.isW=1,D1=a1,M1}catch(A1){return a1&&a1.terminate(),console.error(A1),p1(V,1)}};_1.prototype.mp3_stop=function(V){if(V&&V.worker){V.worker.postMessage({action:"stop",id:V.id}),V.worker=null,delete g1[V.id];var i1=-1;for(var w1 in g1)i1++;i1&&_1.CLog(o1("fT6M::mp3 worker剩{1}个未stop",0,i1),3)}},_1.prototype.mp3_encode=function(V,i1){V&&V.worker&&V.worker.postMessage({action:"encode",id:V.id,pcm:i1})},_1.prototype.mp3_complete=function(V,i1,w1,m1){var k1=this;V&&V.worker?(V.call=function(S1){m1&&k1.mp3_stop(V),S1.err?w1(S1.err):(K1(S1.meta,V.set),i1(S1.blob,"audio/mp3"))},V.worker.postMessage({action:"complete",id:V.id})):w1(o1("mPxH::mp3编码器未start"))},_1.mp3ReadMeta=function(V,i1){var w1=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,m1=new Uint8Array(V[0]||[]);if(m1.length<4)return null;var k1=function(K,X){return("0000000"+((X||m1)[K]||0).toString(2)).substr(-8)},S1=k1(0)+k1(1),a1=k1(2)+k1(3);if(!/^1{11}/.test(S1))return null;var x={"00":2.5,10:2,11:1}[S1.substr(11,2)],I1={"01":3}[S1.substr(13,2)],L1={1:[44100,48e3,32e3],2:[22050,24e3,16e3],2.5:[11025,12e3,8e3]}[x];L1&&(L1=L1[w1(a1.substr(4,2),2)]);var x1=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][x==1?1:0][w1(a1.substr(0,4),2)];if(!(x&&I1&&x1&&L1))return null;for(var M1=Math.round(8*i1/x1),A1=I1==1?384:I1==2||x==1?1152:576,b1=A1/L1*1e3,l1=Math.floor(A1*x1/8/L1*1e3),N1=0,v=0,v1=0;v1<V.length;v1++){var d1=V[v1];if(v+=d1.byteLength,l1+3<=v){var P1=new Uint8Array(d1),c1=d1.byteLength-(v-(l1+3)+1),I=k1(c1,P1);N1=I.charAt(6)=="1";break}}return N1&&l1++,{version:x,layer:I1,sampleRate:L1,bitRate:x1,duration:M1,size:i1,hasPadding:N1,frameSize:l1,frameDurationFloat:b1}};var F1={rm:_1.mp3ReadMeta,fn:function(V,i1,w1,m1){var k1=this.rm(V,i1);if(!k1)return{size:i1,err:"mp3 unknown format"};var S1=Math.round(w1/m1*1e3),a1=Math.floor((k1.duration-S1)/k1.frameDurationFloat);if(0<a1){var x=a1*k1.frameSize-(k1.hasPadding?1:0);i1-=x;for(var I1=0,L1=[],x1=0;x1<V.length;x1++){var M1=V[x1];if(x<=0)break;x>=M1.byteLength?(x-=M1.byteLength,L1.push(M1),V.splice(x1,1),x1--):(V[x1]=M1.slice(x),I1=M1,x=0)}var A1=this.rm(V,i1);if(!A1){I1&&(V[0]=I1);for(var x1=0;x1<L1.length;x1++)V.splice(x1,0,L1[x1]);k1.err="mp3 fix error: 已还原，错误原因不明"}var b1=k1.trimFix={};b1.remove=a1,b1.removeDuration=Math.round(a1*k1.frameDurationFloat),b1.duration=Math.round(8*i1/k1.bitRate)}return k1}},K1=function(V,i1){var w1="MP3 Info: ";(V.sampleRate&&V.sampleRate!=i1.sampleRate||V.bitRate&&V.bitRate!=i1.bitRate)&&(_1.CLog(w1+o1("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+i1.bitRate+"kbps "+i1.sampleRate+"hz","set:"+V.bitRate+"kbps "+V.sampleRate+"hz"),3,i1),i1.sampleRate=V.sampleRate,i1.bitRate=V.bitRate);var m1=V.trimFix;m1?(w1+=o1("iMSm::Fix移除{1}帧",0,m1.remove)+" "+m1.removeDuration+"ms -> "+m1.duration+"ms",2<m1.remove&&(V.err=(V.err?V.err+", ":"")+o1("b9zm::移除帧数过多"))):w1+=(V.duration||"-")+"ms",V.err?_1.CLog(w1,V.size?1:0,V.err,V):_1.CLog(w1,V)}})(G1,0,J.$T,j1)}(),function(C1){function j1(){var G1=function(I){return Math.log(I)/Math.log(10)},J=function(I){throw new Error("abort("+I+")")};function _1(I){return new Int8Array(I)}function W1(I){return new Int16Array(I)}function o1(I){return new Int32Array(I)}function r1(I){return new Float32Array(I)}function Q(I){return new Float64Array(I)}function E1(I){if(I.length==1)return r1(I[0]);var K=I[0];I=I.slice(1);for(var X=[],D=0;D<K;D++)X.push(E1(I));return X}function D1(I){if(I.length==1)return o1(I[0]);var K=I[0];I=I.slice(1);for(var X=[],D=0;D<K;D++)X.push(D1(I));return X}function y1(I){if(I.length==1)return W1(I[0]);var K=I[0];I=I.slice(1);for(var X=[],D=0;D<K;D++)X.push(y1(I));return X}function H1(I){if(I.length==1)return new Array(I[0]);var K=I[0];I=I.slice(1);for(var X=[],D=0;D<K;D++)X.push(H1(I));return X}var V1={fill:function(I,K,X,D){if(arguments.length==2)for(var f1=0;f1<I.length;f1++)I[f1]=K;else for(var f1=K;f1<X;f1++)I[f1]=D}},g1={arraycopy:function(I,K,X,D,f1){for(var l=K+f1;K<l;)X[D++]=I[K++]}},p1={};function F1(I){this.ordinal=I}p1.SQRT2=1.4142135623730951,p1.FAST_LOG10=function(I){return G1(I)},p1.FAST_LOG10_X=function(I,K){return G1(I)*K},F1.short_block_allowed=new F1(0),F1.short_block_coupled=new F1(1),F1.short_block_dispensed=new F1(2),F1.short_block_forced=new F1(3);var K1={};function V(I){this.ordinal=I}function i1(I){var K=I;this.ordinal=function(){return K}}function w1(){var I=null;function K(e){this.bits=0|e}this.qupvt=null,this.setModules=function(e){this.qupvt=e,I=e};var X=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function D(e,r,n,s,a,u){var p=.5946/r;for(e>>=1;e--!=0;)a[u++]=p>n[s++]?0:1,a[u++]=p>n[s++]?0:1}function f1(e,r,n,s,a,u){var p=(e>>=1)%2;for(e>>=1;e--!=0;){var c,f,o,_,m,h,g,T;c=n[s++]*r,f=n[s++]*r,m=0|c,o=n[s++]*r,h=0|f,_=n[s++]*r,g=0|o,c+=I.adj43[m],T=0|_,f+=I.adj43[h],a[u++]=0|c,o+=I.adj43[g],a[u++]=0|f,_+=I.adj43[T],a[u++]=0|o,a[u++]=0|_}p!=0&&(c=n[s++]*r,f=n[s++]*r,m=0|c,h=0|f,c+=I.adj43[m],f+=I.adj43[h],a[u++]=0|c,a[u++]=0|f)}var l=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function w(e,r,n,s){var a=function(c,f,o){var _=0,m=0;do{var h=c[f++],g=c[f++];_<h&&(_=h),m<g&&(m=g)}while(f<o);return _<m&&(_=m),_}(e,r,n);switch(a){case 0:return a;case 1:return function(c,f,o,_){var m=0,h=x.ht[1].hlen;do{var g=2*c[f+0]+c[f+1];f+=2,m+=h[g]}while(f<o);return _.bits+=m,1}(e,r,n,s);case 2:case 3:return function(c,f,o,_,m){var h,g,T=0,R=x.ht[_].xlen;g=_==2?x.table23:x.table56;do{var O=c[f+0]*R+c[f+1];f+=2,T+=g[O]}while(f<o);return(h=65535&T)<(T>>=16)&&(T=h,_++),m.bits+=T,_}(e,r,n,l[a-1],s);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return function(c,f,o,_,m){var h=0,g=0,T=0,R=x.ht[_].xlen,O=x.ht[_].hlen,C=x.ht[_+1].hlen,S=x.ht[_+2].hlen;do{var d=c[f+0]*R+c[f+1];f+=2,h+=O[d],g+=C[d],T+=S[d]}while(f<o);var k=_;return g<h&&(h=g,k++),T<h&&(h=T,k=_+2),m.bits+=h,k}(e,r,n,l[a-1],s);default:var u,p;for(M1.IXMAX_VAL<a&&J(),a-=15,u=24;u<32&&!(x.ht[u].linmax>=a);u++);for(p=u-8;p<24&&!(x.ht[p].linmax>=a);p++);return function(c,f,o,_,m,h){var g,T=65536*x.ht[_].xlen+x.ht[m].xlen,R=0;do{var O=c[f++],C=c[f++];O!=0&&(14<O&&(O=15,R+=T),O*=16),C!=0&&(14<C&&(C=15,R+=T),O+=C),R+=x.largetbl[O]}while(f<o);return(g=65535&R)<(R>>=16)&&(R=g,_=m),h.bits+=R,_}(e,r,n,p,u,s)}}function b(e,r,n,s,a,u,p,c){for(var f=r.big_values,o=2;o<v.SBMAX_l+1;o++){var _=e.scalefac_band.l[o];if(f<=_)break;var m=a[o-2]+r.count1bits;if(n.part2_3_length<=m)break;var h=new K(m),g=w(s,_,f,h);m=h.bits,n.part2_3_length<=m||(n.assign(r),n.part2_3_length=m,n.region0_count=u[o-2],n.region1_count=o-2-u[o-2],n.table_select[0]=p[o-2],n.table_select[1]=c[o-2],n.table_select[2]=g)}}this.noquant_count_bits=function(e,r,n){var s=r.l3_enc,a=Math.min(576,r.max_nonzero_coeff+2>>1<<1);for(n!=null&&(n.sfb_count1=0);1<a&&!(s[a-1]|s[a-2]);a-=2);r.count1=a;for(var u=0,p=0;3<a;a-=4){var c;if(1<(2147483647&(s[a-1]|s[a-2]|s[a-3]|s[a-4])))break;c=2*(2*(2*s[a-4]+s[a-3])+s[a-2])+s[a-1],u+=x.t32l[c],p+=x.t33l[c]}var f=u;if(r.count1table_select=0,p<u&&(f=p,r.count1table_select=1),r.count1bits=f,(r.big_values=a)==0)return f;if(r.block_type==v.SHORT_TYPE)(u=3*e.scalefac_band.s[3])>r.big_values&&(u=r.big_values),p=r.big_values;else if(r.block_type==v.NORM_TYPE){if(u=r.region0_count=e.bv_scf[a-2],p=r.region1_count=e.bv_scf[a-1],p=e.scalefac_band.l[u+p+2],u=e.scalefac_band.l[u+1],p<a){var o=new K(f);r.table_select[2]=w(s,p,a,o),f=o.bits}}else r.region0_count=7,r.region1_count=v.SBMAX_l-1-7-1,u=e.scalefac_band.l[8],(p=a)<u&&(u=p);if(u=Math.min(u,a),p=Math.min(p,a),0<u){var o=new K(f);r.table_select[0]=w(s,0,u,o),f=o.bits}if(u<p){var o=new K(f);r.table_select[1]=w(s,u,p,o),f=o.bits}if(e.use_best_huffman==2&&J(),n!=null&&r.block_type==v.NORM_TYPE){for(var _=0;e.scalefac_band.l[_]<r.big_values;)_++;n.sfb_count1=_}return f},this.count_bits=function(e,r,n,s){var a=n.l3_enc,u=M1.IXMAX_VAL/I.IPOW20(n.global_gain);return n.xrpow_max>u?M1.LARGE_BITS:(function(p,c,f,o,_){var m,h,g,T=0,R=0,O=0,C=0,S=c,d=0,k=S,N=0,F=p,B=0;for(g=_!=null&&o.global_gain==_.global_gain,h=o.block_type==v.SHORT_TYPE?38:21,m=0;m<=h;m++){var E=-1;if((g||o.block_type==v.NORM_TYPE)&&(E=o.global_gain-(o.scalefac[m]+(o.preflag!=0?I.pretab[m]:0)<<o.scalefac_scale+1)-8*o.subblock_gain[o.window[m]]),g&&_.step[m]==E)R!=0&&(f1(R,f,F,B,k,N),R=0),O!=0&&J();else{var P,H=o.width[m];if(T+o.width[m]>o.max_nonzero_coeff&&(P=o.max_nonzero_coeff-T+1,V1.fill(c,o.max_nonzero_coeff,576,0),(H=P)<0&&(H=0),m=h+1),R==0&&O==0&&(k=S,N=d,F=p,B=C),_!=null&&0<_.sfb_count1&&m>=_.sfb_count1&&0<_.step[m]&&E>=_.step[m]?(R!=0&&(f1(R,f,F,B,k,N),R=0,k=S,N=d,F=p,B=C),O+=H):(O!=0&&(D(O,f,F,B,k,N),O=0,k=S,N=d,F=p,B=C),R+=H),H<=0){O!=0&&J(),R!=0&&J();break}}m<=h&&(d+=o.width[m],C+=o.width[m],T+=o.width[m])}R!=0&&(f1(R,f,F,B,k,N),R=0),O!=0&&J()}(r,a,I.IPOW20(n.global_gain),n,s),2&e.substep_shaping&&J(),this.noquant_count_bits(e,n,s))},this.best_huffman_divide=function(e,r){var n=new A1,s=r.l3_enc,a=o1(23),u=o1(23),p=o1(23),c=o1(23);if(r.block_type!=v.SHORT_TYPE||e.mode_gr!=1){n.assign(r),r.block_type==v.NORM_TYPE&&(function(g,T,R,O,C,S,d){for(var k=T.big_values,N=0;N<=22;N++)O[N]=M1.LARGE_BITS;for(var N=0;N<16;N++){var F=g.scalefac_band.l[N+1];if(k<=F)break;var B=0,E=new K(B),P=w(R,0,F,E);B=E.bits;for(var H=0;H<8;H++){var z=g.scalefac_band.l[N+H+2];if(k<=z)break;var $=B;E=new K($);var q=w(R,F,z,E);$=E.bits,O[N+H]>$&&(O[N+H]=$,C[N+H]=N,S[N+H]=P,d[N+H]=q)}}}(e,r,s,a,u,p,c),b(e,n,r,s,a,u,p,c));var f=n.big_values;if(!(f==0||1<(s[f-2]|s[f-1])||576<(f=r.count1+2))){n.assign(r),n.count1=f;for(var o=0,_=0;f>n.big_values;f-=4){var m=2*(2*(2*s[f-4]+s[f-3])+s[f-2])+s[f-1];o+=x.t32l[m],_+=x.t33l[m]}if(n.big_values=f,n.count1table_select=0,_<o&&(o=_,n.count1table_select=1),n.count1bits=o,n.block_type==v.NORM_TYPE)b(e,n,r,s,a,u,p,c);else{if(n.part2_3_length=o,o=e.scalefac_band.l[8],f<o&&(o=f),0<o){var h=new K(n.part2_3_length);n.table_select[0]=w(s,0,o,h),n.part2_3_length=h.bits}if(o<f){var h=new K(n.part2_3_length);n.table_select[1]=w(s,o,f,h),n.part2_3_length=h.bits}r.part2_3_length>n.part2_3_length&&r.assign(n)}}}};var y=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],i=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],M=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],L=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];w1.slen1_tab=M,w1.slen2_tab=L,this.best_scalefac_store=function(e,r,n,s){var a,u,p,c,f=s.tt[r][n],o=0;for(a=p=0;a<f.sfbmax;a++){var _=f.width[a];for(p+=_,c=-_;c<0&&f.l3_enc[c+p]==0;c++);c==0&&(f.scalefac[a]=o=-2)}if(f.scalefac_scale==0&&f.preflag==0){var m=0;for(a=0;a<f.sfbmax;a++)0<f.scalefac[a]&&(m|=f.scalefac[a]);if(!(1&m)&&m!=0){for(a=0;a<f.sfbmax;a++)0<f.scalefac[a]&&(f.scalefac[a]>>=1);f.scalefac_scale=o=1}}if(f.preflag==0&&f.block_type!=v.SHORT_TYPE&&e.mode_gr==2){for(a=11;a<v.SBPSY_l&&!(f.scalefac[a]<I.pretab[a]&&f.scalefac[a]!=-2);a++);if(a==v.SBPSY_l){for(a=11;a<v.SBPSY_l;a++)0<f.scalefac[a]&&(f.scalefac[a]-=I.pretab[a]);f.preflag=o=1}}for(u=0;u<4;u++)s.scfsi[n][u]=0;for(e.mode_gr==2&&r==1&&s.tt[0][n].block_type!=v.SHORT_TYPE&&s.tt[1][n].block_type!=v.SHORT_TYPE&&(function(h,g){for(var T,R=g.tt[1][h],O=g.tt[0][h],C=0;C<x.scfsi_band.length-1;C++){for(T=x.scfsi_band[C];T<x.scfsi_band[C+1]&&!(O.scalefac[T]!=R.scalefac[T]&&0<=R.scalefac[T]);T++);if(T==x.scfsi_band[C+1]){for(T=x.scfsi_band[C];T<x.scfsi_band[C+1];T++)R.scalefac[T]=-1;g.scfsi[h][C]=1}}var S=0,d=0;for(T=0;T<11;T++)R.scalefac[T]!=-1&&(d++,S<R.scalefac[T]&&(S=R.scalefac[T]));for(var k=0,N=0;T<v.SBPSY_l;T++)R.scalefac[T]!=-1&&(N++,k<R.scalefac[T]&&(k=R.scalefac[T]));for(var C=0;C<16;C++)if(S<y[C]&&k<i[C]){var F=M[C]*d+L[C]*N;R.part2_length>F&&(R.part2_length=F,R.scalefac_compress=C)}}(n,s),o=0),a=0;a<f.sfbmax;a++)f.scalefac[a]==-2&&(f.scalefac[a]=0);o!=0&&(e.mode_gr==2?this.scale_bitcount(f):this.scale_bitcount_lsf(e,f))};var e1=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],j=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],Y=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(e){var r,n,s,a=0,u=0,p=e.scalefac;if(e.block_type==v.SHORT_TYPE)s=e1,e.mixed_block_flag!=0&&(s=j);else if(s=Y,e.preflag==0){for(n=11;n<v.SBPSY_l&&!(p[n]<I.pretab[n]);n++);if(n==v.SBPSY_l)for(e.preflag=1,n=11;n<v.SBPSY_l;n++)p[n]-=I.pretab[n]}for(n=0;n<e.sfbdivide;n++)a<p[n]&&(a=p[n]);for(;n<e.sfbmax;n++)u<p[n]&&(u=p[n]);for(e.part2_length=M1.LARGE_BITS,r=0;r<16;r++)a<y[r]&&u<i[r]&&e.part2_length>s[r]&&(e.part2_length=s[r],e.scalefac_compress=r);return e.part2_length==M1.LARGE_BITS};var A=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(e,r){var n,s,a,u,p,c,f,o,_=o1(4),m=r.scalefac;for(n=r.preflag!=0?2:0,f=0;f<4;f++)_[f]=0;if(r.block_type==v.SHORT_TYPE){s=1;var h=I.nr_of_sfb_block[n][s];for(a=o=0;a<4;a++)for(u=h[a]/3,f=0;f<u;f++,o++)for(p=0;p<3;p++)m[3*o+p]>_[a]&&(_[a]=m[3*o+p])}else{s=0;var h=I.nr_of_sfb_block[n][s];for(a=o=0;a<4;a++)for(u=h[a],f=0;f<u;f++,o++)m[o]>_[a]&&(_[a]=m[o])}for(c=!1,a=0;a<4;a++)_[a]>A[n][a]&&(c=!0);if(!c){var g,T,R,O;for(r.sfb_partition_table=I.nr_of_sfb_block[n][s],a=0;a<4;a++)r.slen[a]=t[_[a]];switch(g=r.slen[0],T=r.slen[1],R=r.slen[2],O=r.slen[3],n){case 0:r.scalefac_compress=(5*g+T<<4)+(R<<2)+O;break;case 1:r.scalefac_compress=400+(5*g+T<<2)+R;break;case 2:r.scalefac_compress=500+3*g+T}}if(!c)for(r.part2_length=0,a=0;a<4;a++)r.part2_length+=r.slen[a]*r.sfb_partition_table[a];return c};var t=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var r=2;r<=576;r+=2){for(var n,s=0;e.scalefac_band.l[++s]<r;);for(n=X[s][0];e.scalefac_band.l[n+1]>r;)n--;for(n<0&&(n=X[s][0]),e.bv_scf[r-2]=n,n=X[s][1];e.scalefac_band.l[n+e.bv_scf[r-2]+2]>r;)n--;n<0&&(n=X[s][1]),e.bv_scf[r-1]=n}}}function m1(){}function k1(){this.setModules=function(K,X,D){};var I=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.updateMusicCRC=function(K,X,D,f1){for(var l=0;l<f1;++l)K[0]=(w=X[D+l],b=(b=K[0])>>8^I[255&(b^w)]);var w,b}}function S1(){var I=this,K=null,X=null;this.setModules=function(t,e,r,n){K=r,X=n};var D=null,f1=0,l=0,w=0;function b(t,e,r){for(;0<r;){var n;w==0&&(w=8,l++,t.header[t.w_ptr].write_timing==f1&&(s=t,g1.arraycopy(s.header[s.w_ptr].buf,0,D,l,s.sideinfo_len),l+=s.sideinfo_len,f1+=8*s.sideinfo_len,s.w_ptr=s.w_ptr+1&d1.MAX_HEADER_BUF-1),D[l]=0),n=Math.min(r,w),r-=n,w-=n,D[l]|=e>>r<<w,f1+=n}var s}function y(t,e){var r,n=t.internal_flags;if(8<=e&&(b(n,76,8),e-=8),8<=e&&(b(n,65,8),e-=8),8<=e&&(b(n,77,8),e-=8),8<=e&&(b(n,69,8),e-=8),32<=e){var s=K.getLameShortVersion();if(32<=e)for(r=0;r<s.length&&8<=e;++r)e-=8,b(n,s.charCodeAt(r),8)}for(;1<=e;e-=1)b(n,n.ancillary_flag,1),n.ancillary_flag^=t.disable_reservoir?0:1}function i(t,e,r){for(var n=t.header[t.h_ptr].ptr;0<r;){var s=Math.min(r,8-(7&n));r-=s,t.header[t.h_ptr].buf[n>>3]|=e>>r<<8-(7&n)-s,n+=s}t.header[t.h_ptr].ptr=n}function M(t,e){var r,n=x.ht[e.count1table_select+32],s=0,a=e.big_values,u=e.big_values;for(r=(e.count1-e.big_values)/4;0<r;--r){var p=0,c=0;e.l3_enc[a+0]!=0&&(c+=8,e.xr[u+0]<0&&p++),e.l3_enc[a+1]!=0&&(c+=4,p*=2,e.xr[u+1]<0&&p++),e.l3_enc[a+2]!=0&&(c+=2,p*=2,e.xr[u+2]<0&&p++),e.l3_enc[a+3]!=0&&(c++,p*=2,e.xr[u+3]<0&&p++),a+=4,u+=4,b(t,p+n.table[c],n.hlen[c]),s+=n.hlen[c]}return s}function L(t,e,r,n,s){var a=x.ht[e],u=0;if(e==0)return u;for(var p=r;p<n;p+=2){var c=0,f=0,o=a.xlen,_=a.xlen,m=0,h=s.l3_enc[p],g=s.l3_enc[p+1];if(h!=0&&(s.xr[p]<0&&m++,c--),15<e){if(14<h){var T=h-15;m|=T<<1,f=o,h=15}if(14<g){var R=g-15;m<<=o,m|=R,f+=o,g=15}_=16}g!=0&&(m<<=1,s.xr[p+1]<0&&m++,c--),h=h*_+g,f-=c,c+=a.hlen[h],b(t,a.table[h],c),b(t,m,f),u+=c+f}return u}function e1(t,e){var r=3*t.scalefac_band.s[3];r>e.big_values&&(r=e.big_values);var n=L(t,e.table_select[0],0,r,e);return n+=L(t,e.table_select[1],r,e.big_values,e)}function j(t,e){var r,n,s,a;r=e.big_values;var u=e.region0_count+1;return s=t.scalefac_band.l[u],u+=e.region1_count+1,a=t.scalefac_band.l[u],r<s&&(s=r),r<a&&(a=r),n=L(t,e.table_select[0],0,s,e),n+=L(t,e.table_select[1],s,a,e),n+=L(t,e.table_select[2],a,r,e)}function Y(){this.total=0}function A(t,e){var r,n,s,a=t.internal_flags;return a.w_ptr,(s=a.h_ptr-1)==-1&&(s=d1.MAX_HEADER_BUF-1),r=a.header[s].write_timing-f1,0<=(e.total=r)&&J(),n=I.getframebits(t),r+=n,e.total+=n,e.total%8!=0?e.total=1+e.total/8:e.total=e.total/8,e.total+=l+1,r}this.getframebits=function(t){var e,r=t.internal_flags;e=r.bitrate_index!=0?x.bitrate_table[t.version][r.bitrate_index]:t.brate;var n=0|72e3*(t.version+1)*e/t.out_samplerate+r.padding;return 8*n},this.flush_bitstream=function(t){var e,r,n=t.internal_flags;n.h_ptr-1,e=n.l3_side,(r=A(t,new Y))<0||(y(t,r),n.ResvSize=0,e.main_data_begin=0,n.findReplayGain&&J(),n.findPeakSample&&J())},this.format_bitstream=function(t){var e,r=t.internal_flags;e=r.l3_side;var n=this.getframebits(t);y(t,e.resvDrain_pre),function(u,p){var c,f,o,_=u.internal_flags;if(c=_.l3_side,_.header[_.h_ptr].ptr=0,V1.fill(_.header[_.h_ptr].buf,0,_.sideinfo_len,0),u.out_samplerate<16e3?i(_,4094,12):i(_,4095,12),i(_,u.version,1),i(_,1,2),i(_,u.error_protection?0:1,1),i(_,_.bitrate_index,4),i(_,_.samplerate_index,2),i(_,_.padding,1),i(_,u.extension,1),i(_,u.mode.ordinal(),2),i(_,_.mode_ext,2),i(_,u.copyright,1),i(_,u.original,1),i(_,u.emphasis,2),u.error_protection&&i(_,0,16),u.version==1){for(i(_,c.main_data_begin,9),_.channels_out==2?i(_,c.private_bits,3):i(_,c.private_bits,5),o=0;o<_.channels_out;o++){var m;for(m=0;m<4;m++)i(_,c.scfsi[o][m],1)}for(f=0;f<2;f++)for(o=0;o<_.channels_out;o++){var h=c.tt[f][o];i(_,h.part2_3_length+h.part2_length,12),i(_,h.big_values/2,9),i(_,h.global_gain,8),i(_,h.scalefac_compress,4),h.block_type!=v.NORM_TYPE?(i(_,1,1),i(_,h.block_type,2),i(_,h.mixed_block_flag,1),h.table_select[0]==14&&(h.table_select[0]=16),i(_,h.table_select[0],5),h.table_select[1]==14&&(h.table_select[1]=16),i(_,h.table_select[1],5),i(_,h.subblock_gain[0],3),i(_,h.subblock_gain[1],3),i(_,h.subblock_gain[2],3)):(i(_,0,1),h.table_select[0]==14&&(h.table_select[0]=16),i(_,h.table_select[0],5),h.table_select[1]==14&&(h.table_select[1]=16),i(_,h.table_select[1],5),h.table_select[2]==14&&(h.table_select[2]=16),i(_,h.table_select[2],5),i(_,h.region0_count,4),i(_,h.region1_count,3)),i(_,h.preflag,1),i(_,h.scalefac_scale,1),i(_,h.count1table_select,1)}}else for(i(_,c.main_data_begin,8),i(_,c.private_bits,_.channels_out),o=f=0;o<_.channels_out;o++){var h=c.tt[f][o];i(_,h.part2_3_length+h.part2_length,12),i(_,h.big_values/2,9),i(_,h.global_gain,8),i(_,h.scalefac_compress,9),h.block_type!=v.NORM_TYPE?(i(_,1,1),i(_,h.block_type,2),i(_,h.mixed_block_flag,1),h.table_select[0]==14&&(h.table_select[0]=16),i(_,h.table_select[0],5),h.table_select[1]==14&&(h.table_select[1]=16),i(_,h.table_select[1],5),i(_,h.subblock_gain[0],3),i(_,h.subblock_gain[1],3),i(_,h.subblock_gain[2],3)):(i(_,0,1),h.table_select[0]==14&&(h.table_select[0]=16),i(_,h.table_select[0],5),h.table_select[1]==14&&(h.table_select[1]=16),i(_,h.table_select[1],5),h.table_select[2]==14&&(h.table_select[2]=16),i(_,h.table_select[2],5),i(_,h.region0_count,4),i(_,h.region1_count,3)),i(_,h.scalefac_scale,1),i(_,h.count1table_select,1)}u.error_protection&&J();var g=_.h_ptr;_.h_ptr=g+1&d1.MAX_HEADER_BUF-1,_.header[_.h_ptr].write_timing=_.header[g].write_timing+p,_.h_ptr,_.w_ptr}(t,n);var s=8*r.sideinfo_len;if(s+=function(u){var p,c,f,o,_=0,m=u.internal_flags,h=m.l3_side;if(u.version==1)for(p=0;p<2;p++)for(c=0;c<m.channels_out;c++){var g=h.tt[p][c],T=w1.slen1_tab[g.scalefac_compress],R=w1.slen2_tab[g.scalefac_compress];for(f=o=0;f<g.sfbdivide;f++)g.scalefac[f]!=-1&&(b(m,g.scalefac[f],T),o+=T);for(;f<g.sfbmax;f++)g.scalefac[f]!=-1&&(b(m,g.scalefac[f],R),o+=R);g.block_type==v.SHORT_TYPE?o+=e1(m,g):o+=j(m,g),o+=M(m,g),_+=o}else for(c=p=0;c<m.channels_out;c++){var O,C,g=h.tt[p][c],S=0;if(C=f=o=0,g.block_type==v.SHORT_TYPE){for(;C<4;C++){var d=g.sfb_partition_table[C]/3,k=g.slen[C];for(O=0;O<d;O++,f++)b(m,Math.max(g.scalefac[3*f+0],0),k),b(m,Math.max(g.scalefac[3*f+1],0),k),b(m,Math.max(g.scalefac[3*f+2],0),k),S+=3*k}o+=e1(m,g)}else{for(;C<4;C++){var d=g.sfb_partition_table[C],k=g.slen[C];for(O=0;O<d;O++,f++)b(m,Math.max(g.scalefac[f],0),k),S+=k}o+=j(m,g)}o+=M(m,g),_+=S+o}return _}(t),y(t,e.resvDrain_post),s+=e.resvDrain_post,e.main_data_begin+=(n-s)/8,A(t,new Y),r.ResvSize,8*e.main_data_begin!=r.ResvSize&&(r.ResvSize=8*e.main_data_begin),1e9<f1){var a;for(a=0;a<d1.MAX_HEADER_BUF;++a)r.header[a].write_timing-=f1;f1=0}return 0},this.copy_buffer=function(t,e,r,n,s){var a=l+1;if(a<=0)return 0;if(n!=0&&n<a)return-1;if(g1.arraycopy(D,0,e,r,a),l=-1,(w=0)!=s){var u=o1(1);u[0]=t.nMusicCRC,X.updateMusicCRC(u,e,r,a),t.nMusicCRC=u[0],0<a&&(t.VBR_seek_table.nBytesWritten+=a),t.decode_on_the_fly&&J()}return a},this.init_bit_stream_w=function(t){D=_1(c1.LAME_MAXMP3BUFFER),t.h_ptr=t.w_ptr=0,t.header[t.h_ptr].write_timing=0,l=-1,f1=w=0}}function a1(I,K,X,D){this.xlen=I,this.linmax=K,this.table=X,this.hlen=D}K1.MAX_VALUE=34028235e31,V.vbr_off=new V(0),V.vbr_mt=new V(1),V.vbr_rh=new V(2),V.vbr_abr=new V(3),V.vbr_mtrh=new V(4),V.vbr_default=V.vbr_mtrh,i1.STEREO=new i1(0),i1.JOINT_STEREO=new i1(1),i1.DUAL_CHANNEL=new i1(2),i1.MONO=new i1(3),i1.NOT_SET=new i1(4),m1.STEPS_per_dB=100,m1.MAX_dB=120,m1.GAIN_NOT_ENOUGH_SAMPLES=-24601,m1.GAIN_ANALYSIS_ERROR=0,m1.GAIN_ANALYSIS_OK=1,m1.INIT_GAIN_ANALYSIS_ERROR=0,m1.INIT_GAIN_ANALYSIS_OK=1,m1.MAX_ORDER=m1.YULE_ORDER=10,m1.MAX_SAMPLES_PER_WINDOW=(m1.MAX_SAMP_FREQ=48e3)*(m1.RMS_WINDOW_TIME_NUMERATOR=1)/(m1.RMS_WINDOW_TIME_DENOMINATOR=20)+1,k1.NUMTOCENTRIES=100,k1.MAXFRAMESIZE=2880,S1.EQ=function(I,K){return Math.abs(I)>Math.abs(K)?Math.abs(I-K)<=1e-6*Math.abs(I):Math.abs(I-K)<=1e-6*Math.abs(K)},S1.NEQ=function(I,K){return!S1.EQ(I,K)};var x={};function I1(I){this.bits=I}function L1(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function x1(I,K,X,D){this.l=o1(1+v.SBMAX_l),this.s=o1(1+v.SBMAX_s),this.psfb21=o1(1+v.PSFB21),this.psfb12=o1(1+v.PSFB12);var f1=this.l,l=this.s;arguments.length==4&&(this.arrL=I,this.arrS=K,this.arr21=X,this.arr12=D,g1.arraycopy(this.arrL,0,f1,0,Math.min(this.arrL.length,this.l.length)),g1.arraycopy(this.arrS,0,l,0,Math.min(this.arrS.length,this.s.length)),g1.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),g1.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function M1(){var I=null,K=null,X=null;this.setModules=function(t,e,r){I=t,K=e,X=r},this.IPOW20=function(t){return L[t]};var D=2220446049250313e-31,f1=M1.IXMAX_VAL,l=f1+2,w=M1.Q_MAX,b=M1.Q_MAX2,y=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var i=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=i,this.sfBandIndex=[new x1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new x1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=r1(w+b+1),L=r1(w),e1=r1(l),j=r1(l);function Y(t,e){var r=X.ATHformula(e,t);return r-=y,r=Math.pow(10,r/10+t.ATHlower)}function A(t){this.s=t}this.adj43=j,this.iteration_init=function(t){var e,r=t.internal_flags,n=r.l3_side;if(r.iteration_init_init==0){for(r.iteration_init_init=1,n.main_data_begin=0,function(f){for(var o=f.internal_flags.ATH.l,_=f.internal_flags.ATH.psfb21,m=f.internal_flags.ATH.s,h=f.internal_flags.ATH.psfb12,g=f.internal_flags,T=f.out_samplerate,R=0;R<v.SBMAX_l;R++){var O=g.scalefac_band.l[R],C=g.scalefac_band.l[R+1];o[R]=K1.MAX_VALUE;for(var S=O;S<C;S++){var d=S*T/1152,k=Y(f,d);o[R]=Math.min(o[R],k)}}for(var R=0;R<v.PSFB21;R++){var O=g.scalefac_band.psfb21[R],C=g.scalefac_band.psfb21[R+1];_[R]=K1.MAX_VALUE;for(var S=O;S<C;S++){var d=S*T/1152,k=Y(f,d);_[R]=Math.min(_[R],k)}}for(var R=0;R<v.SBMAX_s;R++){var O=g.scalefac_band.s[R],C=g.scalefac_band.s[R+1];m[R]=K1.MAX_VALUE;for(var S=O;S<C;S++){var d=S*T/384,k=Y(f,d);m[R]=Math.min(m[R],k)}m[R]*=g.scalefac_band.s[R+1]-g.scalefac_band.s[R]}for(var R=0;R<v.PSFB12;R++){var O=g.scalefac_band.psfb12[R],C=g.scalefac_band.psfb12[R+1];h[R]=K1.MAX_VALUE;for(var S=O;S<C;S++){var d=S*T/384,k=Y(f,d);h[R]=Math.min(h[R],k)}h[R]*=g.scalefac_band.s[13]-g.scalefac_band.s[12]}f.noATH&&J(),g.ATH.floor=10*G1(Y(f,-1))}(t),e1[0]=0,e=1;e<l;e++)e1[e]=Math.pow(e,4/3);for(e=0;e<l-1;e++)j[e]=e+1-Math.pow(.5*(e1[e]+e1[e+1]),.75);for(j[e]=.5,e=0;e<w;e++)L[e]=Math.pow(2,-.1875*(e-210));for(e=0;e<=w+b;e++)M[e]=Math.pow(2,.25*(e-210-b));var s,a,u,p;for(I.huffman_init(r),32<=(e=t.exp_nspsytune>>2&63)&&(e-=64),s=Math.pow(10,e/4/10),32<=(e=t.exp_nspsytune>>8&63)&&(e-=64),a=Math.pow(10,e/4/10),32<=(e=t.exp_nspsytune>>14&63)&&(e-=64),u=Math.pow(10,e/4/10),32<=(e=t.exp_nspsytune>>20&63)&&(e-=64),p=u*Math.pow(10,e/4/10),e=0;e<v.SBMAX_l;e++)c=e<=6?s:e<=13?a:e<=20?u:p,r.nsPsy.longfact[e]=c;for(e=0;e<v.SBMAX_s;e++){var c;c=e<=5?s:e<=10?a:e<=11?u:p,r.nsPsy.shortfact[e]=c}}},this.on_pe=function(t,e,r,n,s,a){var u,p,c=t.internal_flags,f=0,o=o1(2),_=new I1(f),m=K.ResvMaxBits(t,n,_,a),h=(f=_.bits)+m;for(d1.MAX_BITS_PER_GRANULE<h&&(h=d1.MAX_BITS_PER_GRANULE),p=u=0;p<c.channels_out;++p)r[p]=Math.min(d1.MAX_BITS_PER_CHANNEL,f/c.channels_out),o[p]=0|r[p]*e[s][p]/700-r[p],o[p]>3*n/4&&(o[p]=3*n/4),o[p]<0&&(o[p]=0),o[p]+r[p]>d1.MAX_BITS_PER_CHANNEL&&(o[p]=Math.max(0,d1.MAX_BITS_PER_CHANNEL-r[p])),u+=o[p];if(m<u)for(p=0;p<c.channels_out;++p)o[p]=m*o[p]/u;for(p=0;p<c.channels_out;++p)r[p]+=o[p],m-=o[p];for(p=u=0;p<c.channels_out;++p)u+=r[p];return d1.MAX_BITS_PER_GRANULE<u&&J(),h},this.athAdjust=function(t,e,r){var n=90.30873362,s=p1.FAST_LOG10_X(e,10),a=t*t,u=0;return s-=r,1e-20<a&&(u=1+p1.FAST_LOG10_X(a,10/n)),u<0&&(u=0),s*=u,s+=r+n-94.82444863,Math.pow(10,.1*s)},this.calc_xmin=function(t,e,r,n){var s,a=0,u=t.internal_flags,p=0,c=0,f=u.ATH,o=r.xr,_=t.VBR==V.vbr_mtrh?1:0,m=u.masking_lower;for(t.VBR!=V.vbr_mtrh&&t.VBR!=V.vbr_mt||(m=1),s=0;s<r.psy_lmax;s++){for(d=t.VBR==V.vbr_rh||t.VBR==V.vbr_mtrh?athAdjust(f.adjust,f.l[s],f.floor):f.adjust*f.l[s],O=r.width[s],k=d/O,N=D,B=O>>1,F=0;E=o[p]*o[p],F+=E,N+=E<k?E:k,P=o[++p]*o[p],F+=P,N+=P<k?P:k,p++,0<--B;);if(d<F&&c++,s==v.SBPSY_l&&J(),_!=0&&(d=N),!t.ATHonly){var h=e.en.l[s];0<h&&(H=F*e.thm.l[s]*m/h,_!=0&&(H*=u.nsPsy.longfact[s]),d<H&&(d=H))}n[a++]=_!=0?d:d*u.nsPsy.longfact[s]}var g=575;if(r.block_type!=v.SHORT_TYPE)for(var T=576;T--!=0&&S1.EQ(o[T],0);)g=T;r.max_nonzero_coeff=g;for(var R=r.sfb_smin;s<r.psymax;R++,s+=3){var O,C,S;for(S=t.VBR==V.vbr_rh||t.VBR==V.vbr_mtrh?athAdjust(f.adjust,f.s[R],f.floor):f.adjust*f.s[R],O=r.width[s],C=0;C<3;C++){var d,k,N,F=0,B=O>>1;k=S/O,N=D;do{var E,P;E=o[p]*o[p],F+=E,N+=E<k?E:k,P=o[++p]*o[p],F+=P,N+=P<k?P:k,p++}while(0<--B);if(S<F&&c++,R==v.SBPSY_s&&J(),d=_!=0?N:S,!t.ATHonly&&!t.ATHshort){var H,h=e.en.s[R][C];0<h&&(H=F*e.thm.s[R][C]*m/h,_!=0&&(H*=u.nsPsy.shortfact[R]),d<H&&(d=H))}n[a++]=_!=0?d:d*u.nsPsy.shortfact[R]}t.useTemporal&&(n[a-3]>n[a-3+1]&&(n[a-3+1]+=(n[a-3]-n[a-3+1])*u.decay),n[a-3+1]>n[a-3+2]&&(n[a-3+2]+=(n[a-3+1]-n[a-3+2])*u.decay))}return c},this.calc_noise_core=function(t,e,r,n){var s=0,a=e.s,u=t.l3_enc;if(a>t.count1)for(;r--!=0;)c=t.xr[a],a++,s+=c*c,c=t.xr[a],a++,s+=c*c;else if(a>t.big_values){var p=r1(2);for(p[0]=0,p[1]=n;r--!=0;)c=Math.abs(t.xr[a])-p[u[a]],a++,s+=c*c,c=Math.abs(t.xr[a])-p[u[a]],a++,s+=c*c}else for(;r--!=0;){var c;c=Math.abs(t.xr[a])-e1[u[a]]*n,a++,s+=c*c,c=Math.abs(t.xr[a])-e1[u[a]]*n,a++,s+=c*c}return e.s=a,s},this.calc_noise=function(t,e,r,n,s){var a,u,p=0,c=0,f=0,o=0,_=0,m=-20,h=0,g=t.scalefac,T=0;for(n.over_SSD=0,a=0;a<t.psymax;a++){var R,O=t.global_gain-(g[T++]+(t.preflag!=0?i[a]:0)<<t.scalefac_scale+1)-8*t.subblock_gain[t.window[a]],C=0;if(s!=null&&s.step[a]==O)C=s.noise[a],h+=t.width[a],r[p++]=C/e[c++],C=s.noise_log[a];else{var S,d=M[O+M1.Q_MAX2];u=t.width[a]>>1,h+t.width[a]>t.max_nonzero_coeff&&(S=t.max_nonzero_coeff-h+1,u=0<S?S>>1:0);var k=new A(h);C=this.calc_noise_core(t,k,u,d),h=k.s,s!=null&&(s.step[a]=O,s.noise[a]=C),C=r[p++]=C/e[c++],C=p1.FAST_LOG10(Math.max(C,1e-20)),s!=null&&(s.noise_log[a]=C)}s!=null&&(s.global_gain=t.global_gain),_+=C,0<C&&(R=Math.max(0|10*C+.5,1),n.over_SSD+=R*R,f++,o+=C),m=Math.max(m,C)}return n.over_count=f,n.tot_noise=_,n.over_noise=o,n.max_noise=m,f}}function A1(){this.xr=r1(576),this.l3_enc=o1(576),this.scalefac=o1(b1.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=o1(3),this.subblock_gain=o1(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=o1(b1.SFBMAX),this.window=o1(b1.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=o1(4),this.max_nonzero_coeff=0;var I=this;function K(X){return new Int32Array(X)}this.assign=function(X){var D;I.xr=(D=X.xr,new Float32Array(D)),I.l3_enc=K(X.l3_enc),I.scalefac=K(X.scalefac),I.xrpow_max=X.xrpow_max,I.part2_3_length=X.part2_3_length,I.big_values=X.big_values,I.count1=X.count1,I.global_gain=X.global_gain,I.scalefac_compress=X.scalefac_compress,I.block_type=X.block_type,I.mixed_block_flag=X.mixed_block_flag,I.table_select=K(X.table_select),I.subblock_gain=K(X.subblock_gain),I.region0_count=X.region0_count,I.region1_count=X.region1_count,I.preflag=X.preflag,I.scalefac_scale=X.scalefac_scale,I.count1table_select=X.count1table_select,I.part2_length=X.part2_length,I.sfb_lmax=X.sfb_lmax,I.sfb_smin=X.sfb_smin,I.psy_lmax=X.psy_lmax,I.sfbmax=X.sfbmax,I.psymax=X.psymax,I.sfbdivide=X.sfbdivide,I.width=K(X.width),I.window=K(X.window),I.count1bits=X.count1bits,I.sfb_partition_table=X.sfb_partition_table.slice(0),I.slen=K(X.slen),I.max_nonzero_coeff=X.max_nonzero_coeff}}x.t1HB=[1,1,1,0],x.t2HB=[1,2,1,3,1,1,3,2,0],x.t3HB=[3,2,1,1,1,1,3,2,0],x.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],x.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],x.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],x.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],x.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],x.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],x.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],x.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],x.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],x.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],x.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],x.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],x.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],x.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],x.t1l=[1,4,3,5],x.t2l=[1,4,7,4,5,7,6,7,8],x.t3l=[2,3,7,4,4,7,6,7,8],x.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],x.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],x.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],x.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],x.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],x.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],x.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],x.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],x.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],x.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],x.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],x.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],x.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],x.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],x.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],x.ht=[new a1(0,0,null,null),new a1(2,0,x.t1HB,x.t1l),new a1(3,0,x.t2HB,x.t2l),new a1(3,0,x.t3HB,x.t3l),new a1(0,0,null,null),new a1(4,0,x.t5HB,x.t5l),new a1(4,0,x.t6HB,x.t6l),new a1(6,0,x.t7HB,x.t7l),new a1(6,0,x.t8HB,x.t8l),new a1(6,0,x.t9HB,x.t9l),new a1(8,0,x.t10HB,x.t10l),new a1(8,0,x.t11HB,x.t11l),new a1(8,0,x.t12HB,x.t12l),new a1(16,0,x.t13HB,x.t13l),new a1(0,0,null,x.t16_5l),new a1(16,0,x.t15HB,x.t15l),new a1(1,1,x.t16HB,x.t16l),new a1(2,3,x.t16HB,x.t16l),new a1(3,7,x.t16HB,x.t16l),new a1(4,15,x.t16HB,x.t16l),new a1(6,63,x.t16HB,x.t16l),new a1(8,255,x.t16HB,x.t16l),new a1(10,1023,x.t16HB,x.t16l),new a1(13,8191,x.t16HB,x.t16l),new a1(4,15,x.t24HB,x.t24l),new a1(5,31,x.t24HB,x.t24l),new a1(6,63,x.t24HB,x.t24l),new a1(7,127,x.t24HB,x.t24l),new a1(8,255,x.t24HB,x.t24l),new a1(9,511,x.t24HB,x.t24l),new a1(11,2047,x.t24HB,x.t24l),new a1(13,8191,x.t24HB,x.t24l),new a1(0,0,x.t32HB,x.t32l),new a1(0,0,x.t33HB,x.t33l)],x.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],x.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],x.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],x.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],x.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],x.scfsi_band=[0,6,11,16,21],M1.Q_MAX=257,M1.Q_MAX2=116,M1.LARGE_BITS=1e5,M1.IXMAX_VAL=8206;var b1={};function l1(){var I,K;this.rv=null,this.qupvt=null;var X,D=new function(){this.setModules=function(y,i){}};function f1(y){this.ordinal=y}function l(y){for(var i=0;i<y.sfbmax;i++)if(y.scalefac[i]+y.subblock_gain[y.window[i]]==0)return!1;return!0}function w(y,i,M,L,e1){var j;switch(y){default:case 9:0<i.over_count?(j=M.over_SSD<=i.over_SSD,M.over_SSD==i.over_SSD&&(j=M.bits<i.bits)):j=M.max_noise<0&&10*M.max_noise+M.bits<=10*i.max_noise+i.bits;break;case 0:j=M.over_count<i.over_count||M.over_count==i.over_count&&M.over_noise<i.over_noise||M.over_count==i.over_count&&S1.EQ(M.over_noise,i.over_noise)&&M.tot_noise<i.tot_noise;break;case 8:J();case 1:j=M.max_noise<i.max_noise;break;case 2:j=M.tot_noise<i.tot_noise;break;case 3:j=M.tot_noise<i.tot_noise&&M.max_noise<i.max_noise;break;case 4:j=M.max_noise<=0&&.2<i.max_noise||M.max_noise<=0&&i.max_noise<0&&i.max_noise>M.max_noise-.2&&M.tot_noise<i.tot_noise||M.max_noise<=0&&0<i.max_noise&&i.max_noise>M.max_noise-.2&&M.tot_noise<i.tot_noise+i.over_noise||0<M.max_noise&&-.05<i.max_noise&&i.max_noise>M.max_noise-.1&&M.tot_noise+M.over_noise<i.tot_noise+i.over_noise||0<M.max_noise&&-.1<i.max_noise&&i.max_noise>M.max_noise-.15&&M.tot_noise+M.over_noise+M.over_noise<i.tot_noise+i.over_noise+i.over_noise;break;case 5:j=M.over_noise<i.over_noise||S1.EQ(M.over_noise,i.over_noise)&&M.tot_noise<i.tot_noise;break;case 6:j=M.over_noise<i.over_noise||S1.EQ(M.over_noise,i.over_noise)&&(M.max_noise<i.max_noise||S1.EQ(M.max_noise,i.max_noise)&&M.tot_noise<=i.tot_noise);break;case 7:j=M.over_count<i.over_count||M.over_noise<i.over_noise}return i.over_count==0&&(j=j&&M.bits<i.bits),j}function b(y,i,M,L,e1){var j=y.internal_flags;(function(A,t,e,r,n){var s,a=A.internal_flags;s=t.scalefac_scale==0?1.2968395546510096:1.6817928305074292;for(var u=0,p=0;p<t.sfbmax;p++)u<e[p]&&(u=e[p]);var c=a.noise_shaping_amp;switch(c==3&&J(),c){case 2:break;case 1:1<u?u=Math.pow(u,.5):u*=.95;break;case 0:default:1<u?u=1:u*=.95}for(var f=0,p=0;p<t.sfbmax;p++){var o,_=t.width[p];if(f+=_,!(e[p]<u)){for(2&a.substep_shaping&&J(),t.scalefac[p]++,o=-_;o<0;o++)r[f+o]*=s,r[f+o]>t.xrpow_max&&(t.xrpow_max=r[f+o]);if(a.noise_shaping_amp==2)return}}})(y,i,M,L);var Y=l(i);return!(Y||(Y=j.mode_gr==2?X.scale_bitcount(i):X.scale_bitcount_lsf(j,i))&&(1<j.noise_shaping&&(V1.fill(j.pseudohalf,0),i.scalefac_scale==0?(function(A,t){for(var e=0,r=0;r<A.sfbmax;r++){var n=A.width[r],s=A.scalefac[r];if(A.preflag!=0&&(s+=K.pretab[r]),e+=n,(1&s)!=0){s++;for(var a=-n;a<0;a++)t[e+a]*=1.2968395546510096,t[e+a]>A.xrpow_max&&(A.xrpow_max=t[e+a])}A.scalefac[r]=s>>1}A.preflag=0,A.scalefac_scale=1}(i,L),Y=!1):i.block_type==v.SHORT_TYPE&&0<j.subblock_gain&&(Y=function(A,t,e){var r,n=t.scalefac;for(r=0;r<t.sfb_lmax;r++)if(16<=n[r])return!0;for(var s=0;s<3;s++){var a=0,u=0;for(r=t.sfb_lmax+s;r<t.sfbdivide;r+=3)a<n[r]&&(a=n[r]);for(;r<t.sfbmax;r+=3)u<n[r]&&(u=n[r]);if(!(a<16&&u<8)){if(7<=t.subblock_gain[s])return!0;t.subblock_gain[s]++;var p=A.scalefac_band.l[t.sfb_lmax];for(r=t.sfb_lmax+s;r<t.sfbmax;r+=3){var c=t.width[r],f=n[r];if(0<=(f-=4>>t.scalefac_scale))n[r]=f,p+=3*c;else{n[r]=0;var o=210+(f<<t.scalefac_scale+1);m=K.IPOW20(o),p+=c*(s+1);for(var _=-c;_<0;_++)e[p+_]*=m,e[p+_]>t.xrpow_max&&(t.xrpow_max=e[p+_]);p+=c*(3-s-1)}}var m=K.IPOW20(202);p+=t.width[r]*(s+1);for(var _=-t.width[r];_<0;_++)e[p+_]*=m,e[p+_]>t.xrpow_max&&(t.xrpow_max=e[p+_])}}return!1}(j,i,L)||l(i))),Y||(Y=j.mode_gr==2?X.scale_bitcount(i):X.scale_bitcount_lsf(j,i)),Y))}this.setModules=function(y,i,M,L){I=i,this.rv=i,K=M,this.qupvt=M,X=L,D.setModules(K,X)},this.init_xrpow=function(y,i,M){var L=0,e1=0|i.max_nonzero_coeff;if(i.xrpow_max=0,V1.fill(M,e1,576,0),1e-20<(L=function(A,t,e,r){for(var n=r=0;n<=e;++n){var s=Math.abs(A.xr[n]);r+=s,t[n]=Math.sqrt(s*Math.sqrt(s)),t[n]>A.xrpow_max&&(A.xrpow_max=t[n])}return r}(i,M,e1,L))){var j=0;2&y.substep_shaping&&(j=1);for(var Y=0;Y<i.psymax;Y++)y.pseudohalf[Y]=j;return!0}return V1.fill(i.l3_enc,0,576,0),!1},this.init_outer_loop=function(y,i){i.part2_3_length=0,i.big_values=0,i.count1=0,i.global_gain=210,i.scalefac_compress=0,i.table_select[0]=0,i.table_select[1]=0,i.table_select[2]=0,i.subblock_gain[0]=0,i.subblock_gain[1]=0,i.subblock_gain[2]=0,i.subblock_gain[3]=0,i.region0_count=0,i.region1_count=0,i.preflag=0,i.scalefac_scale=0,i.count1table_select=0,i.part2_length=0,i.sfb_lmax=v.SBPSY_l,i.sfb_smin=v.SBPSY_s,i.psy_lmax=y.sfb21_extra?v.SBMAX_l:v.SBPSY_l,i.psymax=i.psy_lmax,i.sfbmax=i.sfb_lmax,i.sfbdivide=11;for(var M=0;M<v.SBMAX_l;M++)i.width[M]=y.scalefac_band.l[M+1]-y.scalefac_band.l[M],i.window[M]=3;if(i.block_type==v.SHORT_TYPE){var L=r1(576);i.sfb_smin=0,(i.sfb_lmax=0)!=i.mixed_block_flag&&J(),i.psymax=i.sfb_lmax+3*((y.sfb21_extra?v.SBMAX_s:v.SBPSY_s)-i.sfb_smin),i.sfbmax=i.sfb_lmax+3*(v.SBPSY_s-i.sfb_smin),i.sfbdivide=i.sfbmax-18,i.psy_lmax=i.sfb_lmax;var e1=y.scalefac_band.l[i.sfb_lmax];g1.arraycopy(i.xr,0,L,0,576);for(var M=i.sfb_smin;M<v.SBMAX_s;M++)for(var j=y.scalefac_band.s[M],Y=y.scalefac_band.s[M+1],A=0;A<3;A++)for(var t=j;t<Y;t++)i.xr[e1++]=L[3*t+A];for(var e=i.sfb_lmax,M=i.sfb_smin;M<v.SBMAX_s;M++)i.width[e]=i.width[e+1]=i.width[e+2]=y.scalefac_band.s[M+1]-y.scalefac_band.s[M],i.window[e]=0,i.window[e+1]=1,i.window[e+2]=2,e+=3}i.count1bits=0,i.sfb_partition_table=K.nr_of_sfb_block[0][0],i.slen[0]=0,i.slen[1]=0,i.slen[2]=0,i.slen[3]=0,i.max_nonzero_coeff=575,V1.fill(i.scalefac,0),function(r,n){var s=r.ATH,a=n.xr;if(n.block_type!=v.SHORT_TYPE)for(var u=!1,p=v.PSFB21-1;0<=p&&!u;p--){var c=r.scalefac_band.psfb21[p],f=r.scalefac_band.psfb21[p+1],o=K.athAdjust(s.adjust,s.psfb21[p],s.floor);1e-12<r.nsPsy.longfact[21]&&(o*=r.nsPsy.longfact[21]);for(var _=f-1;c<=_;_--){if(!(Math.abs(a[_])<o)){u=!0;break}a[_]=0}}else for(var m=0;m<3;m++)for(var u=!1,p=v.PSFB12-1;0<=p&&!u;p--){var c=3*r.scalefac_band.s[12]+(r.scalefac_band.s[13]-r.scalefac_band.s[12])*m+(r.scalefac_band.psfb12[p]-r.scalefac_band.psfb12[0]),f=c+(r.scalefac_band.psfb12[p+1]-r.scalefac_band.psfb12[p]),h=K.athAdjust(s.adjust,s.psfb12[p],s.floor);1e-12<r.nsPsy.shortfact[12]&&(h*=r.nsPsy.shortfact[12]);for(var _=f-1;c<=_;_--){if(!(Math.abs(a[_])<h)){u=!0;break}a[_]=0}}}(y,i)},f1.BINSEARCH_NONE=new f1(0),f1.BINSEARCH_UP=new f1(1),f1.BINSEARCH_DOWN=new f1(2),this.outer_loop=function(y,i,M,L,e1,j){var Y=y.internal_flags,A=new A1,t=r1(576),e=r1(b1.SFBMAX),r=new L1,n=new function(){this.global_gain=0,this.sfb_count1=0,this.step=o1(39),this.noise=r1(39),this.noise_log=r1(39)},s=9999999,a=!1;if(function(_,m,h,g,T){var R,O=_.CurrentStep[g],C=!1,S=_.OldValue[g],d=f1.BINSEARCH_NONE;for(m.global_gain=S,h-=m.part2_length;;){var k;if(R=X.count_bits(_,T,m,null),O==1||R==h)break;h<R?(d==f1.BINSEARCH_DOWN&&(C=!0),C&&(O/=2),d=f1.BINSEARCH_UP,k=O):(d==f1.BINSEARCH_UP&&(C=!0),C&&(O/=2),d=f1.BINSEARCH_DOWN,k=-O),m.global_gain+=k,m.global_gain<0&&J(),255<m.global_gain&&J()}for(;h<R&&m.global_gain<255;)m.global_gain++,R=X.count_bits(_,T,m,null);_.CurrentStep[g]=4<=S-m.global_gain?4:2,_.OldValue[g]=m.global_gain,m.part2_3_length=R}(Y,i,j,e1,L),Y.noise_shaping==0)return 100;K.calc_noise(i,M,e,r,n),r.bits=i.part2_3_length,A.assign(i);var u=0;for(g1.arraycopy(L,0,t,0,576);!a;){do{var p,c=new L1,f=255;if(p=2&Y.substep_shaping?20:3,Y.sfb21_extra&&J(),!b(y,A,e,L))break;A.scalefac_scale!=0&&(f=254);var o=j-A.part2_length;if(o<=0)break;for(;(A.part2_3_length=X.count_bits(Y,L,A,n))>o&&A.global_gain<=f;)A.global_gain++;if(A.global_gain>f)break;if(r.over_count==0){for(;(A.part2_3_length=X.count_bits(Y,L,A,n))>s&&A.global_gain<=f;)A.global_gain++;if(A.global_gain>f)break}if(K.calc_noise(A,M,e,c,n),c.bits=A.part2_3_length,(w(i.block_type!=v.SHORT_TYPE?y.quant_comp:y.quant_comp_short,r,c)?1:0)!=0)s=i.part2_3_length,r=c,i.assign(A),u=0,g1.arraycopy(L,0,t,0,576);else if(Y.full_outer_loop==0){if(++u>p&&r.over_count==0)break;Y.noise_shaping_amp,Y.noise_shaping_amp}}while(A.global_gain+A.scalefac_scale<255);Y.noise_shaping_amp==3?J():a=!0}return y.VBR==V.vbr_rh||y.VBR==V.vbr_mtrh?g1.arraycopy(t,0,L,0,576):1&Y.substep_shaping&&J(),r.over_count},this.iteration_finish_one=function(y,i,M){var L=y.l3_side,e1=L.tt[i][M];X.best_scalefac_store(y,i,M,L),y.use_best_huffman==1&&X.best_huffman_divide(y,e1),I.ResvAdjust(y,e1)}}function N1(){this.thm=new v1,this.en=new v1}function v(){var I=v.MPG_MD_MS_LR,K=null,X=this.psy=null,D=null;this.setModules=function(l,w,b,y){K=l,this.psy=w,X=w,D=y};var f1=new function(){var l=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*p1.SQRT2*.5/2384e-9,.017876148*p1.SQRT2*.5/2384e-9,.003134727*p1.SQRT2*.5/2384e-9,.002457142*p1.SQRT2*.5/2384e-9,971317e-9*p1.SQRT2*.5/2384e-9,218868e-9*p1.SQRT2*.5/2384e-9,101566e-9*p1.SQRT2*.5/2384e-9,13828e-9*p1.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],w=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],b=w[v.SHORT_TYPE],y=w[v.SHORT_TYPE],i=w[v.SHORT_TYPE],M=w[v.SHORT_TYPE],L=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function e1(A,t,e){for(var r,n,s,a=10,u=t+238-14-286,p=-15;p<0;p++){var c,f,o;c=l[a+-10],f=A[u+-224]*c,o=A[t+224]*c,c=l[a+-9],f+=A[u+-160]*c,o+=A[t+160]*c,c=l[a+-8],f+=A[u+-96]*c,o+=A[t+96]*c,c=l[a+-7],f+=A[u+-32]*c,o+=A[t+32]*c,c=l[a+-6],f+=A[u+32]*c,o+=A[t+-32]*c,c=l[a+-5],f+=A[u+96]*c,o+=A[t+-96]*c,c=l[a+-4],f+=A[u+160]*c,o+=A[t+-160]*c,c=l[a+-3],f+=A[u+224]*c,o+=A[t+-224]*c,c=l[a+-2],f+=A[t+-256]*c,o-=A[u+256]*c,c=l[a+-1],f+=A[t+-192]*c,o-=A[u+192]*c,c=l[a+0],f+=A[t+-128]*c,o-=A[u+128]*c,c=l[a+1],f+=A[t+-64]*c,o-=A[u+64]*c,c=l[a+2],f+=A[t+0]*c,o-=A[u+0]*c,c=l[a+3],f+=A[t+64]*c,o-=A[u+-64]*c,c=l[a+4],f+=A[t+128]*c,o-=A[u+-128]*c,c=l[a+5],f+=A[t+192]*c,o-=A[u+-192]*c,f*=l[a+6],c=o-f,e[30+2*p]=o+f,e[31+2*p]=l[a+7]*c,a+=18,t--,u++}o=A[t+-16]*l[a+-10],f=A[t+-32]*l[a+-2],o+=(A[t+-48]-A[t+16])*l[a+-9],f+=A[t+-96]*l[a+-1],o+=(A[t+-80]+A[t+48])*l[a+-8],f+=A[t+-160]*l[a+0],o+=(A[t+-112]-A[t+80])*l[a+-7],f+=A[t+-224]*l[a+1],o+=(A[t+-144]+A[t+112])*l[a+-6],f-=A[t+32]*l[a+2],o+=(A[t+-176]-A[t+144])*l[a+-5],f-=A[t+96]*l[a+3],o+=(A[t+-208]+A[t+176])*l[a+-4],f-=A[t+160]*l[a+4],o+=(A[t+-240]-A[t+208])*l[a+-3],f-=A[t+224],r=f-o,n=f+o,o=e[14],f=e[15]-o,e[31]=n+o,e[30]=r+f,e[15]=r-f,e[14]=n-o,s=e[28]-e[0],e[0]+=e[28],e[28]=s*l[a+-36+7],s=e[29]-e[1],e[1]+=e[29],e[29]=s*l[a+-36+7],s=e[26]-e[2],e[2]+=e[26],e[26]=s*l[a+-72+7],s=e[27]-e[3],e[3]+=e[27],e[27]=s*l[a+-72+7],s=e[24]-e[4],e[4]+=e[24],e[24]=s*l[a+-108+7],s=e[25]-e[5],e[5]+=e[25],e[25]=s*l[a+-108+7],s=e[22]-e[6],e[6]+=e[22],e[22]=s*p1.SQRT2,s=e[23]-e[7],e[7]+=e[23],e[23]=s*p1.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],s=e[6],e[6]=e[31]-s,e[31]=e[31]+s,s=e[7],e[7]=e[30]-s,e[30]=e[30]+s,s=e[22],e[22]=e[15]-s,e[15]=e[15]+s,s=e[23],e[23]=e[14]-s,e[14]=e[14]+s,s=e[20]-e[8],e[8]+=e[20],e[20]=s*l[a+-180+7],s=e[21]-e[9],e[9]+=e[21],e[21]=s*l[a+-180+7],s=e[18]-e[10],e[10]+=e[18],e[18]=s*l[a+-216+7],s=e[19]-e[11],e[11]+=e[19],e[19]=s*l[a+-216+7],s=e[16]-e[12],e[12]+=e[16],e[16]=s*l[a+-252+7],s=e[17]-e[13],e[13]+=e[17],e[17]=s*l[a+-252+7],s=-e[20]+e[24],e[20]+=e[24],e[24]=s*l[a+-216+7],s=-e[21]+e[25],e[21]+=e[25],e[25]=s*l[a+-216+7],s=e[4]-e[8],e[4]+=e[8],e[8]=s*l[a+-216+7],s=e[5]-e[9],e[5]+=e[9],e[9]=s*l[a+-216+7],s=e[0]-e[12],e[0]+=e[12],e[12]=s*l[a+-72+7],s=e[1]-e[13],e[1]+=e[13],e[13]=s*l[a+-72+7],s=e[16]-e[28],e[16]+=e[28],e[28]=s*l[a+-72+7],s=-e[17]+e[29],e[17]+=e[29],e[29]=s*l[a+-72+7],s=p1.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=s,s=p1.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=s,s=p1.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=s-e[18],s=p1.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=s-e[19],s=e[2],e[19]-=e[3],e[3]-=s,e[2]=e[31]-s,e[31]+=s,s=e[3],e[11]-=e[19],e[18]-=s,e[3]=e[30]-s,e[30]+=s,s=e[18],e[27]-=e[11],e[19]-=s,e[18]=e[15]-s,e[15]+=s,s=e[19],e[10]-=s,e[19]=e[14]-s,e[14]+=s,s=e[10],e[11]-=s,e[10]=e[23]-s,e[23]+=s,s=e[11],e[26]-=s,e[11]=e[22]-s,e[22]+=s,s=e[26],e[27]-=s,e[26]=e[7]-s,e[7]+=s,s=e[27],e[27]=e[6]-s,e[6]+=s,s=p1.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=s,s=p1.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=s,s=p1.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=s,s=p1.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=s,s=-p1.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=s-e[8],s=-p1.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=s-e[9],s=-p1.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=s-e[25],s=-p1.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=s-e[24],s=e[24]-e[16],e[24]=s,s=e[20]-s,e[20]=s,s=e[28]-s,e[28]=s,s=e[25]-e[17],e[25]=s,s=e[21]-s,e[21]=s,s=e[29]-s,e[29]=s,s=e[17]-e[1],e[17]=s,s=e[9]-s,e[9]=s,s=e[25]-s,e[25]=s,s=e[5]-s,e[5]=s,s=e[21]-s,e[21]=s,s=e[13]-s,e[13]=s,s=e[29]-s,e[29]=s,s=e[1]-e[0],e[1]=s,s=e[16]-s,e[16]=s,s=e[17]-s,e[17]=s,s=e[8]-s,e[8]=s,s=e[9]-s,e[9]=s,s=e[24]-s,e[24]=s,s=e[25]-s,e[25]=s,s=e[4]-s,e[4]=s,s=e[5]-s,e[5]=s,s=e[20]-s,e[20]=s,s=e[21]-s,e[21]=s,s=e[12]-s,e[12]=s,s=e[13]-s,e[13]=s,s=e[28]-s,e[28]=s,s=e[29]-s,e[29]=s,s=e[0],e[0]+=e[31],e[31]-=s,s=e[1],e[1]+=e[30],e[30]-=s,s=e[16],e[16]+=e[15],e[15]-=s,s=e[17],e[17]+=e[14],e[14]-=s,s=e[8],e[8]+=e[23],e[23]-=s,s=e[9],e[9]+=e[22],e[22]-=s,s=e[24],e[24]+=e[7],e[7]-=s,s=e[25],e[25]+=e[6],e[6]-=s,s=e[4],e[4]+=e[27],e[27]-=s,s=e[5],e[5]+=e[26],e[26]-=s,s=e[20],e[20]+=e[11],e[11]-=s,s=e[21],e[21]+=e[10],e[10]-=s,s=e[12],e[12]+=e[19],e[19]-=s,s=e[13],e[13]+=e[18],e[18]-=s,s=e[28],e[28]+=e[3],e[3]-=s,s=e[29],e[29]+=e[2],e[2]-=s}function j(A,t){for(var e=0;e<3;e++){var r,n,s,a,u,p;a=A[t+6]*w[v.SHORT_TYPE][0]-A[t+15],r=A[t+0]*w[v.SHORT_TYPE][2]-A[t+9],n=a+r,s=a-r,a=A[t+15]*w[v.SHORT_TYPE][0]+A[t+6],r=A[t+9]*w[v.SHORT_TYPE][2]+A[t+0],u=a+r,p=-a+r,r=2069978111953089e-26*(A[t+3]*w[v.SHORT_TYPE][1]-A[t+12]),a=2069978111953089e-26*(A[t+12]*w[v.SHORT_TYPE][1]+A[t+3]),A[t+0]=190752519173728e-25*n+r,A[t+15]=190752519173728e-25*-u+a,s=.8660254037844387*s*1907525191737281e-26,u=.5*u*1907525191737281e-26+a,A[t+3]=s-u,A[t+6]=s+u,n=.5*n*1907525191737281e-26-r,p=.8660254037844387*p*1907525191737281e-26,A[t+9]=n+p,A[t+12]=n-p,t++}}function Y(A,t,e){var r,n,s,a,u,p,c,f,o,_,m,h,g,T,R,O,C,S;s=e[17]-e[9],u=e[15]-e[11],p=e[14]-e[12],c=e[0]+e[8],f=e[1]+e[7],o=e[2]+e[6],_=e[3]+e[5],A[t+17]=c+o-_-(f-e[4]),n=(c+o-_)*y[19]+(f-e[4]),r=(s-u-p)*y[18],A[t+5]=r+n,A[t+6]=r-n,a=(e[16]-e[10])*y[18],f=f*y[19]+e[4],r=s*y[12]+a+u*y[13]+p*y[14],n=-c*y[16]+f-o*y[17]+_*y[15],A[t+1]=r+n,A[t+2]=r-n,r=s*y[13]-a-u*y[14]+p*y[12],n=-c*y[17]+f-o*y[15]+_*y[16],A[t+9]=r+n,A[t+10]=r-n,r=s*y[14]-a+u*y[12]-p*y[13],n=c*y[15]-f+o*y[16]-_*y[17],A[t+13]=r+n,A[t+14]=r-n,m=e[8]-e[0],g=e[6]-e[2],T=e[5]-e[3],R=e[17]+e[9],O=e[16]+e[10],C=e[15]+e[11],S=e[14]+e[12],A[t+0]=R+C+S+(O+e[13]),r=(R+C+S)*y[19]-(O+e[13]),n=(m-g+T)*y[18],A[t+11]=r+n,A[t+12]=r-n,h=(e[7]-e[1])*y[18],O=e[13]-O*y[19],r=R*y[15]-O+C*y[16]+S*y[17],n=m*y[14]+h+g*y[12]+T*y[13],A[t+3]=r+n,A[t+4]=r-n,r=-R*y[17]+O-C*y[15]-S*y[16],n=m*y[13]+h-g*y[14]-T*y[12],A[t+7]=r+n,A[t+8]=r-n,r=-R*y[16]+O-C*y[17]-S*y[15],n=m*y[12]-h+g*y[13]-T*y[14],A[t+15]=r+n,A[t+16]=r-n}this.mdct_sub48=function(A,t,e){for(var r=t,n=286,s=0;s<A.channels_out;s++){for(var a=0;a<A.mode_gr;a++){for(var u,p=A.l3_side.tt[a][s],c=p.xr,f=0,o=A.sb_sample[s][1-a],_=0,m=0;m<9;m++)for(e1(r,n,o[_]),e1(r,n+32,o[_+1]),_+=2,n+=64,u=1;u<32;u+=2)o[_-1][u]*=-1;for(u=0;u<32;u++,f+=18){var h=p.block_type,g=A.sb_sample[s][a],T=A.sb_sample[s][1-a];if(p.mixed_block_flag!=0&&u<2&&(h=0),A.amp_filter[u]<1e-12)V1.fill(c,f+0,f+18,0);else if(A.amp_filter[u]<1&&J(),h==v.SHORT_TYPE){for(var m=-3;m<0;m++){var R=w[v.SHORT_TYPE][m+3];c[f+3*m+9]=g[9+m][L[u]]*R-g[8-m][L[u]],c[f+3*m+18]=g[14-m][L[u]]*R+g[15+m][L[u]],c[f+3*m+10]=g[15+m][L[u]]*R-g[14-m][L[u]],c[f+3*m+19]=T[2-m][L[u]]*R+T[3+m][L[u]],c[f+3*m+11]=T[3+m][L[u]]*R-T[2-m][L[u]],c[f+3*m+20]=T[8-m][L[u]]*R+T[9+m][L[u]]}j(c,f)}else{for(var O=r1(18),m=-9;m<0;m++){var C,S;C=w[h][m+27]*T[m+9][L[u]]+w[h][m+36]*T[8-m][L[u]],S=w[h][m+9]*g[m+9][L[u]]-w[h][m+18]*g[8-m][L[u]],O[m+9]=C-S*b[3+m+9],O[m+18]=C*b[3+m+9]+S}Y(c,f,O)}if(h!=v.SHORT_TYPE&&u!=0)for(var m=7;0<=m;--m){var d,k;d=c[f+m]*i[20+m]+c[f+-1-m]*M[28+m],k=c[f+m]*M[28+m]-c[f+-1-m]*i[20+m],c[f+-1-m]=d,c[f+m]=k}}}if(r=e,n=286,A.mode_gr==1)for(var N=0;N<18;N++)g1.arraycopy(A.sb_sample[s][1][N],0,A.sb_sample[s][0][N],0,32)}}};this.lame_encode_mp3_frame=function(l,w,b,y,i,M){var L,e1=H1([2,2]);e1[0][0]=new N1,e1[0][1]=new N1,e1[1][0]=new N1,e1[1][1]=new N1;var j,Y=H1([2,2]);Y[0][0]=new N1,Y[0][1]=new N1,Y[1][0]=new N1,Y[1][1]=new N1;var A,t,e,r=[null,null],n=l.internal_flags,s=E1([2,4]),a=[[0,0],[0,0]],u=[[0,0],[0,0]];if(r[0]=w,r[1]=b,n.lame_encode_frame_init==0&&function(g,T){var R,O,C=g.internal_flags;if(C.lame_encode_frame_init==0){var S,d,k=r1(2014),N=r1(2014);for(C.lame_encode_frame_init=1,d=S=0;S<286+576*(1+C.mode_gr);++S)S<576*C.mode_gr?(k[S]=0,C.channels_out==2&&(N[S]=0)):(k[S]=T[0][d],C.channels_out==2&&(N[S]=T[1][d]),++d);for(O=0;O<C.mode_gr;O++)for(R=0;R<C.channels_out;R++)C.l3_side.tt[O][R].block_type=v.SHORT_TYPE;f1.mdct_sub48(C,k,N)}}(l,r),n.padding=0,(n.slot_lag-=n.frac_SpF)<0&&(n.slot_lag+=l.out_samplerate,n.padding=1),n.psymodel!=0){var p,c=[null,null],f=0,o=o1(2);for(e=0;e<n.mode_gr;e++){for(t=0;t<n.channels_out;t++)c[t]=r[t],f=576+576*e-v.FFTOFFSET;if(l.VBR==V.vbr_mtrh||l.VBR==V.vbr_mt?J():p=X.L3psycho_anal_ns(l,c,f,e,e1,Y,a[e],u[e],s[e],o),p!=0)return-4;for(l.mode==i1.JOINT_STEREO&&J(),t=0;t<n.channels_out;t++){var _=n.l3_side.tt[e][t];_.block_type=o[t],_.mixed_block_flag=0}}}else J();if(function(g){var T,R;if(g.ATH.useAdjust==0)return g.ATH.adjust=1;if(R=g.loudness_sq[0][0],T=g.loudness_sq[1][0],g.channels_out==2?J():(R+=R,T+=T),g.mode_gr==2&&(R=Math.max(R,T)),R*=.5,.03125<(R*=g.ATH.aaSensitivityP))1<=g.ATH.adjust?g.ATH.adjust=1:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=1;else{var O=31.98*R+625e-6;g.ATH.adjust>=O?(g.ATH.adjust*=.075*O+.925,g.ATH.adjust<O&&(g.ATH.adjust=O)):g.ATH.adjustLimit>=O?g.ATH.adjust=O:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=O}}(n),f1.mdct_sub48(n,r[0],r[1]),n.mode_ext=v.MPG_MD_LR_LR,l.force_ms?n.mode_ext=v.MPG_MD_MS_LR:l.mode==i1.JOINT_STEREO&&J(),n.mode_ext==I?(j=Y,A=u):(j=e1,A=a),l.analysis&&n.pinfo!=null&&J(),l.VBR==V.vbr_off||l.VBR==V.vbr_abr){var m,h;for(m=0;m<18;m++)n.nsPsy.pefirbuf[m]=n.nsPsy.pefirbuf[m+1];for(e=h=0;e<n.mode_gr;e++)for(t=0;t<n.channels_out;t++)h+=A[e][t];for(n.nsPsy.pefirbuf[18]=h,h=n.nsPsy.pefirbuf[9],m=0;m<9;m++)h+=(n.nsPsy.pefirbuf[m]+n.nsPsy.pefirbuf[18-m])*v.fircoef[m];for(h=3350*n.mode_gr*n.channels_out/h,e=0;e<n.mode_gr;e++)for(t=0;t<n.channels_out;t++)A[e][t]*=h}return n.iteration_loop.iteration_loop(l,A,[.5,.5],j),K.format_bitstream(l),L=K.copy_buffer(n,y,i,M,1),l.bWriteVbrTag&&D.addVbrFrame(l),l.analysis&&n.pinfo!=null&&J(),function(g){var T,R;for(g.bitrate_stereoMode_Hist[g.bitrate_index][4]++,g.bitrate_stereoMode_Hist[15][4]++,g.channels_out==2&&J(),T=0;T<g.mode_gr;++T)for(R=0;R<g.channels_out;++R){var O=0|g.l3_side.tt[T][R].block_type;g.l3_side.tt[T][R].mixed_block_flag!=0&&(O=4),g.bitrate_blockType_Hist[g.bitrate_index][O]++,g.bitrate_blockType_Hist[g.bitrate_index][5]++,g.bitrate_blockType_Hist[15][O]++,g.bitrate_blockType_Hist[15][5]++}}(n),L}}function v1(){this.l=r1(v.SBMAX_l),this.s=E1([v.SBMAX_s,3]);var I=this;this.assign=function(K){g1.arraycopy(K.l,0,I.l,0,v.SBMAX_l);for(var X=0;X<v.SBMAX_s;X++)for(var D=0;D<3;D++)I.s[X][D]=K.s[X][D]}}function d1(){var I=40;function K(){this.write_timing=0,this.ptr=0,this.buf=_1(I)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=E1([2,d1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new function(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[o1(4),o1(4)];for(var D=0;D<2;D++)for(var f1=0;f1<2;f1++)this.tt[D][f1]=new A1},this.ms_ratio=r1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=o1(2),this.CurrentStep=o1(2),this.masking_lower=0,this.bv_scf=o1(576),this.pseudohalf=o1(b1.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*d1.BPC+1),this.itime=Q(2),this.sideinfo_len=0,this.sb_sample=E1([2,2,18,v.SBLIMIT]),this.amp_filter=r1(32),this.header=new Array(d1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new x1,this.minval_l=r1(v.CBANDS),this.minval_s=r1(v.CBANDS),this.nb_1=E1([4,v.CBANDS]),this.nb_2=E1([4,v.CBANDS]),this.nb_s1=E1([4,v.CBANDS]),this.nb_s2=E1([4,v.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=r1(4),this.loudness_sq=E1([2,2]),this.loudness_sq_save=r1(2),this.mld_l=r1(v.SBMAX_l),this.mld_s=r1(v.SBMAX_s),this.bm_l=o1(v.SBMAX_l),this.bo_l=o1(v.SBMAX_l),this.bm_s=o1(v.SBMAX_s),this.bo_s=o1(v.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=D1([v.CBANDS,2]),this.s3ind_s=D1([v.CBANDS,2]),this.numlines_s=o1(v.CBANDS),this.numlines_l=o1(v.CBANDS),this.rnumlines_l=r1(v.CBANDS),this.mld_cb_l=r1(v.CBANDS),this.mld_cb_s=r1(v.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=r1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=o1(2),this.nsPsy=new function(){this.last_en_subshort=E1([4,9]),this.lastAttacks=o1(4),this.pefirbuf=r1(19),this.longfact=r1(v.SBMAX_l),this.shortfact=r1(v.SBMAX_s),this.attackthre=0,this.attackthre_s=0},this.VBR_seek_table=new function(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0},this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=D1([16,5]),this.bitrate_blockType_Hist=D1([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var X=0;X<this.en.length;X++)this.en[X]=new v1;for(var X=0;X<this.thm.length;X++)this.thm[X]=new v1;for(var X=0;X<this.header.length;X++)this.header[X]=new K}function P1(){var I=new function(){var S=r1(v.BLKSIZE),d=r1(v.BLKSIZE_s/2),k=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function N(B,E,P){var H,z,$,q=0,Z=E+(P<<=1);H=4;do{var W,t1,h1,U,n1,u1,G;for(G=H>>1,u1=(n1=(U=H)<<1)+U,H=n1<<1,$=(z=E)+G;$1=B[z+0]-B[z+U],ne=B[z+0]+B[z+U],te=B[z+n1]-B[z+u1],Z1=B[z+n1]+B[z+u1],B[z+n1]=ne-Z1,B[z+0]=ne+Z1,B[z+u1]=$1-te,B[z+U]=$1+te,$1=B[$+0]-B[$+U],ne=B[$+0]+B[$+U],te=p1.SQRT2*B[$+u1],Z1=p1.SQRT2*B[$+n1],B[$+n1]=ne-Z1,B[$+0]=ne+Z1,B[$+u1]=$1-te,B[$+U]=$1+te,$+=H,(z+=H)<Z;);for(t1=k[q+0],W=k[q+1],h1=1;h1<G;h1++){var R1,O1;R1=1-2*W*W,O1=2*W*t1,z=E+h1,$=E+U-h1;do{var X1,q1,U1,ne,$1,ae,Z1,ce,te,fe;q1=O1*B[z+U]-R1*B[$+U],X1=R1*B[z+U]+O1*B[$+U],$1=B[z+0]-X1,ne=B[z+0]+X1,ae=B[$+0]-q1,U1=B[$+0]+q1,q1=O1*B[z+u1]-R1*B[$+u1],X1=R1*B[z+u1]+O1*B[$+u1],te=B[z+n1]-X1,Z1=B[z+n1]+X1,fe=B[$+n1]-q1,ce=B[$+n1]+q1,q1=W*Z1-t1*fe,X1=t1*Z1+W*fe,B[z+n1]=ne-X1,B[z+0]=ne+X1,B[$+u1]=ae-q1,B[$+U]=ae+q1,q1=t1*ce-W*te,X1=W*ce+t1*te,B[$+n1]=U1-X1,B[$+0]=U1+X1,B[z+u1]=$1-q1,B[z+U]=$1+q1,$+=H,z+=H}while(z<Z);t1=(R1=t1)*k[q+0]-W*k[q+1],W=R1*k[q+1]+W*k[q+0]}q+=2}while(H<P)}var F=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(B,E,P,H,z){for(var $=0;$<3;$++){var q=v.BLKSIZE_s/2,Z=65535&192*($+1),W=v.BLKSIZE_s/8-1;do{var t1,h1,U,n1,u1,G=255&F[W<<2];t1=d[G]*H[P][z+G+Z],u1=d[127-G]*H[P][z+G+Z+128],h1=t1-u1,t1+=u1,U=d[G+64]*H[P][z+G+Z+64],u1=d[63-G]*H[P][z+G+Z+192],n1=U-u1,U+=u1,q-=4,E[$][q+0]=t1+U,E[$][q+2]=t1-U,E[$][q+1]=h1+n1,E[$][q+3]=h1-n1,t1=d[G+1]*H[P][z+G+Z+1],u1=d[126-G]*H[P][z+G+Z+129],h1=t1-u1,t1+=u1,U=d[G+65]*H[P][z+G+Z+65],u1=d[62-G]*H[P][z+G+Z+193],n1=U-u1,U+=u1,E[$][q+v.BLKSIZE_s/2+0]=t1+U,E[$][q+v.BLKSIZE_s/2+2]=t1-U,E[$][q+v.BLKSIZE_s/2+1]=h1+n1,E[$][q+v.BLKSIZE_s/2+3]=h1-n1}while(0<=--W);N(E[$],q,v.BLKSIZE_s/2)}},this.fft_long=function(B,E,P,H,z){var $=v.BLKSIZE/8-1,q=v.BLKSIZE/2;do{var Z,W,t1,h1,U,n1=255&F[$];Z=S[n1]*H[P][z+n1],U=S[n1+512]*H[P][z+n1+512],W=Z-U,Z+=U,t1=S[n1+256]*H[P][z+n1+256],U=S[n1+768]*H[P][z+n1+768],h1=t1-U,t1+=U,E[0+(q-=4)]=Z+t1,E[q+2]=Z-t1,E[q+1]=W+h1,E[q+3]=W-h1,Z=S[n1+1]*H[P][z+n1+1],U=S[n1+513]*H[P][z+n1+513],W=Z-U,Z+=U,t1=S[n1+257]*H[P][z+n1+257],U=S[n1+769]*H[P][z+n1+769],h1=t1-U,t1+=U,E[q+v.BLKSIZE/2+0]=Z+t1,E[q+v.BLKSIZE/2+2]=Z-t1,E[q+v.BLKSIZE/2+1]=W+h1,E[q+v.BLKSIZE/2+3]=W-h1}while(0<=--$);N(E,q,v.BLKSIZE/2)},this.init_fft=function(B){for(var E=0;E<v.BLKSIZE;E++)S[E]=.42-.5*Math.cos(2*Math.PI*(E+.5)/v.BLKSIZE)+.08*Math.cos(4*Math.PI*(E+.5)/v.BLKSIZE);for(var E=0;E<v.BLKSIZE_s/2;E++)d[E]=.5*(1-Math.cos(2*Math.PI*(E+.5)/v.BLKSIZE_s))}},K=2.302585092994046,X=2,D=16,f1=.34,l=1/217621504/(v.BLKSIZE/2),w=.2302585093;function b(S,d,k,N,F,B,E,P,H,z,$){var q=S.internal_flags;H<2?(I.fft_long(q,N[F],H,z,$),I.fft_short(q,B[E],H,z,$)):H==2&&J(),d[0]=N[F+0][0],d[0]*=d[0];for(var Z=v.BLKSIZE/2-1;0<=Z;--Z){var W=N[F+0][v.BLKSIZE/2-Z],t1=N[F+0][v.BLKSIZE/2+Z];d[v.BLKSIZE/2-Z]=.5*(W*W+t1*t1)}for(var h1=2;0<=h1;--h1){k[h1][0]=B[E+0][h1][0],k[h1][0]*=k[h1][0];for(var Z=v.BLKSIZE_s/2-1;0<=Z;--Z){var W=B[E+0][h1][v.BLKSIZE_s/2-Z],t1=B[E+0][h1][v.BLKSIZE_s/2+Z];k[h1][v.BLKSIZE_s/2-Z]=.5*(W*W+t1*t1)}}for(var U=0,Z=11;Z<v.HBLKSIZE;Z++)U+=d[Z];q.tot_ener[H]=U,S.analysis&&J(),S.athaa_loudapprox==2&&H<2&&(q.loudness_sq[P][H]=q.loudness_sq_save[H],q.loudness_sq_save[H]=function(n1,u1){for(var G=0,R1=0;R1<v.BLKSIZE/2;++R1)G+=n1[R1]*u1.ATH.eql_w[R1];return G*=l}(d,q))}var y,i,M,L=8,e1=23,j=15,Y=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],A=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],t=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],e=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function r(S,d,k,N,F,B){var E;if(S<d){if(!(d<S*i))return S+d;E=d/S}else{if(d*i<=S)return S+d;E=S/d}if(S+=d,N+3<=6){if(y<=E)return S;var z=0|p1.FAST_LOG10_X(E,16);return S*t[z]}var P,H,z=0|p1.FAST_LOG10_X(E,16);return d=F.ATH.cb_l[k]*F.ATH.adjust,S<M*d?d<S?(P=1,z<=13&&(P=e[z]),H=p1.FAST_LOG10_X(S/d,10/15),S*((A[z]-P)*H+P)):13<z?S:S*e[z]:S*A[z]}function n(S,d,k,N,F){var B,E,P=0,H=0;for(B=E=0;B<v.SBMAX_s;++E,++B){for(var z=S.bo_s[B],$=S.npart_s,q=z<$?z:$;E<q;)P+=d[E],H+=k[E],E++;if(S.en[N].s[B][F]=P,S.thm[N].s[B][F]=H,$<=E){++B;break}var Z=S.PSY.bo_s_weight[B],W=1-Z;P=Z*d[E],H=Z*k[E],S.en[N].s[B][F]+=P,S.thm[N].s[B][F]+=H,P=W*d[E],H=W*k[E]}for(;B<v.SBMAX_s;++B)S.en[N].s[B][F]=0,S.thm[N].s[B][F]=0}function s(S,d,k,N){var F,B,E=0,P=0;for(F=B=0;F<v.SBMAX_l;++B,++F){for(var H=S.bo_l[F],z=S.npart_l,$=H<z?H:z;B<$;)E+=d[B],P+=k[B],B++;if(S.en[N].l[F]=E,S.thm[N].l[F]=P,z<=B){++F;break}var q=S.PSY.bo_l_weight[F],Z=1-q;E=q*d[B],P=q*k[B],S.en[N].l[F]+=E,S.thm[N].l[F]+=P,E=Z*d[B],P=Z*k[B]}for(;F<v.SBMAX_l;++F)S.en[N].l[F]=0,S.thm[N].l[F]=0}function a(S,d,k,N,F,B){var E,P,H=S.internal_flags;for(P=E=0;P<H.npart_s;++P){for(var z=0,$=0,q=H.numlines_s[P],Z=0;Z<q;++Z,++E){var W=d[B][E];z+=W,$<W&&($=W)}k[P]=z}for(E=P=0;P<H.npart_s;P++){var t1=H.s3ind_s[P][0],h1=H.s3_ss[E++]*k[t1];for(++t1;t1<=H.s3ind_s[P][1];)h1+=H.s3_ss[E]*k[t1],++E,++t1;var U=X*H.nb_s1[F][P];if(N[P]=Math.min(h1,U),H.blocktype_old[1&F]==v.SHORT_TYPE){var U=D*H.nb_s2[F][P],n1=N[P];N[P]=Math.min(U,n1)}H.nb_s2[F][P]=H.nb_s1[F][P],H.nb_s1[F][P]=h1}for(;P<=v.CBANDS;++P)k[P]=0,N[P]=0}function u(S,d,k){return 1<=k?S:k<=0?d:0<d?Math.pow(S/d,k)*d:0}var p=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function c(S,d){for(var k=309.07,N=0;N<v.SBMAX_s-1;N++)for(var F=0;F<3;F++){var B=S.thm.s[N][F];if(0<B){var E=B*d,P=S.en.s[N][F];E<P&&(k+=1e10*E<P?p[N]*(10*K):p[N]*p1.FAST_LOG10(P/E))}}return k}var f=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function o(S,d){for(var k=281.0575,N=0;N<v.SBMAX_l-1;N++){var F=S.thm.l[N];if(0<F){var B=F*d,E=S.en.l[N];B<E&&(k+=1e10*B<E?f[N]*(10*K):f[N]*p1.FAST_LOG10(E/B))}}return k}function _(S,d,k,N,F){var B,E;for(B=E=0;B<S.npart_l;++B){var P,H=0,z=0;for(P=0;P<S.numlines_l[B];++P,++E){var $=d[E];H+=$,z<$&&(z=$)}k[B]=H,N[B]=z,F[B]=H*S.rnumlines_l[B]}}function m(S,d,k,N){var F=Y.length-1,B=0,E=k[B]+k[B+1];if(0<E){var P=d[B];P<d[B+1]&&(P=d[B+1]);var H=0|(E=20*(2*P-E)/(E*(S.numlines_l[B]+S.numlines_l[B+1]-1)));F<H&&(H=F),N[B]=H}else N[B]=0;for(B=1;B<S.npart_l-1;B++)if(0<(E=k[B-1]+k[B]+k[B+1])){var P=d[B-1];P<d[B]&&(P=d[B]),P<d[B+1]&&(P=d[B+1]);var H=0|(E=20*(3*P-E)/(E*(S.numlines_l[B-1]+S.numlines_l[B]+S.numlines_l[B+1]-1)));F<H&&(H=F),N[B]=H}else N[B]=0;if(0<(E=k[B-1]+k[B])){var P=d[B-1];P<d[B]&&(P=d[B]);var H=0|(E=20*(2*P-E)/(E*(S.numlines_l[B-1]+S.numlines_l[B]-1)));F<H&&(H=F),N[B]=H}else N[B]=0}var h=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function g(S){return S<0&&(S=0),S*=.001,13*Math.atan(.76*S)+3.5*Math.atan(S*S/56.25)}function T(S,d,k,N,F,B,E,P,H,z,$,q){var Z,W=r1(v.CBANDS+1),t1=P/(15<q?1152:384),h1=o1(v.HBLKSIZE);P/=H;var U=0,n1=0;for(Z=0;Z<v.CBANDS;Z++){var u1;for(ae=g(P*U),W[Z]=P*U,u1=U;g(P*u1)-ae<f1&&u1<=H/2;u1++);for(S[Z]=u1-U,n1=Z+1;U<u1;)h1[U++]=Z;if(H/2<U){U=H/2,++Z;break}}W[Z]=P*U;for(var G=0;G<q;G++){var R1,O1,X1,q1,U1;X1=z[G],q1=z[G+1],(R1=0|Math.floor(.5+$*(X1-.5)))<0&&(R1=0),O1=0|Math.floor(.5+$*(q1-.5)),H/2<O1&&(O1=H/2),k[G]=(h1[R1]+h1[O1])/2,d[G]=h1[O1];var ne=t1*q1;E[G]=(ne-W[d[G]])/(W[d[G]+1]-W[d[G]]),E[G]<0?E[G]=0:1<E[G]&&(E[G]=1),U1=g(P*z[G]*$),U1=Math.min(U1,15.5)/15.5,B[G]=Math.pow(10,1.25*(1-Math.cos(Math.PI*U1))-2.5)}for(var $1=U=0;$1<n1;$1++){var ae,Z1,ce=S[$1];ae=g(P*U),Z1=g(P*(U+ce-1)),N[$1]=.5*(ae+Z1),ae=g(P*(U-.5)),Z1=g(P*(U+ce-.5)),F[$1]=Z1-ae,U+=ce}return n1}function R(S,d,k,N,F,B){var E,P,H,z,$,q,Z=E1([v.CBANDS,v.CBANDS]),W=0;if(B)for(var t1=0;t1<d;t1++)for(E=0;E<d;E++){var h1=(P=k[t1]-k[E],q=$=z=H=void 0,H=P,z=.5<=(H*=0<=H?3:1.5)&&H<=2.5?8*((q=H-.5)*q-2*q):0,(($=15.811389+7.5*(H+=.474)-17.5*Math.sqrt(1+H*H))<=-60?0:(H=Math.exp((z+$)*w),H/=.6609193))*N[E]);Z[t1][E]=h1*F[t1]}else J();for(var t1=0;t1<d;t1++){for(E=0;E<d&&!(0<Z[t1][E]);E++);for(S[t1][0]=E,E=d-1;0<E&&!(0<Z[t1][E]);E--);S[t1][1]=E,W+=S[t1][1]-S[t1][0]+1}for(var U=r1(W),n1=0,t1=0;t1<d;t1++)for(E=S[t1][0];E<=S[t1][1];E++)U[n1++]=Z[t1][E];return U}function O(S){var d=g(S);return d=Math.min(d,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*d))-2.5)}function C(S,d){S<-.3&&(S=3410),S/=1e3,S=Math.max(.1,S);var k=3.64*Math.pow(S,-.8)-6.8*Math.exp(-.6*Math.pow(S-3.4,2))+6*Math.exp(-.15*Math.pow(S-8.7,2))+.001*(.6+.04*d)*Math.pow(S,4);return k}this.L3psycho_anal_ns=function(S,d,k,N,F,B,E,P,H,z){var $,q,Z,W,t1,h1,U,n1,u1,G=S.internal_flags,R1=E1([2,v.BLKSIZE]),O1=E1([2,3,v.BLKSIZE_s]),X1=r1(v.CBANDS+1),q1=r1(v.CBANDS+1),U1=r1(v.CBANDS+2),ne=o1(2),$1=o1(2),ae=E1([2,576]),Z1=o1(v.CBANDS+2),ce=o1(v.CBANDS+2);for(V1.fill(ce,0),$=G.channels_out,S.mode==i1.JOINT_STEREO&&($=4),u1=S.VBR==V.vbr_off?G.ResvMax==0?0:G.ResvSize/G.ResvMax*.5:S.VBR==V.vbr_rh||S.VBR==V.vbr_mtrh||S.VBR==V.vbr_mt?.6:1,q=0;q<G.channels_out;q++){var te=d[q],fe=k+576-350-21+192;for(W=0;W<576;W++){var Ce,Ie;for(Ce=te[fe+W+10],t1=Ie=0;t1<9;t1+=2)Ce+=h[t1]*(te[fe+W+t1]+te[fe+W+21-t1]),Ie+=h[t1+1]*(te[fe+W+t1+1]+te[fe+W+21-t1-1]);ae[q][W]=Ce+Ie}F[N][q].en.assign(G.en[q]),F[N][q].thm.assign(G.thm[q]),2<$&&J()}for(q=0;q<$;q++){var Ye,re=r1(12),he=[0,0,0,0],Le=r1(12),je=1,qe=r1(v.CBANDS),Ue=r1(v.CBANDS),z1=[0,0,0,0],Ge=r1(v.HBLKSIZE),Ke=E1([3,v.HBLKSIZE_s]);for(W=0;W<3;W++)re[W]=G.nsPsy.last_en_subshort[q][W+6],Le[W]=re[W]/G.nsPsy.last_en_subshort[q][W+4],he[0]+=re[W];q==2&&J();var We=ae[1&q],Me=0;for(W=0;W<9;W++){for(var ot=Me+64,ee=1;Me<ot;Me++)ee<Math.abs(We[Me])&&(ee=Math.abs(We[Me]));G.nsPsy.last_en_subshort[q][W]=re[W+3]=ee,he[1+W/3]+=ee,ee>re[W+3-2]?ee/=re[W+3-2]:ee=re[W+3-2]>10*ee?re[W+3-2]/(10*ee):0,Le[W+3]=ee}for(S.analysis&&J(),Ye=q==3?G.nsPsy.attackthre_s:G.nsPsy.attackthre,W=0;W<12;W++)z1[W/3]==0&&Le[W]>Ye&&(z1[W/3]=W%3+1);for(W=1;W<4;W++)(he[W-1]>he[W]?he[W-1]/he[W]:he[W]/he[W-1])<1.7&&(z1[W]=0,W==1&&(z1[0]=0));for(z1[0]!=0&&G.nsPsy.lastAttacks[q]!=0&&(z1[0]=0),G.nsPsy.lastAttacks[q]!=3&&z1[0]+z1[1]+z1[2]+z1[3]==0||((je=0)!=z1[1]&&z1[0]!=0&&(z1[1]=0),z1[2]!=0&&z1[1]!=0&&(z1[2]=0),z1[3]!=0&&z1[2]!=0&&(z1[3]=0)),q<2?$1[q]=je:J(),H[q]=G.tot_ener[q],b(S,Ge,Ke,R1,1&q,O1,1&q,N,q,d,k),_(G,Ge,X1,qe,Ue),m(G,qe,Ue,Z1),n1=0;n1<3;n1++){var Pe,se;for(a(S,Ke,q1,U1,q,n1),n(G,q1,U1,q,n1),U=0;U<v.SBMAX_s;U++){if(se=G.thm[q].s[U][n1],se*=.8,2<=z1[n1]||z1[n1+1]==1){var Ae=n1!=0?n1-1:2,ee=u(G.thm[q].s[U][Ae],se,.6*u1);se=Math.min(se,ee)}if(z1[n1]==1){var Ae=n1!=0?n1-1:2,ee=u(G.thm[q].s[U][Ae],se,.3*u1);se=Math.min(se,ee)}else if(n1!=0&&z1[n1-1]==3||n1==0&&G.nsPsy.lastAttacks[q]==3){var Ae=n1!=2?n1+1:0,ee=u(G.thm[q].s[U][Ae],se,.3*u1);se=Math.min(se,ee)}Pe=re[3*n1+3]+re[3*n1+4]+re[3*n1+5],6*re[3*n1+5]<Pe&&(se*=.5,6*re[3*n1+4]<Pe&&(se*=.5)),G.thm[q].s[U][n1]=se}}for(G.nsPsy.lastAttacks[q]=z1[2],Z=h1=0;Z<G.npart_l;Z++){for(var ge=G.s3ind[Z][0],He=X1[ge]*Y[Z1[ge]],we=G.s3_ll[h1++]*He;++ge<=G.s3ind[Z][1];)He=X1[ge]*Y[Z1[ge]],we=r(we,G.s3_ll[h1++]*He,ge,ge-Z,G);we*=.158489319246111,G.blocktype_old[1&q]==v.SHORT_TYPE?U1[Z]=we:U1[Z]=u(Math.min(we,Math.min(2*G.nb_1[q][Z],16*G.nb_2[q][Z])),we,u1),G.nb_2[q][Z]=G.nb_1[q][Z],G.nb_1[q][Z]=we}for(;Z<=v.CBANDS;++Z)X1[Z]=0,U1[Z]=0;s(G,X1,U1,q)}for(S.mode!=i1.STEREO&&S.mode!=i1.JOINT_STEREO||J(),S.mode==i1.JOINT_STEREO&&J(),function(Te,Se,lt,Re){var pe=Te.internal_flags;Te.short_blocks!=F1.short_block_coupled||Se[0]!=0&&Se[1]!=0||(Se[0]=Se[1]=0);for(var Q1=0;Q1<pe.channels_out;Q1++)Re[Q1]=v.NORM_TYPE,Te.short_blocks==F1.short_block_dispensed&&(Se[Q1]=1),Te.short_blocks==F1.short_block_forced&&(Se[Q1]=0),Se[Q1]!=0?pe.blocktype_old[Q1]==v.SHORT_TYPE&&(Re[Q1]=v.STOP_TYPE):(Re[Q1]=v.SHORT_TYPE,pe.blocktype_old[Q1]==v.NORM_TYPE&&(pe.blocktype_old[Q1]=v.START_TYPE),pe.blocktype_old[Q1]==v.STOP_TYPE&&(pe.blocktype_old[Q1]=v.SHORT_TYPE)),lt[Q1]=pe.blocktype_old[Q1],pe.blocktype_old[Q1]=Re[Q1]}(S,$1,z,ne),q=0;q<$;q++){var Oe,$e,Ne,Ve=0;1<q?J():(Oe=E,Ve=0,$e=z[q],Ne=F[N][q]),Oe[Ve+q]=$e==v.SHORT_TYPE?c(Ne,G.masking_lower):o(Ne,G.masking_lower),S.analysis&&(G.pinfo.pe[N][q]=Oe[Ve+q])}return 0},this.psymodel_init=function(S){var d,k=S.internal_flags,N=!0,F=13,B=0,E=0,P=-8.25,H=-4.5,z=r1(v.CBANDS),$=r1(v.CBANDS),q=r1(v.CBANDS),Z=S.out_samplerate;switch(S.experimentalZ){default:case 0:N=!0;break;case 1:N=S.VBR!=V.vbr_mtrh&&S.VBR!=V.vbr_mt;break;case 2:N=!1;break;case 3:F=8,B=-1.75,E=-.0125,P=-8.25,H=-2.25}for(k.ms_ener_ratio_old=.25,k.blocktype_old[0]=k.blocktype_old[1]=v.NORM_TYPE,d=0;d<4;++d){for(var U=0;U<v.CBANDS;++U)k.nb_1[d][U]=1e20,k.nb_2[d][U]=1e20,k.nb_s1[d][U]=k.nb_s2[d][U]=1;for(var W=0;W<v.SBMAX_l;W++)k.en[d].l[W]=1e20,k.thm[d].l[W]=1e20;for(var U=0;U<3;++U){for(var W=0;W<v.SBMAX_s;W++)k.en[d].s[W][U]=1e20,k.thm[d].s[W][U]=1e20;k.nsPsy.lastAttacks[d]=0}for(var U=0;U<9;U++)k.nsPsy.last_en_subshort[d][U]=10}for(k.loudness_sq_save[0]=k.loudness_sq_save[1]=0,k.npart_l=T(k.numlines_l,k.bo_l,k.bm_l,z,$,k.mld_l,k.PSY.bo_l_weight,Z,v.BLKSIZE,k.scalefac_band.l,v.BLKSIZE/1152,v.SBMAX_l),d=0;d<k.npart_l;d++){var t1=B;z[d]>=F&&(t1=E*(z[d]-F)/(24-F)+B*(24-z[d])/(24-F)),q[d]=Math.pow(10,t1/10),0<k.numlines_l[d]?k.rnumlines_l[d]=1/k.numlines_l[d]:k.rnumlines_l[d]=0}k.s3_ll=R(k.s3ind,k.npart_l,z,$,q,N);var h1,U=0;for(d=0;d<k.npart_l;d++){G=K1.MAX_VALUE;for(var n1=0;n1<k.numlines_l[d];n1++,U++){var u1=Z*U/(1e3*v.BLKSIZE);R1=this.ATHformula(1e3*u1,S)-20,R1=Math.pow(10,.1*R1),(R1*=k.numlines_l[d])<G&&(G=R1)}k.ATH.cb_l[d]=G,6<(G=20*z[d]/10-20)&&(G=100),G<-15&&(G=-15),G-=8,k.minval_l[d]=Math.pow(10,G/10)*k.numlines_l[d]}for(k.npart_s=T(k.numlines_s,k.bo_s,k.bm_s,z,$,k.mld_s,k.PSY.bo_s_weight,Z,v.BLKSIZE_s,k.scalefac_band.s,v.BLKSIZE_s/384,v.SBMAX_s),d=U=0;d<k.npart_s;d++){var G,t1=P;z[d]>=F&&(t1=H*(z[d]-F)/(24-F)+P*(24-z[d])/(24-F)),q[d]=Math.pow(10,t1/10),G=K1.MAX_VALUE;for(var n1=0;n1<k.numlines_s[d];n1++,U++){var R1,u1=Z*U/(1e3*v.BLKSIZE_s);R1=this.ATHformula(1e3*u1,S)-20,R1=Math.pow(10,.1*R1),(R1*=k.numlines_s[d])<G&&(G=R1)}k.ATH.cb_s[d]=G,G=7*z[d]/12-7,12<z[d]&&(G*=1+3.1*Math.log(1+G)),z[d]<12&&(G*=1+2.3*Math.log(1-G)),G<-15&&(G=-15),G-=8,k.minval_s[d]=Math.pow(10,G/10)*k.numlines_s[d]}k.s3_ss=R(k.s3ind_s,k.npart_s,z,$,q,N),y=Math.pow(10,(L+1)/16),i=Math.pow(10,(e1+1)/16),M=Math.pow(10,j/10),I.init_fft(k),k.decay=Math.exp(-1*K/(.01*Z/192)),h1=3.5,2&S.exp_nspsytune&&(h1=1),0<Math.abs(S.msfix)&&(h1=S.msfix),S.msfix=h1;for(var O1=0;O1<k.npart_l;O1++)k.s3ind[O1][1]>k.npart_l-1&&(k.s3ind[O1][1]=k.npart_l-1);var X1=576*k.mode_gr/Z;if(k.ATH.decay=Math.pow(10,-1.2*X1),k.ATH.adjust=.01,-(k.ATH.adjustLimit=1)!=S.ATHtype){var q1=S.out_samplerate/v.BLKSIZE,U1=0;for(d=u1=0;d<v.BLKSIZE/2;++d)u1+=q1,k.ATH.eql_w[d]=1/Math.pow(10,this.ATHformula(u1,S)/10),U1+=k.ATH.eql_w[d];for(U1=1/U1,d=v.BLKSIZE/2;0<=--d;)k.ATH.eql_w[d]*=U1}for(var O1=U=0;O1<k.npart_s;++O1)for(d=0;d<k.numlines_s[O1];++d)++U;for(var O1=U=0;O1<k.npart_l;++O1)for(d=0;d<k.numlines_l[O1];++d)++U;for(d=U=0;d<k.npart_l;d++){var u1=Z*(U+k.numlines_l[d]/2)/(1*v.BLKSIZE);k.mld_cb_l[d]=O(u1),U+=k.numlines_l[d]}for(;d<v.CBANDS;++d)k.mld_cb_l[d]=1;for(d=U=0;d<k.npart_s;d++){var u1=Z*(U+k.numlines_s[d]/2)/(1*v.BLKSIZE_s);k.mld_cb_s[d]=O(u1),U+=k.numlines_s[d]}for(;d<v.CBANDS;++d)k.mld_cb_s[d]=1;return 0},this.ATHformula=function(S,d){var k;switch(d.ATHtype){case 0:k=C(S,9);break;case 1:k=C(S,-1);break;case 2:k=C(S,0);break;case 3:k=C(S,1)+6;break;case 4:k=C(S,d.ATHcurve);break;default:k=C(S,0)}return k}}function c1(){var I,K,X,D,f1,l=this;c1.V9=410,c1.V8=420,c1.V7=430,c1.V6=440,c1.V5=450,c1.V4=460,c1.V3=470,c1.V2=480,c1.V1=490,c1.V0=500,c1.R3MIX=1e3,c1.STANDARD=1001,c1.EXTREME=1002,c1.INSANE=1003,c1.STANDARD_FAST=1004,c1.EXTREME_FAST=1005,c1.MEDIUM=1006,c1.MEDIUM_FAST=1007,c1.LAME_MAXMP3BUFFER=147456;var w,b,y=new P1;function i(){this.lowerlimit=0}function M(t,e){this.lowpass=e}this.enc=new v,this.setModules=function(t,e,r,n,s,a,u,p,c){I=t,K=e,X=r,D=n,f1=s,w=a,b=p,this.enc.setModules(K,y,D,w)};var L=4294479419;function e1(t,e){var r=[new M(8,2e3),new M(16,3700),new M(24,3900),new M(32,5500),new M(40,7e3),new M(48,7500),new M(56,1e4),new M(64,11e3),new M(80,13500),new M(96,15100),new M(112,15600),new M(128,17e3),new M(160,17500),new M(192,18600),new M(224,19400),new M(256,19700),new M(320,20500)],n=l.nearestBitrateFullIndex(e);t.lowerlimit=r[n].lowpass}function j(t){var e=v.BLKSIZE+t.framesize-v.FFTOFFSET;return e=Math.max(e,512+t.framesize-32)}function Y(){this.n_in=0,this.n_out=0}function A(t,e,r,n,s,a){var u=t.internal_flags;if(u.resample_ratio<.9999||1.0001<u.resample_ratio)J();else{a.n_out=Math.min(t.framesize,s),a.n_in=a.n_out;for(var p=0;p<a.n_out;++p)e[0][u.mf_size+p]=r[0][n+p],u.channels_out==2&&(e[1][u.mf_size+p]=r[1][n+p])}}this.lame_init=function(){var t,e,r=new function(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=i1.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null},n=((t=r).class_id=L,e=t.internal_flags=new d1,t.mode=i1.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,e.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=V.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,e.VBR_min_bitrate=1,e.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,e.resample_ratio=1,e.OldValue[0]=180,e.OldValue[1]=180,e.CurrentStep[0]=4,e.CurrentStep[1]=4,e.masking_lower=1,e.nsPsy.attackthre=-1,e.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,e.mf_samples_to_encode=v.ENCDELAY+v.POSTDELAY,t.encoder_padding=0,e.mf_size=v.ENCDELAY-v.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,e.decode_on_the_fly=!1,e.findReplayGain=!1,e.findPeakSample=!1,e.RadioGain=0,e.AudiophileGain=0,e.noclipGainChange=0,e.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0);return n!=0?null:(r.lame_allocated_gfp=1,r)},this.nearestBitrateFullIndex=function(t){var e=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],r=0,n=0,s=0,a=0;a=e[16],n=e[s=16],r=16;for(var u=0;u<16;u++)if(Math.max(t,e[u+1])!=t){a=e[u+1],s=u+1,n=e[u],r=u;break}return t-n<a-t?r:s},this.lame_init_params=function(t){var e,r,n=t.internal_flags;if(n.Class_ID=0,n.ATH==null&&(n.ATH=new function(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=r1(v.SBMAX_l),this.s=r1(v.SBMAX_s),this.psfb21=r1(v.PSFB21),this.psfb12=r1(v.PSFB12),this.cb_l=r1(v.CBANDS),this.cb_s=r1(v.CBANDS),this.eql_w=r1(v.BLKSIZE/2)}),n.PSY==null&&(n.PSY=new function(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=r1(v.SBMAX_l),this.bo_s_weight=r1(v.SBMAX_s)}),n.rgdata==null&&(n.rgdata=new function(){}),n.channels_in=t.num_channels,n.channels_in==1&&(t.mode=i1.MONO),n.channels_out=t.mode==i1.MONO?1:2,n.mode_ext=v.MPG_MD_MS_LR,t.mode==i1.MONO&&(t.force_ms=!1),t.VBR==V.vbr_off&&t.VBR_mean_bitrate_kbps!=128&&t.brate==0&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==V.vbr_off||t.VBR==V.vbr_mtrh||t.VBR==V.vbr_mt||(t.free_format=!1),t.VBR==V.vbr_off&&t.brate==0&&J(),t.VBR==V.vbr_off&&0<t.compression_ratio&&J(),t.out_samplerate!=0&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),t.lowpassfreq==0){var s=16e3;switch(t.VBR){case V.vbr_off:var a=new i;e1(a,t.brate),s=a.lowerlimit;break;case V.vbr_abr:var a=new i;e1(a,t.VBR_mean_bitrate_kbps),s=a.lowerlimit;break;case V.vbr_rh:J();default:J()}t.mode!=i1.MONO||t.VBR!=V.vbr_off&&t.VBR!=V.vbr_abr||(s*=1.5),t.lowpassfreq=0|s}switch(t.out_samplerate==0&&J(),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==V.vbr_off&&(t.compression_ratio=16*t.out_samplerate*n.channels_out/(1e3*t.brate)),t.VBR==V.vbr_abr&&J(),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,n.findPeakSample=!1),n.findReplayGain=t.findReplayGain,n.decode_on_the_fly=t.decode_on_the_fly,n.decode_on_the_fly&&(n.findPeakSample=!0),n.findReplayGain&&J(),n.decode_on_the_fly&&!t.decode_only&&J(),n.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*n.mode_gr,t.encoder_delay=v.ENCDELAY,n.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case V.vbr_mt:case V.vbr_rh:case V.vbr_mtrh:t.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][t.VBR_q];break;case V.vbr_abr:t.compression_ratio=16*t.out_samplerate*n.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=16*t.out_samplerate*n.channels_out/(1e3*t.brate)}t.mode==i1.NOT_SET&&(t.mode=i1.JOINT_STEREO),0<t.highpassfreq?J():(n.highpass1=0,n.highpass2=0),0<t.lowpassfreq?(n.lowpass2=2*t.lowpassfreq,0<=t.lowpasswidth?J():n.lowpass1=2*t.lowpassfreq,n.lowpass1/=t.out_samplerate,n.lowpass2/=t.out_samplerate):J(),function(m){var h,g=m.internal_flags,T=32;if(0<g.lowpass1){for(var R=999,O=0;O<=31;O++){var C=O/31;C>=g.lowpass2&&(T=Math.min(T,O)),g.lowpass1<C&&C<g.lowpass2&&(R=Math.min(R,O))}g.lowpass1=R==999?(T-.75)/31:(R-.75)/31,g.lowpass2=T/31}0<g.highpass2&&J(),0<g.highpass2&&J();for(var O=0;O<32;O++){var S,d,C=O/31;g.highpass2>g.highpass1?J():S=1,d=g.lowpass2>g.lowpass1?1<(h=(C-g.lowpass1)/(g.lowpass2-g.lowpass1+1e-20))?0:h<=0?1:Math.cos(Math.PI/2*h):1,g.amp_filter[O]=S*d}}(t),n.samplerate_index=function(m,h){switch(m){case 44100:return h.version=1,0;case 48e3:return h.version=1;case 32e3:return h.version=1,2;case 22050:return h.version=0;case 24e3:return h.version=0,1;case 16e3:return h.version=0,2;case 11025:return h.version=0;case 12e3:return h.version=0,1;case 8e3:return h.version=0,2;default:return h.version=0,-1}}(t.out_samplerate,t),n.samplerate_index<0&&J(),t.VBR==V.vbr_off?t.free_format?n.bitrate_index=0:(t.brate=function(m,h,g){g<16e3&&(h=2);for(var T=x.bitrate_table[h][1],R=2;R<=14;R++)0<x.bitrate_table[h][R]&&Math.abs(x.bitrate_table[h][R]-m)<Math.abs(T-m)&&(T=x.bitrate_table[h][R]);return T}(t.brate,t.version,t.out_samplerate),n.bitrate_index=function(m,h,g){g<16e3&&(h=2);for(var T=0;T<=14;T++)if(0<x.bitrate_table[h][T]&&x.bitrate_table[h][T]==m)return T;return-1}(t.brate,t.version,t.out_samplerate),n.bitrate_index<=0&&J()):n.bitrate_index=1,t.analysis&&(t.bWriteVbrTag=!1),n.pinfo!=null&&(t.bWriteVbrTag=!1),K.init_bit_stream_w(n);for(var u,p=n.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),c=0;c<v.SBMAX_l+1;c++)n.scalefac_band.l[c]=D.sfBandIndex[p].l[c];for(var c=0;c<v.PSFB21+1;c++){var f=(n.scalefac_band.l[22]-n.scalefac_band.l[21])/v.PSFB21,o=n.scalefac_band.l[21]+c*f;n.scalefac_band.psfb21[c]=o}n.scalefac_band.psfb21[v.PSFB21]=576;for(var c=0;c<v.SBMAX_s+1;c++)n.scalefac_band.s[c]=D.sfBandIndex[p].s[c];for(var c=0;c<v.PSFB12+1;c++){var f=(n.scalefac_band.s[13]-n.scalefac_band.s[12])/v.PSFB12,o=n.scalefac_band.s[12]+c*f;n.scalefac_band.psfb12[c]=o}for(n.scalefac_band.psfb12[v.PSFB12]=192,t.version==1?n.sideinfo_len=n.channels_out==1?21:36:n.sideinfo_len=n.channels_out==1?13:21,t.error_protection&&(n.sideinfo_len+=2),r=void 0,r=(e=t).internal_flags,e.frameNum=0,e.write_id3tag_automatic&&b.id3tag_write_v2(e),r.bitrate_stereoMode_Hist=D1([16,5]),r.bitrate_blockType_Hist=D1([16,6]),r.PeakSample=0,e.bWriteVbrTag&&w.InitVbrTag(e),n.Class_ID=L,u=0;u<19;u++)n.nsPsy.pefirbuf[u]=700*n.mode_gr*n.channels_out;switch(t.ATHtype==-1&&(t.ATHtype=4),t.VBR){case V.vbr_mt:t.VBR=V.vbr_mtrh;case V.vbr_mtrh:t.useTemporal==null&&(t.useTemporal=!1),X.apply_preset(t,500-10*t.VBR_q,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),5<t.quality&&(t.quality=5),n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=44e3<t.out_samplerate,n.iteration_loop=new VBRNewIterationLoop(f1);break;case V.vbr_rh:X.apply_preset(t,500-10*t.VBR_q,0),n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?n.sfb21_extra=!1:n.sfb21_extra=44e3<t.out_samplerate,6<t.quality&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),n.iteration_loop=new VBROldIterationLoop(f1);break;default:var _;n.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),(_=t.VBR)==V.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),X.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=_,n.PSY.mask_adjust=t.maskingadjust,n.PSY.mask_adjust_short=t.maskingadjust_short,_==V.vbr_off?n.iteration_loop=new function(m){var h=m;this.quantize=h,this.iteration_loop=function(g,T,R,O){var C=g.internal_flags,S=r1(b1.SFBMAX),d=r1(576),k=o1(2),N=0,F=C.l3_side,B=new I1(N);this.quantize.rv.ResvFrameBegin(g,B),N=B.bits;for(var E=0;E<C.mode_gr;E++){this.quantize.qupvt.on_pe(g,T,k,N,E,E),C.mode_ext==v.MPG_MD_MS_LR&&J();for(var P=0;P<C.channels_out;P++){var H,z,$=F.tt[E][P];$.block_type!=v.SHORT_TYPE?(H=0,z=C.PSY.mask_adjust-H):(H=0,z=C.PSY.mask_adjust_short-H),C.masking_lower=Math.pow(10,.1*z),this.quantize.init_outer_loop(C,$),this.quantize.init_xrpow(C,$,d)&&(this.quantize.qupvt.calc_xmin(g,O[E][P],$,S),this.quantize.outer_loop(g,$,S,d,P,k[P])),this.quantize.iteration_finish_one(C,E,P)}}this.quantize.rv.ResvFrameEnd(C,N)}}(f1):J()}return t.VBR!=V.vbr_off&&J(),t.tune&&J(),function(m){var h=m.internal_flags;switch(m.quality){default:case 9:h.psymodel=0,h.noise_shaping=0,h.noise_shaping_amp=0,h.noise_shaping_stop=0,h.use_best_huffman=0,h.full_outer_loop=0;break;case 8:m.quality=7;case 7:h.psymodel=1,h.noise_shaping=0,h.noise_shaping_amp=0,h.noise_shaping_stop=0,h.use_best_huffman=0,h.full_outer_loop=0;break;case 6:case 5:h.psymodel=1,h.noise_shaping==0&&(h.noise_shaping=1),h.noise_shaping_amp=0,h.noise_shaping_stop=0,h.subblock_gain==-1&&(h.subblock_gain=1),h.use_best_huffman=0,h.full_outer_loop=0;break;case 4:h.psymodel=1,h.noise_shaping==0&&(h.noise_shaping=1),h.noise_shaping_amp=0,h.noise_shaping_stop=0,h.subblock_gain==-1&&(h.subblock_gain=1),h.use_best_huffman=1,h.full_outer_loop=0;break;case 3:h.psymodel=1,h.noise_shaping==0&&(h.noise_shaping=1),h.noise_shaping_amp=1,-(h.noise_shaping_stop=1)==h.subblock_gain&&(h.subblock_gain=1),h.use_best_huffman=1,h.full_outer_loop=0;break;case 2:h.psymodel=1,h.noise_shaping==0&&(h.noise_shaping=1),h.substep_shaping==0&&(h.substep_shaping=2),h.noise_shaping_amp=1,-(h.noise_shaping_stop=1)==h.subblock_gain&&(h.subblock_gain=1),h.use_best_huffman=1,h.full_outer_loop=0;break;case 1:case 0:h.psymodel=1,h.noise_shaping==0&&(h.noise_shaping=1),h.substep_shaping==0&&(h.substep_shaping=2),h.noise_shaping_amp=2,-(h.noise_shaping_stop=1)==h.subblock_gain&&(h.subblock_gain=1),h.use_best_huffman=1,h.full_outer_loop=0}}(t),t.athaa_type<0?n.ATH.useAdjust=3:n.ATH.useAdjust=t.athaa_type,n.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),t.short_blocks==null&&(t.short_blocks=F1.short_block_allowed),t.short_blocks!=F1.short_block_allowed||t.mode!=i1.JOINT_STEREO&&t.mode!=i1.STEREO||(t.short_blocks=F1.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=1|t.exp_nspsytune,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=P1.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=P1.NSATTACKTHRE_S),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),t.useTemporal==null&&(t.useTemporal=!0),n.slot_lag=n.frac_SpF=0,t.VBR==V.vbr_off&&(n.slot_lag=n.frac_SpF=72e3*(t.version+1)*t.brate%t.out_samplerate|0),D.iteration_init(t),y.psymodel_init(t),0},this.lame_encode_flush=function(t,e,r,n){var s,a,u,p,c=t.internal_flags,f=y1([2,1152]),o=0,_=c.mf_samples_to_encode-v.POSTDELAY,m=j(t);if(c.mf_samples_to_encode<1)return 0;for(s=0,t.in_samplerate!=t.out_samplerate&&J(),(u=t.framesize-_%t.framesize)<576&&(u+=t.framesize),t.encoder_padding=u,p=(_+u)/t.framesize;0<p&&0<=o;){var h=m-c.mf_size,g=t.frameNum;h*=t.in_samplerate,1152<(h/=t.out_samplerate)&&(h=1152),h<1&&(h=1),a=n-s,n==0&&(a=0),o=this.lame_encode_buffer(t,f[0],f[1],h,e,r,a),r+=o,s+=o,p-=g!=t.frameNum?1:0}return c.mf_samples_to_encode=0,o<0?o:(a=n-s,n==0&&(a=0),K.flush_bitstream(t),(o=K.copy_buffer(c,e,r,a,1))<0?o:(r+=o,a=n-(s+=o),n==0&&(a=0),t.write_id3tag_automatic&&J(),s))},this.lame_encode_buffer=function(t,e,r,n,s,a,u){var p,c,f=t.internal_flags,o=[null,null];if(f.Class_ID!=L)return-3;if(n==0)return 0;c=n,((p=f).in_buffer_0==null||p.in_buffer_nsamples<c)&&(p.in_buffer_0=r1(c),p.in_buffer_1=r1(c),p.in_buffer_nsamples=c),o[0]=f.in_buffer_0,o[1]=f.in_buffer_1;for(var _=0;_<n;_++)o[0][_]=e[_],1<f.channels_in&&(o[1][_]=r[_]);return function(m,h,g,T,R,O,C){var S,d,k,N,F,B=m.internal_flags,E=0,P=[null,null],H=[null,null];if(B.Class_ID!=L)return-3;if(T==0)return 0;if((F=K.copy_buffer(B,R,O,C,0))<0)return F;if(O+=F,E+=F,H[0]=h,H[1]=g,S1.NEQ(m.scale,0)&&S1.NEQ(m.scale,1))for(d=0;d<T;++d)H[0][d]*=m.scale,B.channels_out==2&&(H[1][d]*=m.scale);if(S1.NEQ(m.scale_left,0)&&S1.NEQ(m.scale_left,1))for(d=0;d<T;++d)H[0][d]*=m.scale_left;if(S1.NEQ(m.scale_right,0)&&S1.NEQ(m.scale_right,1))for(d=0;d<T;++d)H[1][d]*=m.scale_right;m.num_channels==2&&B.channels_out==1&&J(),N=j(m),P[0]=B.mfbuf[0],P[1]=B.mfbuf[1];for(var z,$,q,Z,W,t1,h1,U=0;0<T;){var n1=[null,null],u1=0,G=0;n1[0]=H[0],n1[1]=H[1];var R1=new Y;if(A(m,P,n1,U,T,R1),u1=R1.n_in,G=R1.n_out,B.findReplayGain&&!B.decode_on_the_fly&&I.AnalyzeSamples(B.rgdata,P[0],B.mf_size,P[1],B.mf_size,G,B.channels_out)==m1.GAIN_ANALYSIS_ERROR)return-6;if(T-=u1,U+=u1,B.channels_out,B.mf_size+=G,B.mf_samples_to_encode<1&&J(),B.mf_samples_to_encode+=G,B.mf_size>=N){var O1=C-E;if(C==0&&(O1=0),z=m,$=P[0],q=P[1],Z=R,W=O,t1=O1,h1=l.enc.lame_encode_mp3_frame(z,$,q,Z,W,t1),z.frameNum++,(S=h1)<0)return S;for(O+=S,E+=S,B.mf_size-=m.framesize,B.mf_samples_to_encode-=m.framesize,k=0;k<B.channels_out;k++)for(d=0;d<B.mf_size;d++)P[k][d]=P[k][d+m.framesize]}}return E}(t,o[0],o[1],n,s,a,u)}}b1.SFBMAX=3*v.SBMAX_s,v.ENCDELAY=576,v.POSTDELAY=1152,v.FFTOFFSET=224+(v.MDCTDELAY=48),v.DECDELAY=528,v.SBLIMIT=32,v.CBANDS=64,v.SBPSY_l=21,v.SBPSY_s=12,v.SBMAX_l=22,v.SBMAX_s=13,v.PSFB21=6,v.PSFB12=6,v.HBLKSIZE=(v.BLKSIZE=1024)/2+1,v.HBLKSIZE_s=(v.BLKSIZE_s=256)/2+1,v.NORM_TYPE=0,v.START_TYPE=1,v.SHORT_TYPE=2,v.STOP_TYPE=3,v.MPG_MD_LR_LR=0,v.MPG_MD_LR_I=1,v.MPG_MD_MS_LR=2,v.MPG_MD_MS_I=3,v.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],d1.MFSIZE=3456+v.ENCDELAY-v.MDCTDELAY,d1.MAX_HEADER_BUF=256,d1.MAX_BITS_PER_CHANNEL=4095,d1.MAX_BITS_PER_GRANULE=7680,d1.BPC=320,b1.SFBMAX=3*v.SBMAX_s,j1.Mp3Encoder=function(I,K,X){I!=1&&J("fix cc: only supports mono");var D=new c1,f1=new function(){this.setModules=function(a,u){}},l=new m1,w=new S1,b=new function(){function a(o,_,m,h,g,T,R,O,C,S,d,k,N,F){this.quant_comp=_,this.quant_comp_s=m,this.safejoint=h,this.nsmsfix=g,this.st_lrm=T,this.st_s=R,this.nsbass=O,this.scale=C,this.masking_adj=S,this.ath_lower=d,this.ath_curve=k,this.interch=N,this.sfscale=F}var u;function p(o,_,m){J()}this.setModules=function(o){u=o};var c=[new a(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new a(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new a(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new a(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new a(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new a(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new a(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new a(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new a(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new a(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new a(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new a(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new a(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new a(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new a(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new a(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new a(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function f(o,_,m){var h=_,g=u.nearestBitrateFullIndex(_);if(o.VBR=V.vbr_abr,o.VBR_mean_bitrate_kbps=h,o.VBR_mean_bitrate_kbps=Math.min(o.VBR_mean_bitrate_kbps,320),o.VBR_mean_bitrate_kbps=Math.max(o.VBR_mean_bitrate_kbps,8),o.brate=o.VBR_mean_bitrate_kbps,320<o.VBR_mean_bitrate_kbps&&(o.disable_reservoir=!0),0<c[g].safejoint&&(o.exp_nspsytune=2|o.exp_nspsytune),0<c[g].sfscale&&(o.internal_flags.noise_shaping=2),0<Math.abs(c[g].nsbass)){var T=int(4*c[g].nsbass);T<0&&(T+=64),o.exp_nspsytune=o.exp_nspsytune|T<<2}return m!=0?o.quant_comp=c[g].quant_comp:0<Math.abs(o.quant_comp- -1)||(o.quant_comp=c[g].quant_comp),m!=0?o.quant_comp_short=c[g].quant_comp_s:0<Math.abs(o.quant_comp_short- -1)||(o.quant_comp_short=c[g].quant_comp_s),m!=0?o.msfix=c[g].nsmsfix:0<Math.abs(o.msfix- -1)||(o.msfix=c[g].nsmsfix),m!=0?o.internal_flags.nsPsy.attackthre=c[g].st_lrm:0<Math.abs(o.internal_flags.nsPsy.attackthre- -1)||(o.internal_flags.nsPsy.attackthre=c[g].st_lrm),m!=0?o.internal_flags.nsPsy.attackthre_s=c[g].st_s:0<Math.abs(o.internal_flags.nsPsy.attackthre_s- -1)||(o.internal_flags.nsPsy.attackthre_s=c[g].st_s),m!=0?o.scale=c[g].scale:0<Math.abs(o.scale- -1)||(o.scale=c[g].scale),m!=0?o.maskingadjust=c[g].masking_adj:0<Math.abs(o.maskingadjust-0)||(o.maskingadjust=c[g].masking_adj),0<c[g].masking_adj?m!=0?o.maskingadjust_short=.9*c[g].masking_adj:0<Math.abs(o.maskingadjust_short-0)||(o.maskingadjust_short=.9*c[g].masking_adj):m!=0?o.maskingadjust_short=1.1*c[g].masking_adj:0<Math.abs(o.maskingadjust_short-0)||(o.maskingadjust_short=1.1*c[g].masking_adj),m!=0?o.ATHlower=-c[g].ath_lower/10:0<Math.abs(10*-o.ATHlower-0)||(o.ATHlower=-c[g].ath_lower/10),m!=0?o.ATHcurve=c[g].ath_curve:0<Math.abs(o.ATHcurve- -1)||(o.ATHcurve=c[g].ath_curve),m!=0?o.interChRatio=c[g].interch:0<Math.abs(o.interChRatio- -1)||(o.interChRatio=c[g].interch),_}this.apply_preset=function(o,_,m){switch(_){case c1.R3MIX:_=c1.V3,o.VBR=V.vbr_mtrh;break;case c1.MEDIUM:_=c1.V4,o.VBR=V.vbr_rh;break;case c1.MEDIUM_FAST:_=c1.V4,o.VBR=V.vbr_mtrh;break;case c1.STANDARD:_=c1.V2,o.VBR=V.vbr_rh;break;case c1.STANDARD_FAST:_=c1.V2,o.VBR=V.vbr_mtrh;break;case c1.EXTREME:_=c1.V0,o.VBR=V.vbr_rh;break;case c1.EXTREME_FAST:_=c1.V0,o.VBR=V.vbr_mtrh;break;case c1.INSANE:return _=320,o.preset=_,f(o,_,m),o.VBR=V.vbr_off,_}switch(o.preset=_){case c1.V9:return p(),_;case c1.V8:return p(),_;case c1.V7:return p(),_;case c1.V6:return p(),_;case c1.V5:return p(),_;case c1.V4:return p(),_;case c1.V3:return p(),_;case c1.V2:return p(),_;case c1.V1:return p(),_;case c1.V0:return p(),_}return 8<=_&&_<=320?f(o,_,m):(o.preset=0,_)}},y=new M1,i=new l1,M=new k1,L=new function(){this.getLameShortVersion=function(){return"3.98.4"}},e1=new function(){this.setModules=function(a,u){}},j=new function(){var a;this.setModules=function(u){a=u},this.ResvFrameBegin=function(u,p){var c,f=u.internal_flags,o=f.l3_side,_=a.getframebits(u);p.bits=(_-8*f.sideinfo_len)/f.mode_gr;var m=2048*f.mode_gr-8;320<u.brate?J():(c=11520,u.strict_ISO&&J()),f.ResvMax=c-_,f.ResvMax>m&&(f.ResvMax=m),(f.ResvMax<0||u.disable_reservoir)&&(f.ResvMax=0);var h=p.bits*f.mode_gr+Math.min(f.ResvSize,f.ResvMax);return c<h&&(h=c),o.resvDrain_pre=0,f.pinfo!=null&&J(),h},this.ResvMaxBits=function(u,p,c,f){var o,_=u.internal_flags,m=_.ResvSize,h=_.ResvMax;f!=0&&(m+=p),1&_.substep_shaping&&(h*=.9),c.bits=p,9*h<10*m?(o=m-9*h/10,c.bits+=o,_.substep_shaping|=128):(o=0,_.substep_shaping&=127,u.disable_reservoir||1&_.substep_shaping||(c.bits-=.1*p));var g=m<6*_.ResvMax/10?m:6*_.ResvMax/10;return(g-=o)<0&&(g=0),g},this.ResvAdjust=function(u,p){u.ResvSize-=p.part2_3_length+p.part2_length},this.ResvFrameEnd=function(u,p){var c,f=u.l3_side;u.ResvSize+=p*u.mode_gr;var o=0;f.resvDrain_post=0,(f.resvDrain_pre=0)!=(c=u.ResvSize%8)&&(o+=c),0<(c=u.ResvSize-o-u.ResvMax)&&(o+=c);var _=Math.min(8*f.main_data_begin,o)/8;f.resvDrain_pre+=8*_,o-=8*_,u.ResvSize-=8*_,f.main_data_begin-=_,f.resvDrain_post+=o,u.ResvSize-=o}},Y=new w1,A=new function(){this.setModules=function(a,u,p){}},t=new function(){};D.setModules(l,w,b,y,i,M,L,e1,t),w.setModules(l,t,L,M),e1.setModules(w,L),b.setModules(D),i.setModules(w,j,y,Y),y.setModules(Y,j,D.enc.psy),j.setModules(w),Y.setModules(y),M.setModules(D,w,L),f1.setModules(A,t),A.setModules(L,e1,b);var e=D.lame_init();e.num_channels=I,e.in_samplerate=K,e.out_samplerate=K,e.brate=X,e.mode=i1.STEREO,e.quality=3,e.bWriteVbrTag=!1,e.disable_reservoir=!0,e.write_id3tag_automatic=!1,D.lame_init_params(e);var r=1152,n=0|1.25*r+7200,s=_1(n);this.encodeBuffer=function(a,u){I==1&&(u=a),a.length>r&&(r=a.length,s=_1(n=0|1.25*r+7200));var p=D.lame_encode_buffer(e,a,u,a.length,s,0,n);return new Int8Array(s.subarray(0,p))},this.flush=function(){var a=D.lame_encode_flush(e,s,0,n);return new Int8Array(s.subarray(0,a))}}}j1(),C1.lamejs=j1}((typeof window=="object"&&window.document?window:Object).Recorder)})(it);var Yt=it.exports;const jt=ht(Yt),qt=s1=>{const C1=de(0),j1=de(0),G1=at(()=>({isInit:C1.value===oe.INIT,isRecording:C1.value===oe.RECORDING,isPause:C1.value===oe.PAUSE,isEnd:C1.value===oe.END})),J=rt({url:"",blob:null,duration:0});let _1=null;const W1=(y1,H1)=>{if(G1.value.isRecording)return ve().warn("正在录音，请勿重复操作");let V1=0;_1=jt({type:"mp3",sampleRate:(s1==null?void 0:s1.sampleRate)||48e3,bitRate:(s1==null?void 0:s1.bitRate)||128,onProcess:()=>{V1===0&&(V1=Date.now()),j1.value=Date.now()-V1,s1==null||s1.onProcess(j1.value)}}),_1.open(()=>{_1.start(),C1.value=oe.RECORDING,y1==null||y1()},(g1,p1)=>{p1&&ve().error("用户未授权录音或浏览器不支持"),H1==null||H1()})},o1=()=>(C1.value=oe.PAUSE,_1.pause(),ve().info("录音已暂停")),r1=()=>(C1.value=oe.RECORDING,_1.resume(),ve().info("录音已恢复")),Q=y1=>{_1.stop((H1,V1)=>{J.blob=H1,J.url=(window.URL||webkitURL).createObjectURL(H1),j1.value=V1,J.duration=V1,D1(),y1==null||y1(H1,V1)},H1=>{throw D1(),console.log("录音失败:"+H1),new Error("录音失败:"+H1)})},E1=()=>{G1.value.isRecording&&_1&&Q(()=>{j1.value=0,C1.value=oe.INIT,J.url="",J.blob=null}),j1.value=0,C1.value=oe.INIT,J.url="",J.blob=null},D1=y1=>{_1.close(),_1=null,C1.value=oe.END};return{start:W1,pause:o1,resume:r1,stop:Q,result:J,reset:E1,status:G1,statusCode:C1,duration:j1}},Ut={class:"flex size-full flex-col bg-background sm:center md:rounded-xl md:bg-background md:py-4"},Gt={class:"flex-1 space-y-6 rounded-lg p-4 pb-6 md:!p-0"},Kt={class:"flex flex-col gap-4 rounded-t-lg py-8"},Wt={class:"mb-2 px-4 text-sm text-orange-500"},$t={class:"mx-4 rounded-xl bg-background-soft p-4"},Zt={class:"text-lg center"},Qt={class:"flex justify-around"},Jt={class:"flex-col gap-1 center"},es={key:0,class:"flex-col gap-1 center"},ts={class:"text-sm"},ss={key:1,class:"flex-col gap-1 center"},ns={class:"text-sm"},as={class:"flex-col gap-1 center"},rs={class:"flex h-full flex-col overflow-y-auto p-4 pb-8"},is={class:"flex-1 overflow-y-auto"},os={class:"py-2 text-sm leading-7"},ls={class:"flex items-center gap-2"},_s={class:"flex items-center gap-2"},cs={class:"flex items-center gap-2"},fs={class:"py-2 text-sm leading-7"},us={class:"flex items-center gap-2 font-bold text-orange-500"},hs={class:"flex items-center gap-2"},ps={class:"flex items-center gap-2"},ms={class:"flex items-center gap-2"},bs={class:"flex items-center gap-2"},ds={class:"flex flex-col justify-center gap-4 pt-4"},vs={class:"text-sm text-foreground/50"},gs=st({__name:"index",setup(s1){pt({title:"声音克隆"});const C1=mt(),j1=bt(),G1=dt();G1.setTemporaryToken(C1.query.access_token);const J=de(),_1=de(!1),W1=de(!0),o1=de(xt()),r1=de(),Q=de(!0),E1=vt(),D1=gt({name:wt().max(20,"音色名最长为20个字符").required("请填写音色名")}),y1=rt({cover:"",name:"",file_id:"",duration:0,expected_content:""}),H1=a1=>{a1>=Ee.times(14,1e3)&&(ve().success("已录制14秒，自动停止录制"),V())},{pause:V1,reset:g1,result:p1,resume:F1,start:K1,stop:V,status:i1,statusCode:w1,duration:m1}=qt({onProcess:H1}),k1=()=>{if(i1.value.isInit)return K1();if(i1.value.isRecording){if(m1.value<Ee.times(6,1e3)){ve().warn("请至少录制6秒"),g1();return}return V((a1,x)=>{y1.duration=Ee.divide(x,1e3)})}};async function S1(){if(_1.value=!0,p1.blob){const a1=Mt(p1.blob,"mp3");await At({file:a1}).then(async x=>{const{id:I1}=x;y1.file_id=I1,y1.expected_content=r1.value||"";try{await Nt(y1),Bt("/audio/clone/create/success")}catch(L1){_1.value=!1,console.error(L1)}}).catch(x=>{_1.value=!1,console.error(x)})}else _1.value=!1,ve().error("请先录制音频再试")}return St(async()=>{Q.value=yt(),!C1.query.access_token&&!G1.isLogin&&(ve().error("链接已失效，请重新生成"),setTimeout(()=>{j1.back()},1e3)),J.value=kt(),r1.value=(await Ot()).voice_copy}),(a1,x)=>{const I1=Ct,L1=It,x1=Ht,M1=Xt,A1=Xe,b1=Tt,l1=ze,N1=Lt,v=Pt,v1=Rt;return J1(),_e("div",Ut,[x[24]||(x[24]=T1("h1",{class:"p-4 pb-0 text-xl font-medium md:hidden"},"声音录制",-1)),Y1(b1,{schema:B1(D1),state:B1(y1),class:"flex max-w-md flex-1 flex-col border-border/50 sm:min-w-96 sm:p-4 md:rounded-3xl md:border md:p-6","validate-on":["submit"],onSubmit:S1},{default:me(()=>[T1("div",Gt,[Y1(L1,{label:"音色名称",name:"name",required:""},{default:me(()=>[Y1(I1,{modelValue:B1(y1).name,"onUpdate:modelValue":x[0]||(x[0]=d1=>B1(y1).name=d1),size:"xl",placeholder:"请填写音色名称",color:"gray",disabled:!B1(Q)},null,8,["modelValue","disabled"])]),_:1}),Y1(L1,{label:"音色头像",name:"cover",help:"Tips：建议上传1:1比例的图片"},{default:me(()=>[Y1(x1,{modelValue:B1(y1).cover,"onUpdate:modelValue":x[1]||(x[1]=d1=>B1(y1).cover=d1),type:"image","max-size":5,disabled:!B1(Q)},null,8,["modelValue","disabled"])]),_:1}),B1(Q)?le("",!0):(J1(),ye(M1,{key:0,icon:"tabler:alert-circle",color:"red",variant:"outline",title:"警告",description:"该站点未部署有效SSL证书，无法获取麦克风权限，请联系站点管理员处理"}))]),T1("div",Kt,[T1("div",null,[T1("div",Wt,[Y1(M1,{icon:"tabler:alert-circle",color:"orange",variant:"outline",title:"提示",description:"录音时请严格按照以下内容进行朗读，否则可能导致克隆失败或合成效果不好"})]),T1("div",$t,xe(B1(r1)||"我的声音将用于平台克隆，并合法使用，为自己的行为负责"),1)]),T1("p",Zt,xe(("formatSecond"in a1?a1.formatSecond:B1(Et))(B1(Ee).divide(B1(m1),1e3))),1),T1("div",Qt,[T1("div",Jt,[Y1(A1,{ui:{rounded:"rounded-full"},size:"lg",color:"white",icon:"tabler:reload",disabled:!B1(i1).isEnd||!B1(Q)||B1(_1),onClick:x[2]||(x[2]=d1=>B1(g1)())},null,8,["disabled"]),x[7]||(x[7]=T1("span",{class:"text-sm"},"重录",-1))]),Y1(Vt,{ref_key:"audioPlayerRef",ref:E1,hidden:""},{default:me(({status:d1,play:P1})=>[B1(i1).isEnd?(J1(),_e("div",es,[Y1(A1,{class:ue({"music-player":d1===1}),disabled:B1(_1),ui:{rounded:"rounded-full",icon:{size:{xl:"h-8 w-8"}}},size:"xl",icon:d1===0?"tabler:player-play-filled":"tabler:player-stop-filled",color:d1===0?"amber":"red",onClick:c1=>P1(B1(p1).url)},null,8,["class","disabled","icon","color","onClick"]),T1("span",ts,xe(d1===0?"播放":"结束"),1)])):(J1(),_e("div",ss,[Y1(A1,{disabled:!B1(Q),class:ue({"music-player":B1(i1).isRecording}),ui:{rounded:"rounded-full",icon:{size:{xl:"h-8 w-8"}}},size:"xl",icon:B1(i1).isRecording?"tabler:player-stop-filled":"tabler:microphone",color:B1(i1).isRecording?"red":"primary",onClick:x[3]||(x[3]=c1=>k1())},null,8,["disabled","class","icon","color"]),T1("span",ns,xe(B1(i1).isRecording?"结束录音":"开始录音"),1)]))]),_:1},512),T1("div",as,[Y1(A1,{type:"submit",disabled:!B1(p1).url||!B1(y1).name||!B1(Q),ui:{rounded:"rounded-full"},size:"lg",color:"emerald",loading:B1(_1),icon:"tabler:check"},null,8,["disabled","loading"]),x[8]||(x[8]=T1("span",{class:"text-sm"},"保存",-1))])])])]),_:1},8,["schema","state"]),B1(J)!==void 0?(J1(),ye(v1,{key:0,modelValue:B1(W1),"onUpdate:modelValue":x[6]||(x[6]=d1=>et(W1)?W1.value=d1:null),ui:{height:"h-full",container:"items-center",width:"sm:max-w-2xl"},fullscreen:B1(J)},{default:me(()=>[T1("div",rs,[T1("div",is,[x[19]||(x[19]=T1("h1",{class:"text-lg font-medium"},"克隆流程",-1)),T1("div",os,[T1("p",ls,[Y1(l1,{name:"tabler:hexagon-number-1-filled",class:"text-primary",size:"18"}),x[9]||(x[9]=ie(" 点击开始录音，朗读规定内容文本 "))]),T1("p",_s,[Y1(l1,{name:"tabler:hexagon-number-2-filled",class:"text-primary",size:"18"}),x[10]||(x[10]=ie(" 填写音色信息，如音色名、头像等 "))]),T1("p",cs,[Y1(l1,{name:"tabler:hexagon-number-3-filled",class:"text-primary",size:"18"}),x[11]||(x[11]=ie(" 提交保存，返回列表查看 "))])]),x[20]||(x[20]=T1("h1",{class:"text-lg font-medium"},"注意事项",-1)),T1("div",fs,[T1("p",us,[Y1(l1,{name:"tabler:circle-number-1-filled",class:"flex-shrink-0 text-primary",size:"18"}),x[12]||(x[12]=ie(" 请严格按照要求的内容文本进行录制 "))]),T1("p",hs,[Y1(l1,{name:"tabler:circle-number-2-filled",class:"flex-shrink-0 text-primary",size:"18"}),x[13]||(x[13]=ie(" 请在安静的环境下进行录音，避免噪音干扰 "))]),T1("p",ps,[Y1(l1,{name:"tabler:circle-number-3-filled",class:"flex-shrink-0 text-primary",size:"18"}),x[14]||(x[14]=ie(" 请使用标准普通话，吐字清晰，语速适当 "))]),T1("p",ms,[Y1(l1,{name:"tabler:circle-number-4-filled",class:"flex-shrink-0 text-primary",size:"18"}),x[15]||(x[15]=ie(" 录音时长控制在")),x[16]||(x[16]=T1("span",{class:"font-bold text-orange-500"},"6～12秒",-1)),x[17]||(x[17]=ie("最佳，最多不超过14秒 "))]),T1("p",bs,[Y1(l1,{name:"tabler:circle-number-5-filled",class:"flex-shrink-0 text-primary",size:"18"}),x[18]||(x[18]=ie(" 录制完成后先试听看是否达到要求再提交 "))])])]),T1("div",ds,[Y1(v,{modelValue:B1(o1),"onUpdate:modelValue":x[4]||(x[4]=d1=>et(o1)?o1.value=d1:null),ui:{inner:"ms-2"},name:"notifications",label:"Notifications"},{label:me(()=>[T1("p",vs,[x[22]||(x[22]=T1("span",null,"已阅读并同意",-1)),Y1(N1,{class:"mx-[1px] font-medium text-primary",to:"/agreement?type=agreement&item=use",target:"_blank"},{default:me(()=>x[21]||(x[21]=[ie(" 《使用协议》 ")])),_:1})])]),_:1},8,["modelValue"]),Y1(A1,{disabled:!B1(o1),block:"",size:"xl",ui:{rounded:"rounded-full"},"trailing-icon":"tabler:arrow-right",onClick:x[5]||(x[5]=d1=>W1.value=!1)},{default:me(()=>x[23]||(x[23]=[ie(" 开始录制 ")])),_:1},8,["disabled"])])])]),_:1},8,["modelValue","fullscreen"])):le("",!0)])}}}),Bs=tt(gs,[["__scopeId","data-v-4b5ebd6c"]]);export{Bs as default};
