import{d as e,aF as t,r as a,j as r,l as o,o as l,c as n,w as s,a as u,b as d,q as i,t as f,x as c,ad as g,$ as m,ai as p,aj as x,b1 as _,v as b,i as h,e as v,y,O as k,_ as w}from"./index-CTSv8bdf.js";const U=w(e({__name:"index",setup(e){const w=t(),U=a();function C(){w.logout(),c({url:"/pages/user/index"})}function I(e){g({count:1,sourceType:["album","camera"],sizeType:["compressed"],success:e=>{console.log("选择图片成功",e),$(e.tempFilePaths[0])},fail(e){console.log("选择图片失败",e)}}),e.detail.avatarUrl&&(console.log("微信头像 e.detail.avatarUrl =>",e.detail.avatarUrl),$(e.detail.avatarUrl))}function $(e){m({type:"image",data:{file:e},success:e=>{console.log("头像上传成功",e),j(e.uri)},fail:e=>{console.log("头像上传失败",e)}}).onProgressUpdate((e=>{p({title:`上传中${e.progress}%`}),console.log("上传进度：",`${e.progress}%`),100===e.progress&&x()}))}const j=async e=>{await _({field:"avatar",value:e}),w.getUser()},F=e=>b({url:e});return r((()=>{w.getUser()})),(e,t)=>{const a=h,r=v,c=y,g=k,m=o("layout-default-uni");return l(),n(m,null,{default:s((()=>[u(a,{"px-3":"","py-2":""},{default:s((()=>[u(a,{"ml-2":"","text-foreground-light":""},{default:s((()=>[d(" 编辑资料 ")])),_:1}),u(c,{"hover-class":"none","open-type":"chooseAvatar",class:"my-btn","mt-3":"",between:"","px-4":"","py-3.5":"",onClick:I,onChooseavatar:I},{default:s((()=>{var e;return[u(r,{src:null==(e=i(w).userInfo)?void 0:e.avatar,mode:"scaleToFill","h-92rpx":"","w-92rpx":"","rounded-full":""},null,8,["src"]),u(a,{center:""},{default:s((()=>[u(a,{text:"sm foreground-light","mr-1":""},{default:s((()=>[d(" 更换头像 ")])),_:1}),u(a,{"i-tabler:chevron-right":"",text:"sm foreground-light"})])),_:1})]})),_:1}),u(a,{"mt-3":"",between:"","rounded-28rpx":"","bg-background":"","px-4":"","py-3.5":""},{default:s((()=>[u(a,{"text-foreground-muted":""},{default:s((()=>[d(" 昵称 ")])),_:1}),u(a,{center:"",onClick:t[0]||(t[0]=e=>F("/bundle/pages/change_nickname/index"))},{default:s((()=>[u(a,{text:"sm foreground-light","mr-1":""},{default:s((()=>{var e;return[d(f(null==(e=i(w).userInfo)?void 0:e.nickname),1)]})),_:1}),u(a,{"i-tabler:chevron-right":"",text:"sm foreground-light"})])),_:1})])),_:1}),u(a,{"ml-2":"","mt-7.5":"","text-foreground-light":""},{default:s((()=>[d(" 账号与安全 ")])),_:1}),u(a,{"mt-3":"",between:"","rounded-28rpx":"","bg-background":"","px-4":"","py-3.5":""},{default:s((()=>[u(a,{"text-foreground-muted":""},{default:s((()=>[d(" 手机号 ")])),_:1}),u(a,{center:"",onClick:t[1]||(t[1]=e=>F("/bundle/pages/change_mobile/index?mobile"))},{default:s((()=>[u(a,{text:"sm foreground-light","mr-1":""},{default:s((()=>{var e,t;return[d(f((null==(e=i(w).userInfo)?void 0:e.mobile)?`+86 ${null==(t=i(w).userInfo)?void 0:t.mobile}`:"未绑定"),1)]})),_:1}),u(a,{"i-tabler:chevron-right":"",text:"sm foreground-light"})])),_:1})])),_:1}),u(a,{"mt-3":"",between:"","rounded-28rpx":"","bg-background":"","px-4":"","py-3.5":""},{default:s((()=>[u(a,{"text-foreground-muted":""},{default:s((()=>[d(" 登录密码 ")])),_:1}),u(a,{center:"",onClick:t[2]||(t[2]=e=>F("/bundle/pages/change_password/index"))},{default:s((()=>[u(a,{text:"sm foreground-light","mr-1":""},{default:s((()=>{var e;return[d(f((null==(e=i(w).userInfo)?void 0:e.has_password)?"已设置":"未设置"),1)]})),_:1}),u(a,{"i-tabler:chevron-right":"",text:"sm foreground-light"})])),_:1})])),_:1}),u(a,{class:"footer",position:"fixed left-0 bottom-0","w-full":"","p-3":""},{default:s((()=>[u(c,{type:"default","rounded-28rpx":"","bg-background":"",onClick:t[3]||(t[3]=e=>i(U).open())},{default:s((()=>[d(" 退出登录 ")])),_:1})])),_:1}),u(g,{ref_key:"confirmModalRef",ref:U,title:"温馨提示",content:"确定退出当前登录吗?","confirm-callback":C},null,512)])),_:1})])),_:1})}}}),[["__scopeId","data-v-9364d374"]]);export{U as default};
