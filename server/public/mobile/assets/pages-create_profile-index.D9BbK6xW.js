import{d as e,r as l,W as a,v as s,G as t,J as r,l as o,o as u,c,w as d,N as n,X as p,Y as i,a as m,s as f,b as x,t as A,Z as g,q as v,$ as b,e as T,i as h,a0 as D,y as z,_ as k}from"./index-CTSv8bdf.js";import{_ as y}from"./icon-image.CWyGkq44.js";import{b as _}from"./avatar.D4ZfpDUd.js";const S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAACZklEQVR4Ac1WNZDdMBBVmMHyDzNDE7DlMDShLk24DjMzYxvm5khymJmhn9S5Ml2oCuO+mT3UneFYM/tB3rdvFr2izh73gh9I469yQnVM6iAPgt+4w7PKM/wT9ZwLXnc3VNscE7yVRv2LEui42t8iteoGbGo+aUZMJkPPSX6x0c+uUTdlntpNv1dC8Bt3eMY6v1ytngGbmKjdhcEtHeMvIPBPkr8krxztLRKnvUblgo70bQId0n3NmJ+wAVuxhKS4kACf2DONsIpdon4cDjptc4f1IMwFkt8kH0EamTMO408JMu2v7nphVDOR8gBDROuZ9CdslplTeIKccUh0SjKLlD39i5yikCwlVCOH8RXIRSUPh/c1bKJ6bQ+59JF8zlmq0yZ3rIOcUeVORQhhA7YKWsZuai59rsZUJ3N+TCvyIpvz9rD1hVGyoHoLWiajA78QgGmBS/RUhciMOlhYJKGaKZ5ObCj4cJ/+A0chCCMKl2hkKxdXh7bNXPAHiAuiQbRn3jt5Qc2yBohWe2EbHMUugzwO6UoLEKrt0vhv3NCbjtyU6xnI7vRtYuE5euBIREiFsI/uv0qtPjhGLQFpvGfRhJEhbZ83ogOBTuM5k86jFjoU55kVUuMfSV40u3bVZ9Kv0IPEeVbkjH/LKpokbdHywrB2BZ4m8SyyLbh882Manz311lB4piUZ5o7xFnPk8mt/tGHAYtBW9fB2jHoqc0Z0rbXXk3X4bf+Rw6sRmsq/gFOuGNgCUHGRK0YYpF4xrCUKObWWKB3sojG3AoLflVmirJyikFC9BS0TJdBJviZWdhE2Som6ev4D+D3oKH+aLRUAAAAASUVORK5CYII=",M=k(e({__name:"index",setup(e){const k=l(),M=l({name:"",file_id:0,duration:0,cover:""}),C=l(0),w=l(""),R={name:{rules:[{required:!0,errorMessage:"请输入形象名称"}]}},V=()=>{s({url:"/bundle/pages/agreement/index"})},j=a((async()=>{k.value.validate().then((async e=>{console.log("表单校验通过",e),await _(M.value),s({url:"/bundle/pages/profile/index"}),console.log("创建形象 请求成功",e)})).catch((e=>{console.log("表单校验失败",e)}))}),800),B=()=>{uni.chooseMedia({count:1,mediaType:["video"],sourceType:["album","camera"],maxDuration:30,camera:"back",success:e=>{var l,a;console.log("视频选择成功",e),console.log("视频封面",null==(l=e.tempFiles[0])?void 0:l.thumbTempFilePath),100===C.value&&(C.value=0,w.value="");b({type:"video",data:{file:null==(a=e.tempFiles[0])?void 0:a.tempFilePath},success:e=>{console.log(e),M.value.file_id=e.id,w.value=e.uri},fail:e=>{console.log(e)}}).onProgressUpdate((e=>{C.value=e.progress}))},fail:e=>{console.error("视频选择失败",e)}})};return(e,l)=>{const a=T,s=h,b=D,_=t(r("uni-easyinput"),n),O=t(r("uni-forms-item"),p),U=t(r("uni-forms"),i),F=z,K=o("layout-default-uni");return u(),c(K,null,{default:d((()=>[m(s,{class:"digital-people h-full px-[24rpx] py-[16rpx]"},{default:d((()=>[m(s,{class:"flex"},{default:d((()=>[m(s,{"h-674rpx":"","w-502rpx":"",center:"","flex-col":"","rounded-6":"","bg-background":""},{default:d((()=>[0===C.value?(u(),c(a,{key:0,src:y,class:"h-[80rpx] w-[80rpx]",onClick:B})):f("",!0),0===C.value?(u(),c(s,{key:1,class:"mt-[12rpx] text-center font-[400]",text:"sm",onClick:B},{default:d((()=>[m(s,{text:"foreground-muted"},{default:d((()=>[x(" 点击上传视频 ")])),_:1}),m(s,{text:"foreground-muted"},{default:d((()=>[x(" 大小限制1GB内 ")])),_:1})])),_:1})):f("",!0),C.value>0&&C.value<100?(u(),c(s,{key:2,class:"mt-[12rpx] text-center font-[400]",text:"sm"},{default:d((()=>[m(s,{text:"foreground-muted"},{default:d((()=>[x(" 上传中... ")])),_:1}),m(s,{text:"primary"},{default:d((()=>[x(A(C.value)+"% ",1)])),_:1})])),_:1})):f("",!0),100===C.value?(u(),c(s,{key:3,relative:""},{default:d((()=>[m(b,{src:w.value,controls:"",class:"h-674rpx w-502rpx rounded-6"},null,8,["src"]),m(s,{position:"absolute top-0 left-0",text:"xs foreground-muted",center:"","rounded-lt-6":"","rounded-rb-6":"","p-2":"",class:"bg-background-muted/50",onClick:B},{default:d((()=>[m(s,null,{default:d((()=>[x(" 重新选择 ")])),_:1}),m(s,{"i-tabler:refresh":""})])),_:1})])),_:1})):f("",!0)])),_:1}),m(s,{class:"ml-[24rpx] flex flex-col"},{default:d((()=>[m(s,{class:""},{default:d((()=>[m(a,{src:"/mobile/assets/szr_zlzp-Dj1Opgam.png",mode:"aspectFill",class:"h-[176rpx] w-[176rpx] rounded-[28rpx]"}),m(s,{class:"mb-[4rpx] flex items-center justify-center"},{default:d((()=>[m(a,{src:S,class:"h-[28rpx] w-[28rpx]"}),m(s,{"ml-1":"",text:"xs foreground-muted"},{default:d((()=>[x(" 正脸自拍 ")])),_:1})])),_:1})])),_:1}),m(s,{class:""},{default:d((()=>[m(a,{src:"/mobile/assets/szr_kwzk-CAJqwkEW.png",mode:"aspectFill",class:"h-[176rpx] w-[176rpx] rounded-[28rpx]"}),m(s,{class:"mb-[4rpx] flex items-center justify-center"},{default:d((()=>[m(a,{src:S,class:"h-[28rpx] w-[28rpx]"}),m(s,{"ml-1":"",text:"xs foreground-muted"},{default:d((()=>[x(" 可微张口 ")])),_:1})])),_:1})])),_:1}),m(s,{class:""},{default:d((()=>[m(a,{src:"/mobile/assets/szr_mbgr-BdV7JMEM.png",mode:"aspectFill",class:"h-[176rpx] w-[176rpx] rounded-[28rpx]"}),m(s,{class:"mb-[4rpx] flex items-center justify-center"},{default:d((()=>[m(a,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAmVBMVEUAAAD/AAD/gICAgIDMMzPbSUnjVTnVVUDbSUDcTz7cRj7dTDvZTTndSjvdTTrbTTrbSzncSzzcTTvdTDvcTTzaTDzdSzvbTT3bSz3dTDzbSzvcTTvdTDzbTDvcSzzcTDzaTDzdTDzdTDzbTDzcTTzcTDzcTDzcTDzcSzzcTDzcTD3cTTzbTDzcTDzcTDzcTTzcTDzcTDzcTDwA0/dpAAAAMnRSTlMAAQICBQcJDBwdHR4oNDVGR2ZnaG5vcHF6gIGSlJSmp6eys7O+v8DDxNrb3O3u7/r7/lnsQfMAAAEeSURBVHhejZLrskMwFIWjd0VzVKWqbejNIWlJ9vs/3CERgzNjuv6t+cjaN/SlduRK6ZXs/gHLjhi0YpFtDSDOBHxucRjGtw+IDPfQ2q/k736hzSLIZeWvO+i/ReLMjJs5iXj7Jg9X4rjqh6yOosI6185kYpihicxsZSKRO2gkJxeRMgyCJm+O1ScOnje5ATDVO5Sqzh9gLkIuA9XHsgSvhgQe+iUOT9d9At8q+wBSwwvEOqcGRVF/oF0MlxpSCFFLC4CiZSgEOgknn+0XxHRBrCto0ApvWuGDVhA3Q1C/bM0Q+OT4zODT8eBT+dpMr6xbdtpfdmqWbc4kN2ey3KszGR1YeT8dDqd7CeKFx6fJoVURbSw0lkfOlJ6Jh77TH/YDJmiwhbPXAAAAAElFTkSuQmCC",class:"h-[28rpx] w-[28rpx]"}),m(s,{"ml-1":"",text:"xs foreground-muted"},{default:d((()=>[x(" 面部干扰 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(U,{ref_key:"formRef",ref:k,"model-value":M.value,rules:R},{default:d((()=>[m(s,{class:"mx-[24rpx] mt-[60rpx]"},{default:d((()=>[m(O,{label:"",name:"name"},{default:d((()=>[m(_,{modelValue:M.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value.name=e),placeholder:"请输入形象名称"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model-value"]),m(s,{"mx-2":"","mt-2":"",class:"flex flex-col text-sm text-foreground-placeholder"},{default:d((()=>[g("span",null,"1.视频时长要求在30秒～5分钟，文件大小不超过1GB"),g("span",null,"2.为保障效果，视频必须保证每一帧都要正面露脸，脸部无任何遮挡，并且视频中只能出现同一个人脸"),g("span",null,"3.视频人物建议闭口或微微张口，张口幅度不宜过大；距离镜头一定距离。可根据合成效果自行调整。"),g("span",null,"4.视频格式为MP4/MOV，建议分辨率1080p~4K")])),_:1}),m(s,{class:"footer",position:"fixed left-0 bottom-0","z-2":"","w-full":"",center:"","flex-col":"","bg-background":"","p-3":""},{default:d((()=>[m(F,{type:"primary",onClick:v(j)},{default:d((()=>[x("创建形象")])),_:1},8,["onClick"]),m(s,{class:"mt-[24rpx] text-center text-sm"},{default:d((()=>[g("span",{text:"foreground-muted"},"我已知晓并同意"),g("span",{class:"text-primary",onClick:V},"《使用协议》")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-914fba65"]]);export{M as default};
