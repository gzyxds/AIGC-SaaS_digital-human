import{d as e,r as a,aI as l,j as s,a5 as u,G as r,J as o,l as t,o as n,c as p,w as d,H as i,a as c,b as f,n as m,p as x,F as _,s as v,aE as g,v as y,i as b,z as k,y as h,q as C,aA as j,t as w,C as N,e as z,_ as I}from"./index-CTSv8bdf.js";import{_ as S}from"./EmptyStatus.vue_vue_type_script_setup_true_lang.BbsBdioH.js";import{_ as E}from"./z-paging.DcYRLe5r.js";import{_ as H}from"./icon-sound-play.BP2LNVwo.js";import{_ as P}from"./icon-sound.D7rZqbzE.js";import{_ as V}from"./icon-select.ChgqfciC.js";import{u as A,b as F}from"./useAudio.-uo5Ft4D.js";const J=I(e({__name:"SelectTonePop",props:{soundId:{},soundName:{}},emits:["update:soundId","update:soundName"],setup(e,{expose:I,emit:J}){const U=J,q=a(),G=a(),K=a(),{play:L,pause:M,stop:Q,isPlaying:R}=A(),T=a(),B=l(null),D=a([]),O=async(e,a)=>{try{const{lists:l}=await F({page_no:e,page_size:a,status:g.SUCCESS});B.value.complete(l)}catch(l){console.log("报错=>",l),B.value.complete(!1)}},W=()=>{G.value&&(U("update:soundId",G.value),U("update:soundName",K.value)),q.value.close()},X=()=>{q.value.close(),y({url:"/pages/create_sound/index"})};return s((()=>{u((()=>{var e;null==(e=B.value)||e.refresh()}))})),I({open:e=>{e&&(console.log("id",e),G.value=Number(e)),q.value.open()}}),(e,a)=>{const l=b,s=z,u=S,g=r(o("z-paging"),E),y=k,I=h,A=r(o("uni-popup"),i),F=t("layout-default-uni");return n(),p(F,null,{default:d((()=>[c(A,{ref_key:"popupRef",ref:q,"border-radius":"24rpx",type:"bottom"},{default:d((()=>[c(l,{class:"select-Pop h-[1240rpx] rounded-t-[var(--ui-radius)]","bg-background":""},{default:d((()=>[c(l,{class:"mx-40rpx mb-28rpx pt-40rpx text-foreground-muted font-500"},{default:d((()=>[f(" 选择音色 ")])),_:1}),c(y,{"scroll-y":!0,class:"h-full"},{default:d((()=>[c(l,{class:"scroll-y-box h-full px-[24rpx]"},{default:d((()=>[c(g,{ref_key:"paging",ref:B,modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),fixed:!1,height:"100%","z-paging-refresh":"false",onQuery:O},{empty:d((()=>[c(l,{"h-full":"","w-full":""},{default:d((()=>[c(u,{"button-text":"去创建",onHandle:X})])),_:1})])),default:d((()=>[(n(!0),m(_,null,x(D.value,(e=>(n(),p(l,{key:e.id,class:"mb-[24rpx] flex items-center justify-between rounded-[28rpx] bg-background-muted px-[36rpx] py-[34rpx]",onClick:a=>{return l=e.id,s=e.name,console.log("radioChange => ",l,s),G.value=l,void(K.value=s);var l,s}},{default:d((()=>[c(l,{class:"flex items-center"},{default:d((()=>[C(R)&&T.value===e.id?(n(),p(s,{key:0,src:H,class:"h-[80rpx] w-[80rpx] flex-none",onClick:j(C(M),["stop"])},null,8,["onClick"])):(n(),p(s,{key:1,src:P,class:"h-[80rpx] w-[80rpx] flex-none",onClick:j((a=>{return l=e.id,s=e.voice_url,void(T.value&&T.value!==l?(T.value=l,Q(),L(s)):(T.value=l,L(s)));var l,s}),["stop"])},null,8,["onClick"])),c(l,{class:"ml-[32rpx]"},{default:d((()=>[c(l,{"line-clamp-1":"","mb-12rpx":""},{default:d((()=>[f(w(null==e?void 0:e.name),1)])),_:2},1024),c(l,{text:"xs foreground-placeholder"},{default:d((()=>[f(w(null==e?void 0:e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),c(l,{class:N(["h-[48rpx] w-[48rpx] flex items-center justify-center border-[4rpx] rounded-[30rpx] border-solid",Number(e.id)===Number(G.value)?"bg-primary border-primary":"border-foreground"])},{default:d((()=>[Number(e.id)===Number(G.value)?(n(),p(s,{key:0,src:V,class:"h-[44rpx] w-[44rpx]"})):v("",!0)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),D.value.length?(n(),p(l,{key:0,class:"footer fixed bottom-0 left-0 z-10 w-full px-3","bg-background":""},{default:d((()=>[c(I,{type:"primary",onClick:W},{default:d((()=>[f("使用音色")])),_:1})])),_:1})):v("",!0)])),_:1})])),_:1},512)])),_:1})}}}),[["__scopeId","data-v-16944208"]]);export{J as default};
