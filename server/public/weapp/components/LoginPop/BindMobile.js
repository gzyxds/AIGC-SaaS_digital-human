"use strict";const e=require("../../common/vendor.js"),o=require("../../api/user.js"),i=require("../../enums/variableEnum.js"),n=require("../../composables/useToast.js"),u=()=>"../VerificationCode.js";if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+u+e.resolveComponent("uni-forms"))()}Math||((()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-easyinput/uni-easyinput.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-forms-item/uni-forms-item.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-forms/uni-forms.js"))();const s=e.defineComponent({__name:"BindMobile",emits:["bind"],setup(u,{emit:s}){const l=s,r=e.ref(!1),a=e.ref(),d=e.ref({mobile:"",code:"",type:"bind"}),m={mobile:{rules:[{required:!0,errorMessage:"请输入手机号"}]},code:{rules:[{required:!0,errorMessage:"请输入验证码"}]}},t=()=>{d.value.mobile?(r.value=!0,o.apiPostSendCode({mobile:d.value.mobile,scene:i.CodeTypeEnum.BIND_MOBILE}),console.log("发送获取验证码请求")):n.useToast("请输入手机号")},c=async()=>{const e=await a.value.validate();console.log("表单校验通过",e),await o.apiPostBindMobile(d.value),l("bind")};return(o,i)=>({a:e.o((o=>e.unref(d).mobile=o)),b:e.p({"prefix-icon":"person",placeholder:"请输入手机号",modelValue:e.unref(d).mobile}),c:e.p({label:"",name:"mobile"}),d:e.o(t),e:e.o((o=>e.isRef(r)?r.value=o:null)),f:e.p({second:59,"countdown-switch":e.unref(r)}),g:e.o((o=>e.unref(d).code=o)),h:e.p({"prefix-icon":"locked",placeholder:"请输入验证码",modelValue:e.unref(d).code}),i:e.p({label:"",name:"code"}),j:e.sr(a,"70719b2c-0",{k:"formRef"}),k:e.p({"model-value":e.unref(d),rules:m}),l:e.o(c)})}});wx.createComponent(s);
