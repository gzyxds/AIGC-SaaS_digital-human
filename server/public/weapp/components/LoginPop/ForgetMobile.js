"use strict";const e=require("../../common/vendor.js"),o=require("../../api/user.js"),r=require("../../enums/variableEnum.js"),s=require("../../composables/useToast.js"),i=()=>"../VerificationCode.js";if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+i+e.resolveComponent("uni-forms"))()}Math||((()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-easyinput/uni-easyinput.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-forms-item/uni-forms-item.js")+(()=>"../../node-modules/@dcloudio/uni-ui/lib/uni-forms/uni-forms.js"))();const n=e.defineComponent({__name:"ForgetMobile",emits:["forget"],setup(i,{emit:n}){const l=n,u=e.ref(!1),a=e.ref(),d=e.ref({mobile:"",password:"",password_confirm:"",code:""}),m={mobile:{rules:[{required:!0,errorMessage:"请输入手机号"}]},password:{rules:[{required:!0,errorMessage:"请输入新密码"}]},password_confirm:{rules:[{required:!0,errorMessage:"请再次输入新密码"}]},code:{rules:[{required:!0,errorMessage:"请输入验证码"}]}},p=()=>{d.value.mobile?(u.value=!0,o.apiPostSendCode({mobile:d.value.mobile,scene:r.CodeTypeEnum.FIND_PASSWORD}),console.log("发送获取验证码请求")):s.useToast("请输入手机号")},c=async()=>{const e=await a.value.validate();console.log("表单校验通过",e),d.value.password===d.value.password_confirm?(await o.apiPostResetPassword(d.value),l("forget")):s.useToast("两次输入的密码不一致")};return(o,r)=>({a:e.o((o=>e.unref(d).mobile=o)),b:e.p({"prefix-icon":"person",placeholder:"请输入手机号",modelValue:e.unref(d).mobile}),c:e.p({label:"",name:"mobile"}),d:e.o(p),e:e.o((o=>e.isRef(u)?u.value=o:null)),f:e.p({second:59,"countdown-switch":e.unref(u)}),g:e.o((o=>e.unref(d).code=o)),h:e.p({"prefix-icon":"locked",placeholder:"请输入验证码",modelValue:e.unref(d).code}),i:e.p({label:"",name:"code"}),j:e.o((o=>e.unref(d).password=o)),k:e.p({type:"password","prefix-icon":"locked",placeholder:"请输入新密码",modelValue:e.unref(d).password}),l:e.p({label:"",name:"password"}),m:e.o((o=>e.unref(d).password_confirm=o)),n:e.p({type:"password","prefix-icon":"locked",placeholder:"请再次输入新密码",modelValue:e.unref(d).password_confirm}),o:e.p({label:"",name:"confirm_password"}),p:e.sr(a,"256ddb5a-0",{k:"formRef"}),q:e.p({"model-value":e.unref(d),rules:m}),r:e.o((e=>o.$emit("forget"))),s:e.o(c)})}});wx.createComponent(n);
