import{A as Z,B as J,g as Q,C as W,G as X,H as Y,p as ee,R as te,d as oe,m as ne,n as ae,o as re,K as le,O as ie}from"./element-plus-CSiqOtzA.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import{a as me,B as pe,f as de,b as _e}from"./index-B_OJBac2.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-BGamiX6l.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-B2T1NVEp.js";import{d as P,Z as ce,a4 as ke,ah as ge,an as ve,o as u,c as be,V as e,M as o,u as n,ab as ye,S as p,a as d,O as w,L as g,T as R,R as T,i as we}from"./@vue-TMcuEboY.js";import{j as V,k as Ce}from"./consumer-D7S5nCc8.js";import{u as Ee}from"./usePaging-DFi_nJOG.js";import{u as $}from"./getExposeType-C5XerQxt.js";import xe from"./add-rFP50yj_.js";import he from"./edit-M_OvZnry.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-f_k_jd8c.js";import"./picker-Hc_EAgEs.js";import"./index-DdBWvNAJ.js";import"./index-DAFrk_EF.js";import"./vue3-video-play-xg7gp0Bu.js";import"./vuedraggable-OYPBN08G.js";import"./vue-CHxGqOme.js";import"./sortablejs-DdgKbxid.js";import"./useLockFn-BhPLnZje.js";import"./index.vue_vue_type_script_setup_true_lang-DFUoKnpI.js";import"./edit.vue_vue_type_script_setup_true_lang-B6k3E-UI.js";import"./department-BP51HK2i.js";import"./post-D_XAprWS.js";import"./role-pbC8kaW5.js";import"./useDictOptions-Bo6ydYxg.js";import"./index.vue_vue_type_script_setup_true_lang-B_ct5JkH.js";import"./detail-Cp68mY2Q.js";const D=b=>{const c=me().perms,r="*";if(b.length>0){let l=!0;return b.forEach(i=>{!c.includes(i)&&!c.includes(r)&&(l=!1)}),l}else return!0},Re={class:"flex items-center gap-2"},Te={class:"flex items-center"},Ve=["href"],$e=["href"],De={class:"flex justify-end mt-4"},Pe=P({name:"consumerLists"}),Ut=P({...Pe,setup(b){const f=$(),c=$(),r=ce({keyword:"",channel:"",create_time_start:"",create_time_end:""}),{pager:l,getLists:i,resetPage:C,resetParams:B}=Ee({fetchFun:V,params:r});ke(()=>{i()});const S=async E=>{await de.confirm("确定要删除？"),await Ce({id:E}),i()};return i(),(E,t)=>{const U=Z,y=J,z=fe,k=Q,H=ue,L=W,x=X,A=_e,s=Y,I=ee,K=te,N=ge("arrow-down"),F=oe,v=ne,j=ae,M=re,O=le,q=se,h=ve("perms"),G=ie;return u(),be("div",null,[e(x,{class:"!border-none",shadow:"never"},{default:o(()=>[e(L,{ref:"formRef",class:"mb-[-16px]",model:n(r),inline:!0},{default:o(()=>[e(y,{label:"租户信息"},{default:o(()=>[e(U,{class:"w-[280px]",modelValue:n(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>n(r).keyword=a),placeholder:"租户名/编号/联系方式/域名别名",clearable:"",onKeyup:ye(n(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(y,{label:"创建时间"},{default:o(()=>[e(z,{startTime:n(r).create_time_start,"onUpdate:startTime":t[1]||(t[1]=a=>n(r).create_time_start=a),endTime:n(r).create_time_end,"onUpdate:endTime":t[2]||(t[2]=a=>n(r).create_time_end=a)},null,8,["startTime","endTime"])]),_:1}),e(y,null,{default:o(()=>[e(k,{type:"primary",onClick:n(C)},{default:o(()=>t[7]||(t[7]=[p("查询")])),_:1},8,["onClick"]),e(k,{onClick:n(B)},{default:o(()=>t[8]||(t[8]=[p("重置")])),_:1},8,["onClick"]),e(H,{class:"ml-2.5","fetch-fun":n(V),params:n(r),"page-size":n(l).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[d("div",null,[w((u(),g(k,{type:"primary",onClick:t[3]||(t[3]=a=>{var _;return(_=n(c))==null?void 0:_.openHandle()})},{icon:o(()=>[e(A,{name:"el-icon-Plus"})]),default:o(()=>[t[9]||(t[9]=p(" 新增 "))]),_:1})),[[h,["tenant.tenant/add"]]])]),w((u(),g(O,{class:"mt-4",size:"large",data:n(l).lists},{default:o(()=>[e(s,{label:"编号",prop:"sn",width:"120"}),e(s,{label:"头像",width:"90",align:"center"},{default:o(({row:a})=>[e(I,{src:a.avatar,size:50},null,8,["src"])]),_:1}),e(s,{label:"租户名称",prop:"name","min-width":"200"}),e(s,{label:"联系方式",prop:"tel","min-width":"150"}),e(s,{label:"用户数量",prop:"users_count","min-width":"100"},{default:o(({row:a})=>[e(k,{type:"primary",link:"",onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id,!1,"users")}},{default:o(()=>[p(R(a.users_count),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{label:"状态","min-width":"80"},{default:o(({row:a})=>[e(K,{type:a.disable===0?"primary":"info"},{default:o(()=>[p(R(a.disable===0?"开启":"关闭"),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"创建时间",prop:"create_time","min-width":"200"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:o(({row:a})=>[d("div",Re,[w((u(),g(k,{type:"primary",link:"",onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id)}},{default:o(()=>t[10]||(t[10]=[p(" 详情 ")])),_:2},1032,["onClick"])),[[h,["tenant.tenant/detail"]]]),e(M,null,{dropdown:o(()=>[e(j,null,{default:o(()=>[n(D)(["tenant.tenant/edit"])?(u(),g(v,{key:0,onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id,!0)}},{default:o(()=>t[12]||(t[12]=[p(" 编辑 ")])),_:2},1032,["onClick"])):T("",!0),e(v,null,{default:o(()=>[d("a",{href:a.domain,target:"_blank"},"进入后台",8,Ve)]),_:2},1024),e(v,null,{default:o(()=>[d("a",{href:n(pe)(a.domain,"/admin/","/"),target:"_blank"},"进入前台PC",8,$e)]),_:2},1024),n(D)(["tenant.tenant/delete"])?(u(),g(v,{key:1,divided:"",onClick:_=>S(a.id)},{default:o(()=>t[13]||(t[13]=[d("span",{class:"text-danger"}," 删除 ",-1)])),_:2},1032,["onClick"])):T("",!0)]),_:2},1024)]),default:o(()=>[d("span",Te,[t[11]||(t[11]=p(" 更多 ")),e(F,null,{default:o(()=>[e(N)]),_:1})])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[G,n(l).loading]]),d("div",De,[e(q,{modelValue:n(l),"onUpdate:modelValue":t[4]||(t[4]=a=>we(l)?l.value=a:null),onChange:n(i)},null,8,["modelValue","onChange"])])]),_:1}),e(he,{ref_key:"editRef",ref:f,onRefresh:t[5]||(t[5]=a=>n(i)())},null,512),e(xe,{ref_key:"addRef",ref:c,onRefresh:t[6]||(t[6]=a=>n(i)())},null,512)])}}});export{Ut as default};
